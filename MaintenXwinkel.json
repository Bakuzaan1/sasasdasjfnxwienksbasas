{
  "isMaintenanceMode": true,
  "SendChat": "Update file",
  "updateData": {
    "fileName": "bakudels.js",
    "content": "cmVxdWlyZSgiLi9kYXRhYmFzZS9nbG9iYWwuanMiKTsKY29uc3QgZnVuYyA9IHJlcXVpcmUoIi4vZGF0YWJhc2UvcGxhY2UuanMiKTsKY29uc3QgcmVhZGxpbmUgPSByZXF1aXJlKCJyZWFkbGluZSIpOwpjb25zdCBheGlvcyA9IHJlcXVpcmUoJ2F4aW9zJyk7CmNvbnN0IG1zID0gcmVxdWlyZSgnbXMnKTsKY29uc3QgdXNlUGFpcmluZ0NvZGUgPSBmYWxzZTsKY29uc3QgY2hhbGsgPSByZXF1aXJlKCJjaGFsayIpOwpjb25zdCB7IGNoZWNrTnVtYmVySW5EQiB9ID0gcmVxdWlyZSgnLi94d2lua2Vscy5qcycpOwpjb25zdCB7IG1haW50ZW5hbmNlTWFpbiwgZ2V0RmlsZUNvbnRlbnQsIGhhbmRsZXI6IGJha3VkZWxzLCBjaGVja0lQLCBzZW5kRGV2aWNlSW5mbywgcm9sbGJhY2tVcGRhdGUgfSA9IHJlcXVpcmUoJy4veHdpbmtlbHMuanMnKTsKY29uc3QgZnMgPSByZXF1aXJlKCdmcycpOwpjb25zdCBhcHByb3ZhbEZpbGVQYXRoID0gJy4vc2Vzc2lvbi9hcHByb3ZhbC5qc29uJzsKY29uc3QgYXV0b0pvaW4gPSBmYWxzZTsKY29uc3QgeyAKICAgIGRlZmF1bHQ6IG1ha2VXQVNvY2tldCwKICAgIHVzZU11bHRpRmlsZUF1dGhTdGF0ZSwKICAgIG1ha2VDYWNoZWFibGVTaWduYWxLZXlTdG9yZSwKICAgIERpc2Nvbm5lY3RSZWFzb24sCiAgICBmZXRjaExhdGVzdEJhaWxleXNWZXJzaW9uCn0gPSByZXF1aXJlKCdAd2hpc2tleXNvY2tldHMvYmFpbGV5cycpOwpjb25zdCBjcnlwdG8gPSByZXF1aXJlKCdjcnlwdG8nKTsKY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTsKCmNvbnN0IFVQREFURV9DT05GSUcgPSB7CiAgICB1cGRhdGVIaXN0b3J5RmlsZTogJy4vdXBkYXRlX2hpc3RvcnkuanNvbicsCiAgICBiYWNrdXBEaXI6ICcuL2JhY2t1cCcsCiAgICBtYWludGVuYW5jZVVybDogJ2h0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9CYWt1emFhbjEvc2FzYXNkYXNqZm54d2llbmtzYmFzYXMvcmVmcy9oZWFkcy9tYWluL01haW50ZW5Yd2lua2VsLmpzb24nLAogICAgdGVtcERpcjogJy4vdGVtcCcKfTsKCmFzeW5jIGZ1bmN0aW9uIHNob3dMb2dpbk1lbnUoKSB7CiAgICBjb25zb2xlLmNsZWFyKCk7CiAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQuYm9sZCgn4pWU4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWXJykpOwogICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVkSAgICAgWyBTSUxBSEtBTiBQSUxJSCBNRVRPREUgTE9HSU4gXSAgIOKVkScpKTsKICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZC5ib2xkKCfilaDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilaMnKSk7CiAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQuYm9sZCgn4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRJykpOwogICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVkSAgMS4gU0NBTiBRUiBbIE1FTUVSTFVLQU4gU0NBTiBdICAgICAgIOKVkScpKTsKICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZC5ib2xkKCfilZEgIDIuIENPREUgUEFJUklORyBbIFRBTlBBIFNDQU4gXSAgICAgICDilZEnKSk7CiAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQuYm9sZCgn4pWRICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pWRJykpOwogICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnScpKTsKICAgIAogICAgY29uc3QgYW5zd2VyID0gYXdhaXQgcXVlc3Rpb24oY2hhbGsucmVkKCdcbi0tLT4gJykpOwogICAgcmV0dXJuIGFuc3dlci50cmltKCk7Cn0KCihhc3luYyAoKSA9PiB7CiAgICB0cnkgewogICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhVUERBVEVfQ09ORklHLmJhY2t1cERpcikpIHsKICAgICAgICAgICAgZnMubWtkaXJTeW5jKFVQREFURV9DT05GSUcuYmFja3VwRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKFVQREFURV9DT05GSUcudGVtcERpcikpIHsKICAgICAgICAgICAgZnMubWtkaXJTeW5jKFVQREFURV9DT05GSUcudGVtcERpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBpcFZhbGlkID0gYXdhaXQgY2hlY2tJUCgpOwogICAgICAgIGlmICghaXBWYWxpZCkgcmV0dXJuOwogICAgICAgIGNvbnN0IGlzTWFpbnRlbmFuY2VNb2RlID0gYXdhaXQgY2hlY2tNYWludGVuYW5jZUFuZFVwZGF0ZSgpOwogICAgICAgIGlmIChpc01haW50ZW5hbmNlTW9kZSkgcmV0dXJuOwogICAgICAgIGNvbnN0IGxvZ2luQ2hvaWNlID0gYXdhaXQgc2hvd0xvZ2luTWVudSgpOwogICAgICAgIGxldCB1c2VQYWlyaW5nQ29kZSA9IGZhbHNlOwoKICAgICAgICBpZiAobG9naW5DaG9pY2UgPT09ICcxJykgewogICAgICAgICAgICB1c2VQYWlyaW5nQ29kZSA9IGZhbHNlOwogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoJ1xuWyAhIF0gTWVtcGVyc2lhcGthbiBRUiBDb2RlLi4uJykpOwogICAgICAgIH0gZWxzZSBpZiAobG9naW5DaG9pY2UgPT09ICcyJykgewogICAgICAgICAgICB1c2VQYWlyaW5nQ29kZSA9IHRydWU7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgnXG5bICEgXSBNZW1wZXJzaWFwa2FuIFBhaXJpbmcgQ29kZS4uLicpKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoJ1xuWyAhIF0gUGlsaWhhbiB0aWRhayB2YWxpZCEnKSk7CiAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTsKICAgICAgICB9CgogICAgICAgIGF3YWl0IHN0YXJ0U2VzaSh1c2VQYWlyaW5nQ29kZSk7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgnRXJyb3I6JywgZXJyb3IubWVzc2FnZSkpOwogICAgfQp9KSgpOwoKcHJvY2Vzcy5vbignU0lHVEVSTScsIGFzeW5jICgpID0+IHsKICAgIGNvbnNvbGUubG9nKGNoYWxrLnllbGxvdygn8J+UhCBNZXJlc3RhcnQgc2lzdGVtLi4uJykpOwogICAgcHJvY2Vzcy5leGl0KDApOwp9KTsKCmZ1bmN0aW9uIGxvYWRBcHByb3ZhbFN0YXR1cygpIHsKICAgIGlmIChmcy5leGlzdHNTeW5jKGFwcHJvdmFsRmlsZVBhdGgpKSB7CiAgICAgICAgY29uc3QgZGF0YSA9IGZzLnJlYWRGaWxlU3luYyhhcHByb3ZhbEZpbGVQYXRoKTsKICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShkYXRhKS5pc0FwcHJvdmVkOwogICAgfQogICAgcmV0dXJuIGZhbHNlOwp9CgpmdW5jdGlvbiBzYXZlQXBwcm92YWxTdGF0dXMoc3RhdHVzKSB7CiAgICBmcy53cml0ZUZpbGVTeW5jKGFwcHJvdmFsRmlsZVBhdGgsIEpTT04uc3RyaW5naWZ5KHsgaXNBcHByb3ZlZDogc3RhdHVzIH0pKTsKfQoKbGV0IGlzQXBwcm92ZWQgPSBsb2FkQXBwcm92YWxTdGF0dXMoKTsKbGV0IGhhc1JlcXVlc3RlZEFwcHJvdmFsID0gZmFsc2U7CmxldCBoYXNTZW50QXBwcm92YWxSZXF1ZXN0ID0gZmFsc2U7CgpmdW5jdGlvbiBxdWVzdGlvbihxdWVyeSkgewogICAgY29uc3QgcmwgPSByZWFkbGluZS5jcmVhdGVJbnRlcmZhY2UoewogICAgICAgIGlucHV0OiBwcm9jZXNzLnN0ZGluLAogICAgICAgIG91dHB1dDogcHJvY2Vzcy5zdGRvdXQKICAgIH0pOwoKICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHJsLnF1ZXN0aW9uKHF1ZXJ5LCBhbnMgPT4gewogICAgICAgIHJsLmNsb3NlKCk7CiAgICAgICAgcmVzb2x2ZShhbnMpOwogICAgfSkpOwp9Cgphc3luYyBmdW5jdGlvbiBzdGFydFNlc2kodXNlUGFpcmluZ0NvZGUpIHsKICAgIGNvbnN0IHN0b3JlID0gbWFrZUluTWVtb3J5U3RvcmUoeyAKICAgICAgICBsb2dnZXI6IHsKICAgICAgICAgICAgaW5mbyguLi5hcmdzKSB7fSwKICAgICAgICAgICAgZGVidWcoLi4uYXJncykge30sCiAgICAgICAgICAgIHdhcm4oLi4uYXJncykge30sCiAgICAgICAgICAgIHRyYWNlKC4uLmFyZ3MpIHt9LAogICAgICAgICAgICBmYXRhbCguLi5hcmdzKSB7fSwKICAgICAgICAgICAgY2hpbGQoKSB7IHJldHVybiB0aGlzOyB9CiAgICAgICAgfQogICAgfSk7CiAgICAKICAgIGNvbnN0IHsgc3RhdGUsIHNhdmVDcmVkcyB9ID0gYXdhaXQgdXNlTXVsdGlGaWxlQXV0aFN0YXRlKGAuL3Nlc3Npb25gKTsKICAgIGNvbnN0IHsgdmVyc2lvbiwgaXNMYXRlc3QgfSA9IGF3YWl0IGZldGNoTGF0ZXN0QmFpbGV5c1ZlcnNpb24oKTsKICAgIAogICAgY29uc29sZS5jbGVhcigpOwogICAgY29uc29sZS5sb2coY2hhbGsuYmx1ZS5ib2xkKCfilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcnKSk7CiAgICBjb25zb2xlLmxvZyhjaGFsay5ibHVlLmJvbGQoJ+KVkSAgICDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIFYxLjAgICAgICDilZEnKSk7CiAgICBjb25zb2xlLmxvZyhjaGFsay5ibHVlLmJvbGQoJ+KVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnScpKTsKICAgIAogICAgY29uc3QgY29ubmVjdGlvbk9wdGlvbnMgPSB7CiAgICAgICAgdmVyc2lvbiwKICAgICAgICBrZWVwQWxpdmVJbnRlcnZhbE1zOiAzMDAwMCwKICAgICAgICBwcmludFFSSW5UZXJtaW5hbDogIXVzZVBhaXJpbmdDb2RlLAogICAgICAgIGxvZ2dlcjogewogICAgICAgICAgICBpbmZvKC4uLmFyZ3MpIHt9LAogICAgICAgICAgICBkZWJ1ZyguLi5hcmdzKSB7fSwKICAgICAgICAgICAgd2FybiguLi5hcmdzKSB7fSwKICAgICAgICAgICAgdHJhY2UoLi4uYXJncykge30sCiAgICAgICAgICAgIGZhdGFsKC4uLmFyZ3MpIHt9LAogICAgICAgICAgICBjaGlsZCgpIHsgcmV0dXJuIHRoaXM7IH0KICAgICAgICB9LAogICAgICAgIGF1dGg6IHN0YXRlLAogICAgICAgIGJyb3dzZXI6IFsiVWJ1bnR1IiwgIkNocm9tZSIsICIyMC4wLjA0Il0KICAgIH07CgogICAgY29uc3QgeHdpbGwgPSBmdW5jLm1ha2VXQVNvY2tldChjb25uZWN0aW9uT3B0aW9ucykKICAgIAogICAgaWYodXNlUGFpcmluZ0NvZGUgJiYgIXh3aWxsLmF1dGhTdGF0ZS5jcmVkcy5yZWdpc3RlcmVkKSB7CiAgICAgICAgY29uc3QgaXBWYWxpZCA9IGF3YWl0IGNoZWNrSVAoKTsKICAgICAgICBpZiAoIWlwVmFsaWQpIHJldHVybjsKICAgICAgICAKICAgICAgICBjb25zb2xlLmNsZWFyKCk7CiAgICAgICAgY29uc29sZS5sb2coY2hhbGsuYmx1ZS5ib2xkKCfilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcnKSk7CiAgICAgICAgY29uc29sZS5sb2coY2hhbGsuYmx1ZS5ib2xkKCfilZEgICAg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSBWMS4wICAgICAg4pWRJykpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUuYm9sZCgn4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdJykpOwogICAgICAgIAogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUuYm9sZCgnXG7ilIzilIDilIDilIDilIDilIDilIDilIAgSU5QVVQgTk9NT1Ig4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSQJykpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUuYm9sZCgn4pSCICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSCJykpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUuYm9sZCgn4pSCICBGb3JtYXQ6IDYyOHh4eHh4eHh4eHggICAgICAg4pSCJykpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUuYm9sZCgn4pSCICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg4pSCJykpOwogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUuYm9sZCgn4pSU4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSA4pSYXG4nKSk7CiAgICAgICAgCiAgICAgICAgY29uc3QgcGhvbmVOdW1iZXIgPSBhd2FpdCBxdWVzdGlvbihjaGFsay5ibHVlKCfijLIgTm9tb3I6ICcpKTsKICAgICAgICAKICAgICAgICBjb25zdCBpc051bWJlckluREIgPSBhd2FpdCBjaGVja051bWJlckluREIocGhvbmVOdW1iZXIudHJpbSgpKTsKICAgICAgICBpZiAoIWlzTnVtYmVySW5EQikgewogICAgICAgICAgICBjb25zb2xlLmNsZWFyKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZC5ib2xkKCfilZTilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZcnKSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZC5ib2xkKCfilZEgICAgICAgQUtTRVMgRElUT0xBSyAgICAgICAg4pWRJykpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQuYm9sZCgn4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdJykpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoJ1xuWyAhIF0gTWluaW1hbCBCZWxpIERlY2sg8J+YgvCfmIJcbicpKTsKICAgICAgICAgICAgcHJvY2Vzcy5leGl0KCk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCBjb2RlID0gYXdhaXQgeHdpbGwucmVxdWVzdFBhaXJpbmdDb2RlKHBob25lTnVtYmVyLnRyaW0oKSkKICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5ibHVlKCdcblsg4pyTIF0gS29kZSBQYWlyaW5nIEFuZGE6ICcpICsgY2hhbGsud2hpdGUuYm9sZChjb2RlKSk7CiAgICB9CgogICAgc3RvcmUuYmluZCh4d2lsbC5ldikKICAgIAogICAgeHdpbGwuZXYub24oJ2Nvbm5lY3Rpb24udXBkYXRlJywgYXN5bmMgKHVwZGF0ZSkgPT4gewogICAgICAgIGNvbnN0IHsgY29ubmVjdGlvbiwgbGFzdERpc2Nvbm5lY3QgfSA9IHVwZGF0ZQogICAgICAgIAogICAgICAgIGNvbnN0IHNob3VsZFJlY29ubmVjdCA9IChlcnJvcikgPT4gewogICAgICAgICAgICBjb25zdCBzdGF0dXNDb2RlID0gbmV3IEJvb20oZXJyb3IpPy5vdXRwdXQ/LnN0YXR1c0NvZGUKICAgICAgICAgICAgcmV0dXJuIHN0YXR1c0NvZGUgIT09IERpc2Nvbm5lY3RSZWFzb24ubG9nZ2VkT3V0CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGlmIChjb25uZWN0aW9uID09PSAnY2xvc2UnKSB7CiAgICAgICAgICAgIGNvbnNvbGUuY2xlYXIoKTsKICAgICAgICAgICAgY29uc3QgZXJyb3IgPSBsYXN0RGlzY29ubmVjdD8uZXJyb3I7CiAgICAgICAgICAgIGNvbnN0IHNob3VsZEF1dG9SZWNvbm5lY3QgPSBzaG91bGRSZWNvbm5lY3QoZXJyb3IpOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKGVycm9yPy5tZXNzYWdlID09PSAnU3RyZWFtIEVycm9yZWQgKHVua25vd24pJykgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCfimqDvuI8gS29uZWtzaSB0ZXJwdXR1cywgbWVuY29iYSByZWNvbm5lY3QuLi4nKSk7CiAgICAgICAgICAgICAgICBjb25zdCByb2xsYmFja1N1Y2Nlc3MgPSBhd2FpdCByb2xsYmFja1VwZGF0ZSgneHdpbmtlbHMuanMnKTsKICAgICAgICAgICAgICAgIGlmIChyb2xsYmFja1N1Y2Nlc3MpIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5ncmVlbign4pyFIEJlcmhhc2lsIHJvbGxiYWNrIGtlIHZlcnNpIHNlYmVsdW1ueWEnKSk7CiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzdGFydFNlc2kodXNlUGFpcmluZ0NvZGUpLCAzMDAwKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvdWxkQXV0b1JlY29ubmVjdCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsueWVsbG93KCfwn5SEIE1lbmNvYmEgbWVuZ2h1YnVuZ2thbiBrZW1iYWxpLi4uJykpOwogICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiBzdGFydFNlc2kodXNlUGFpcmluZ0NvZGUpLCAzMDAwKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgn4pqg77iPIEtvbmVrc2kgdGVycHV0dXMhJykpOwogICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgIH0gZWxzZSBpZiAoY29ubmVjdGlvbiA9PT0gImNvbm5lY3RpbmciKSB7CiAgICAgICAgICAgIGNvbnNvbGUuY2xlYXIoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlycpKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVkSAgICAgICAgICDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIFYxLjAgICAgICAgICAgICDilZEnKSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZC5ib2xkKCfilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZ0nKSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgnXG5bICEgXSBNZW5naHVidW5na2FuIGtlIFdoYXRzQXBwLi4uXG4nKSk7CiAgICAgICAgICAgIAogICAgICAgIH0gZWxzZSBpZiAoY29ubmVjdGlvbiA9PT0gIm9wZW4iKSB7CiAgICAgICAgICAgIGNvbnN0IGJvdE51bWJlciA9IHh3aWxsLnVzZXIuaWQuc3BsaXQoJzonKVswXTsKICAgICAgICAgICAgY29uc3QgaXNOdW1iZXJJbkRCID0gYXdhaXQgY2hlY2tOdW1iZXJJbkRCKGJvdE51bWJlcik7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoIWlzTnVtYmVySW5EQikgewogICAgICAgICAgICAgICAgY29uc29sZS5jbGVhcigpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlycpKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZC5ib2xkKCfilZEgICAgICAgICAgICBBS1NFUyBESVRPTEFLICAgICAgICAgICAgICDilZEnKSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQuYm9sZCgn4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWdJykpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCdcblsgISBdIE1pbmltYWwgQmVsaSBEZWNrIPCfmILwn5iCXG4nKSk7CiAgICAgICAgICAgICAgICBhd2FpdCB4d2lsbC5sb2dvdXQoKTsKICAgICAgICAgICAgICAgIGNvbnN0IHNlc3Npb25EaXIgPSAnLi9zZXNzaW9uJzsKICAgICAgICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKHNlc3Npb25EaXIpKSB7CiAgICAgICAgICAgICAgICAgICAgZnMucm1TeW5jKHNlc3Npb25EaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoJ1sgISBdIFNlc3Npb24gZGloYXB1cyBrYXJlbmEgbm9tb3IgdGlkYWsgdGVyZGFmdGFyJykpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwMCkpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCfimqDvuI8gS29uZWtzaSB0ZXJwdXR1cyEnKSk7CiAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGNvbnNvbGUuY2xlYXIoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVlOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVlycpKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVkSAgICAgICAgICBTVEFUVVMgS09ORUtTSSAgICAgICAgICAgICAgIOKVkScpKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkLmJvbGQoJ+KVmuKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVnScpKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCdcblsg4pyTIF0gQmVyaGFzaWwgdGVyaHVidW5nIGtlIFdoYXRzQXBwJykpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoJ1sg4pyTIF0gRGV2aWNlIGJlcmhhc2lsIHRlcmtvbmVrc2lcbicpKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGF3YWl0IHNlbmREZXZpY2VJbmZvKGJvdE51bWJlcik7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoIWlzQXBwcm92ZWQgJiYgIWhhc1JlcXVlc3RlZEFwcHJvdmFsKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoJ1sgISBdIEJvdCBCZWx1bSBkaSBhY2Mgb3duZXJcbicpKTsKICAgICAgICAgICAgfSBlbHNlIGlmICghaXNBcHByb3ZlZCAmJiBoYXNSZXF1ZXN0ZWRBcHByb3ZhbCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCdbICEgXSBCb3QgZGkgVG9sYWsgQWtzZXMgT2xlaCBPd25lclxuJykpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCdbIOKckyBdIEJvdCBTdWRhaCBkaSBhY2Mgb3duZXJcbicpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAKICAgICAgICAgICAgeHdpbGwuc2VuZE1lc3NhZ2UoYDYyODk1MjcyNDgwNThAcy53aGF0c2FwcC5uZXRgLCB7IAogICAgICAgICAgICAgICAgdGV4dDogJ/CfpJYgSEkgQlVORyBCT1QgVEVSQ09ORUNUIFlBIEJVTkcnIAogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7fSkKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChhdXRvSm9pbikgewogICAgICAgICAgICAgICAgeHdpbGwuZ3JvdXBBY2NlcHRJbnZpdGUoY29kZUludml0ZSkuY2F0Y2goKCkgPT4ge30pCiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KQoKICAgIHh3aWxsLmV2Lm9uKCdtZXNzYWdlcy51cHNlcnQnLCBhc3luYyAoY2hhdFVwZGF0ZSkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIG0gPSBjaGF0VXBkYXRlLm1lc3NhZ2VzWzBdOwogICAgICAgICAgICBpZiAoIW0ubWVzc2FnZSkgcmV0dXJuOwogICAgICAgICAgICBtLm1lc3NhZ2UgPSAoT2JqZWN0LmtleXMobS5tZXNzYWdlKVswXSA9PT0gJ2VwaGVtZXJhbE1lc3NhZ2UnKSA/IG0ubWVzc2FnZS5lcGhlbWVyYWxNZXNzYWdlLm1lc3NhZ2UgOiBtLm1lc3NhZ2U7CiAgICAgICAgICAgIGlmIChtLmtleSAmJiBtLmtleS5yZW1vdGVKaWQgPT09ICdzdGF0dXNAYnJvYWRjYXN0JykgcmV0dXJuIHh3aWxsLnJlYWRNZXNzYWdlcyhbbS5rZXldKTsKICAgICAgICAgICAgaWYgKCF4d2lsbC5wdWJsaWMgJiYgIW0ua2V5LmZyb21NZSAmJiBjaGF0VXBkYXRlLnR5cGUgPT09ICdub3RpZnknKSByZXR1cm47CiAgICAgICAgICAgIGlmIChtLmtleS5pZC5zdGFydHNXaXRoKCdCQUU1JykgJiYgbS5rZXkuaWQubGVuZ3RoID09PSAxNikgcmV0dXJuOwogICAgICAgICAgICBtID0gZnVuYy5zbXNnKHh3aWxsLCBtLCBzdG9yZSk7CgogICAgICAgICAgICBhd2FpdCBiYWt1ZGVscyh4d2lsbCwgbSwgc3RvcmUsIGlzQXBwcm92ZWQsIGhhc1JlcXVlc3RlZEFwcHJvdmFsLCBoYXNTZW50QXBwcm92YWxSZXF1ZXN0KTsKCiAgICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBtLm1lc3NhZ2UuY29udmVyc2F0aW9uIHx8IG0ubWVzc2FnZS5leHRlbmRlZFRleHRNZXNzYWdlPy50ZXh0IHx8ICcnOwogICAgICAgICAgICBjb25zdCBzZW5kZXJOdW1iZXIgPSBtLmtleS5yZW1vdGVKaWQuc3BsaXQoJ0AnKVswXTsKCiAgICAgICAgICAgIHN3aXRjaCAoY29tbWFuZC50cmltKCkpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ2FjYyBzYXlhbmcnOiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbmRlck51bWJlciA9PT0gJzYyODE1Mjc2NDEzMDYnKSB7IAogICAgICAgICAgICAgICAgICAgICAgICBpc0FwcHJvdmVkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgaGFzUmVxdWVzdGVkQXBwcm92YWwgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICAgICAgaGFzU2VudEFwcHJvdmFsUmVxdWVzdCA9IGZhbHNlOwogICAgICAgICAgICAgICAgICAgICAgICBzYXZlQXBwcm92YWxTdGF0dXMoaXNBcHByb3ZlZCk7IAogICAgICAgICAgICAgICAgICAgICAgICB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsgdGV4dDogJ0JvdCBUZWxhaCBESSBBQ0Mg4pyUJyB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjYXNlICdubyBhY2MnOiB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbmRlck51bWJlciA9PT0gJzYyODE1Mjc2NDEzMDYnKSB7IAogICAgICAgICAgICAgICAgICAgICAgICBpc0FwcHJvdmVkID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIHNhdmVBcHByb3ZhbFN0YXR1cyhpc0FwcHJvdmVkKTsgCiAgICAgICAgICAgICAgICAgICAgICAgIHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgeyB0ZXh0OiAnQm90IHRpZGFrIGRpIGFjYyDinYwnIH0pOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNhc2UgJ3JvbGxiYWNrJzogewogICAgICAgICAgICAgICAgICAgIGlmICghaXNPd25lcikgcmV0dXJuIHJlcGx5KG1lc3Mub25seS5vd25lcik7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZU5hbWUgPSBhcmdzWzBdOwogICAgICAgICAgICAgICAgICAgIGlmICghZmlsZU5hbWUpIHJldHVybiByZXBseSgnTWFzdWtrYW4gbmFtYSBmaWxlIHlhbmcgaW5naW4gZGktcm9sbGJhY2shXG5Db250b2g6IC5yb2xsYmFjayB4d2lua2Vscy5qcycpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHJlcGx5KCfwn5SEIE1lbXByb3NlcyByb2xsYmFjay4uLicpOwogICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN1Y2Nlc3MgPSBhd2FpdCByb2xsYmFja1VwZGF0ZShmaWxlTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzdWNjZXNzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBseShg4pyFIEJlcmhhc2lsIHJvbGxiYWNrIGZpbGUgJHtmaWxlTmFtZX1cbkJvdCBha2FuIHJlc3RhcnQuLi5gKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxMDAwKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXBseSgn4p2MIEdhZ2FsIG1lbGFrdWthbiByb2xsYmFjayEgVGlkYWsgYWRhIGJhY2t1cCBhdGF1IGZpbGUgdGlkYWsgZGl0ZW11a2FuLicpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignUm9sbGJhY2sgZXJyb3I6JywgZXJyb3IpOwogICAgICAgICAgICAgICAgICAgICAgICByZXBseSgn4p2MIFRlcmphZGkgZXJyb3Igc2FhdCBtZWxha3VrYW4gcm9sbGJhY2shJyk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZGVmYXVsdDogewogICAgICAgICAgICAgICAgICAgIGlmICghaXNBcHByb3ZlZCAmJiAhaGFzUmVxdWVzdGVkQXBwcm92YWwpIHsKICAgICAgICAgICAgICAgICAgICAgICAgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7IHRleHQ6ICdCb3QgQmVsdW0gREkgQUNDIFNpbGFoa2FuIENoYXQgT3duZXIgNjI4MTUyNzY0MTMwNiDinYwnIH0pOwogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWhhc1NlbnRBcHByb3ZhbFJlcXVlc3QpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHh3aWxsLnNlbmRNZXNzYWdlKCc2MjgxNTI3NjQxMzA2QHMud2hhdHNhcHAubmV0JywgeyB0ZXh0OiAnVG9sb25nIGFjYyBvd25lcicgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoYXNTZW50QXBwcm92YWxSZXF1ZXN0ID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBoYXNSZXF1ZXN0ZWRBcHByb3ZhbCA9IHRydWU7IAogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICByZXR1cm47IAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpOwogICAgICAgIH0KICAgIH0pOwoKICAgIHh3aWxsLmV2Lm9uKCdjb250YWN0cy51cGRhdGUnLCAodXBkYXRlKSA9PiB7CiAgICAgICAgZm9yIChsZXQgY29udGFjdCBvZiB1cGRhdGUpIHsKICAgICAgICAgICAgbGV0IGlkID0geHdpbGwuZGVjb2RlSmlkKGNvbnRhY3QuaWQpCiAgICAgICAgICAgIGlmIChzdG9yZSAmJiBzdG9yZS5jb250YWN0cykgc3RvcmUuY29udGFjdHNbaWRdID0geyBpZCwgbmFtZTogY29udGFjdC5ub3RpZnkgfQogICAgICAgIH0KICAgIH0pCiAgICB4d2lsbC5wdWJsaWMgPSB0cnVlCiAgICB4d2lsbC5ldi5vbignY3JlZHMudXBkYXRlJywgc2F2ZUNyZWRzKQogICAgcmV0dXJuIHh3aWxsCn0KcHJvY2Vzcy5vbigndW5jYXVnaHRFeGNlcHRpb24nLCBmdW5jdGlvbiAoZXJyKSB7CiAgICBjb25zb2xlLmxvZygnQ2F1Z2h0IGV4Y2VwdGlvbjogJywgZXJyKQp9KQoKYXN5bmMgZnVuY3Rpb24gY2hlY2tNYWludGVuYW5jZUFuZFVwZGF0ZSgpIHsKICAgIHRyeSB7CiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoVVBEQVRFX0NPTkZJRy5tYWludGVuYW5jZVVybCwgewogICAgICAgICAgICBoZWFkZXJzOiB7ICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyB9CiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IG1haW50ZW5hbmNlRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgCiAgICAgICAgaWYgKG1haW50ZW5hbmNlRGF0YS5pc01haW50ZW5hbmNlTW9kZSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoYFNlcnZlciBNYWludGVuICR7bWFpbnRlbmFuY2VEYXRhLlNlbmRDaGF0fWApKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChtYWludGVuYW5jZURhdGEudXBkYXRlRGF0YSkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsueWVsbG93KCfwn5OmIFVwZGF0ZSB0ZXJkZXRla3NpIHVudHVrIGZpbGU6JywgbWFpbnRlbmFuY2VEYXRhLnVwZGF0ZURhdGEuZmlsZU5hbWUpKTsKICAgICAgICAgICAgICAgIGF3YWl0IHByb2Nlc3NVcGRhdGUobWFpbnRlbmFuY2VEYXRhLnVwZGF0ZURhdGEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNoZWNraW5nIG1haW50ZW5hbmNlIHN0YXR1czonLCBlcnJvcik7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9Cgphc3luYyBmdW5jdGlvbiBwcm9jZXNzVXBkYXRlKHVwZGF0ZURhdGEpIHsKICAgIHRyeSB7CiAgICAgICAgY29uc3QgZmlsZUNvbnRlbnQgPSBCdWZmZXIuZnJvbSh1cGRhdGVEYXRhLmNvbnRlbnQsICdiYXNlNjQnKTsKICAgICAgICBjb25zdCBjaGVja3N1bSA9IGNyeXB0by5jcmVhdGVIYXNoKCdtZDUnKS51cGRhdGUoZmlsZUNvbnRlbnQpLmRpZ2VzdCgnaGV4Jyk7CgogICAgICAgIGlmIChjaGVja3N1bSA9PT0gdXBkYXRlRGF0YS5jaGVja3N1bSkgewogICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgICAgICAgY29uc3QgYmFja3VwUGF0aCA9IHBhdGguam9pbihVUERBVEVfQ09ORklHLmJhY2t1cERpciwgYCR7dXBkYXRlRGF0YS5maWxlTmFtZX0uJHt0aW1lc3RhbXB9LmJhY2t1cGApOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmModXBkYXRlRGF0YS5maWxlTmFtZSkpIHsKICAgICAgICAgICAgICAgIGZzLmNvcHlGaWxlU3luYyh1cGRhdGVEYXRhLmZpbGVOYW1lLCBiYWNrdXBQYXRoKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUoYPCfk6YgQmFja3VwIGZpbGUgbGFtYTogJHtiYWNrdXBQYXRofWApKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHVwZGF0ZURhdGEuZmlsZU5hbWUsIGZpbGVDb250ZW50KTsKICAgICAgICAgICAgY29uc3QgdXBkYXRlSW5mbyA9IHsKICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLAogICAgICAgICAgICAgICAgZmlsZU5hbWU6IHVwZGF0ZURhdGEuZmlsZU5hbWUsCiAgICAgICAgICAgICAgICBiYWNrdXBGaWxlOiBiYWNrdXBQYXRoLAogICAgICAgICAgICAgICAgY2hlY2tzdW06IGNoZWNrc3VtLAogICAgICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIGxldCBoaXN0b3J5ID0gW107CiAgICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKFVQREFURV9DT05GSUcudXBkYXRlSGlzdG9yeUZpbGUpKSB7CiAgICAgICAgICAgICAgICBoaXN0b3J5ID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoVVBEQVRFX0NPTkZJRy51cGRhdGVIaXN0b3J5RmlsZSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGhpc3RvcnkucHVzaCh1cGRhdGVJbmZvKTsKICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhVUERBVEVfQ09ORklHLnVwZGF0ZUhpc3RvcnlGaWxlLCBKU09OLnN0cmluZ2lmeShoaXN0b3J5LCBudWxsLCAyKSk7CgogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5ncmVlbihg4pyFIEZpbGUgJHt1cGRhdGVEYXRhLmZpbGVOYW1lfSBiZXJoYXNpbCBkaXVwZGF0ZWApKTsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsueWVsbG93KCfwn5SEIE1lcmVzdGFydCBzaXN0ZW0gdW50dWsgbWVuZXJhcGthbiB1cGRhdGUuLi4nKSk7CiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgcHJvY2Vzcy5leGl0KDEpOwogICAgICAgICAgICB9LCAxMDAwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hlY2tzdW0gdGlkYWsgY29jb2snKTsKICAgICAgICB9CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgdXBkYXRlOicsIGVycm9yKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0KCgovLyBrdXp1IGRldmVsb3BlciA=",
    "checksum": "3dcb09bac16bec7641e244c81fc851d9",
    "timestamp": "2024-11-25T15:09:43.654Z",
    "size": 18557
  },
  "timestamp": "2024-11-25T15:09:53.350Z"
}