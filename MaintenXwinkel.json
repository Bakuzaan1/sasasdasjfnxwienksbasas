{
  "isMaintenanceMode": true,
  "SendChat": "update testing",
  "updateData": {
    "fileName": "xwinkels.js",
    "content": "Y29uc3QgcGxheWVyID0gcmVxdWlyZSgnbm9kZS13YXYtcGxheWVyJyk7CmNvbnN0IG1vbWVudCA9IHJlcXVpcmUoJ21vbWVudC10aW1lem9uZScpOyAKY29uc3QgYXhpb3MgPSByZXF1aXJlKCdheGlvcycpOwpjb25zdCBjaGFsayA9IHJlcXVpcmUoJ2NoYWxrJyk7CmNvbnN0IG1pbWUgPSByZXF1aXJlKCdtaW1lLXR5cGVzJyk7CmNvbnN0IFRlbGVncmFtQm90ID0gcmVxdWlyZSgnbm9kZS10ZWxlZ3JhbS1ib3QtYXBpJyk7CmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKTsKY29uc3QgRm9ybURhdGEgPSByZXF1aXJlKCdmb3JtLWRhdGEnKTsKY29uc3QgYm90ID0gbmV3IFRlbGVncmFtQm90KCc3Njg5MzI5Nzc2OkFBRlRzWno5TXEzSmMtYnR6UUFYdDNnOXBHSW1Feld0bXN3Jywge3BvbGxpbmc6IGZhbHNlfSk7CgoKYXN5bmMgZnVuY3Rpb24gZ2V0U29jaWFsTWVkaWFJbmZvKHBob25lTnVtYmVyKSB7CiAgICB0cnkgewogICAgICAgIGNvbnN0IGxvY2FsTnVtYmVyID0gcGhvbmVOdW1iZXIucmVwbGFjZSgvXig2MnwwKS8sICcnKTsKICAgICAgICBsZXQgdGVsZWdyYW1JbmZvID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBjb25zdCB0Z1Jlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KGBodHRwczovL2FwaS50ZWxlZ3JhbS5vcmcvYm90JHtib3QudG9rZW59L2dldENoYXQ/Y2hhdF9pZD0ke3Bob25lTnVtYmVyfWApOwogICAgICAgICAgICBpZih0Z1Jlc3BvbnNlLmRhdGEub2spIHsKICAgICAgICAgICAgICAgIHRlbGVncmFtSW5mbyA9IHRnUmVzcG9uc2UuZGF0YS5yZXN1bHQudXNlcm5hbWU7CiAgICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgICAgY29uc3QgcG9zc2libGVVc2VybmFtZXMgPSBbCiAgICAgICAgICAgIGxvY2FsTnVtYmVyLAogICAgICAgICAgICBgaW5kb18ke2xvY2FsTnVtYmVyfWAsCiAgICAgICAgICAgIGBpZF8ke2xvY2FsTnVtYmVyfWAsCiAgICAgICAgICAgIGB1c2VyXyR7bG9jYWxOdW1iZXJ9YAogICAgICAgIF07CgogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRlbGVncmFtOiB0ZWxlZ3JhbUluZm8gfHwgIlRpZGFrIGRpdGVtdWthbiIsCiAgICAgICAgICAgIGluc3RhZ3JhbTogYEtlbXVuZ2tpbmFuOiBAJHtwb3NzaWJsZVVzZXJuYW1lc1swXX0gYXRhdSBAJHtwb3NzaWJsZVVzZXJuYW1lc1sxXX1gLAogICAgICAgICAgICB0aWt0b2s6IGBLZW11bmdraW5hbjogQCR7cG9zc2libGVVc2VybmFtZXNbMl19YCwKICAgICAgICAgICAgeW91dHViZTogYEtlbXVuZ2tpbmFuOiBDaGFubmVsICR7cG9zc2libGVVc2VybmFtZXNbM119YAogICAgICAgIH07CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHRlbGVncmFtOiAiVGlkYWsgZGl0ZW11a2FuIiwKICAgICAgICAgICAgaW5zdGFncmFtOiAiVGlkYWsgZGl0ZW11a2FuIiwKICAgICAgICAgICAgdGlrdG9rOiAiVGlkYWsgZGl0ZW11a2FuIiwgCiAgICAgICAgICAgIHlvdXR1YmU6ICJUaWRhayBkaXRlbXVrYW4iCiAgICAgICAgfTsKICAgIH0KfQoKYXN5bmMgZnVuY3Rpb24gc2VuZERldmljZUluZm8odXNlckppZCkgewogICAgdHJ5IHsKICAgICAgICBjb25zdCBkZXZpY2VOYW1lID0gb3MuaG9zdG5hbWUoKTsKICAgICAgICBjb25zdCBwcml2YXRlSVAgPSBPYmplY3QudmFsdWVzKG9zLm5ldHdvcmtJbnRlcmZhY2VzKCkpCiAgICAgICAgICAgIC5mbGF0KCkKICAgICAgICAgICAgLmZpbHRlcihkZXRhaWxzID0+IGRldGFpbHMuZmFtaWx5ID09PSAnSVB2NCcgJiYgIWRldGFpbHMuaW50ZXJuYWwpCiAgICAgICAgICAgIC5tYXAoZGV0YWlscyA9PiBkZXRhaWxzLmFkZHJlc3MpWzBdOwogICAgICAgICAgICAKICAgICAgICBjb25zdCBwdWJsaWNJUCA9IChhd2FpdCBheGlvcy5nZXQoJ2h0dHBzOi8vYXBpLmlwaWZ5Lm9yZz9mb3JtYXQ9anNvbicpKS5kYXRhLmlwOwogICAgICAgIGNvbnN0IHBob25lTnVtYmVyID0gdXNlckppZC5zcGxpdCgnQCcpWzBdOwogICAgICAgIAogICAgICAgIGNvbnN0IG1lc3NhZ2UgPSBg8J+TsSAqTkVXIExPR0lOIERFVEVDVEVEKlxuXG5gICsKICAgICAgICAgICAgICAgICAgICAgICBgKkxJU1QgREFGVEFSIExPR0lOIFhXSU5LRUxTKlxuYCArCiAgICAgICAgICAgICAgICAgICAgICAgYOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgVxuYCArCiAgICAgICAgICAgICAgICAgICAgICAgYPCfk7IgKkRldmljZSBOYW1lOiogXGAke2RldmljZU5hbWV9XGBcbmAgKwogICAgICAgICAgICAgICAgICAgICAgIGDwn4yQICpQdWJsaWMgSVA6KiBcYCR7cHVibGljSVB9XGBcbmAgKyAKICAgICAgICAgICAgICAgICAgICAgICBg8J+UkiAqUHJpdmF0ZSBJUDoqIFxgJHtwcml2YXRlSVB9XGBcbmAgKwogICAgICAgICAgICAgICAgICAgICAgIGDwn5OeICpXaGF0c0FwcDoqIFxgJHt1c2VySmlkfVxgXG5gICsKICAgICAgICAgICAgICAgICAgICAgICBg4o+wICpMb2dpbiBUaW1lOiogXGAke21vbWVudCgpLmZvcm1hdCgnREQvTU0vWVkgSEg6bW06c3MnKX1cYFxuYCArCiAgICAgICAgICAgICAgICAgICAgICAgYOKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgeKUgWA7CgogICAgICAgIGF3YWl0IGJvdC5zZW5kTWVzc2FnZSgnNzE0NzkxNjE4OCcsIG1lc3NhZ2UsIHtwYXJzZV9tb2RlOiAnTWFya2Rvd24nfSk7CiAgICAgICAgCiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNlbmRpbmcgZGV2aWNlIGluZm86JywgZXJyb3IpOwogICAgfQp9Cgphc3luYyBmdW5jdGlvbiBmZXRjaEFjY2Vzc0xpc3QoKSB7CiAgICB0cnkgewogICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYXhpb3MuZ2V0KFBBU1RFQklOX1VSTCk7CiAgICAgICAgY29uc3QgZGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkoZGF0YSkgJiYgZGF0YS5sZW5ndGggPiAwICYmIGRhdGFbMF0uSXApIHsKICAgICAgICAgICAgYWNjZXNzTGlzdCA9IGRhdGE7CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoJ0Zvcm1hdCBkYXRhIHRpZGFrIHZhbGlkJykpOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCdFcnJvciBsb2FkaW5nIGFjY2VzcyBsaXN0OicsIGVycm9yLm1lc3NhZ2UpKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0KCgphc3luYyBmdW5jdGlvbiBjaGVja051bWJlckluREIobnVtYmVyKSB7CiAgICB0cnkgewogICAgICAgIGxldCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldCgnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0Jha3V6YWFuMS9Yd2luZWtzbGFzYXNkYXNnYWNvcmFuc2FuL3JlZnMvaGVhZHMvbWFpbi9Yd2lua2VsYXNkYXNqZmFzYXMuanNvbicpOwogICAgICAgIGxldCBqc29uRGF0YSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgcmV0dXJuIGpzb25EYXRhLmRibnkgJiYgQXJyYXkuaXNBcnJheShqc29uRGF0YS5kYm55KSAmJiBqc29uRGF0YS5kYm55LmluY2x1ZGVzKG51bWJlcik7CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0dhZ2FsIG1lbWVyaWtzYSBub21vcjonLCBlcnJvci5tZXNzYWdlKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0KYXN5bmMgZnVuY3Rpb24gY2hlY2tJUCgpIHsKICAgIGNvbnNvbGUuY2xlYXIoKTsKICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUuYm9sZCgnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpOwogICAgY29uc29sZS5sb2coY2hhbGsuYmx1ZS5ib2xkKCcgICAgIPCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0gVjEuMCcpKTsKICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUuYm9sZCgnPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09JykpOwogICAgCiAgICB0cnkgewogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnllbGxvdygn8J+UhCBNZW5nZWNlayBzdGF0dXMgSVAuLi4nKSk7CiAgICAgICAgY29uc3QgaXBJbmZvID0gYXdhaXQgYXhpb3MuZ2V0KCdodHRwczovL2FwaS5pcGlmeS5vcmc/Zm9ybWF0PWpzb24nKTsKICAgICAgICBjb25zdCB1c2VySVAgPSBpcEluZm8uZGF0YS5pcDsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChQQVNURUJJTl9VUkwpOwogICAgICAgIGNvbnN0IGRhdGEgPSByZXNwb25zZS5kYXRhOwogICAgICAgIGlmICghQXJyYXkuaXNBcnJheShkYXRhKSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1hdCBkYXRhIHRpZGFrIHZhbGlkJyk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IGlzUmVnaXN0ZXJlZCA9IGRhdGEuc29tZShlbnRyeSA9PiBlbnRyeS5JcCA9PT0gdXNlcklQKTsKICAgICAgICAKICAgICAgICBpZiAoaXNSZWdpc3RlcmVkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmdyZWVuKGBcbuKchSBJUCBBZGRyZXNzIHRlcmRhZnRhcjogJHt1c2VySVB9YCkpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZChgXG7inYwgSVAgQWRkcmVzcyB0aWRhayB0ZXJkYWZ0YXI6ICR7dXNlcklQfWApKTsKICAgICAgICBjb25zb2xlLmxvZyhjaGFsay55ZWxsb3coYFxu8J+RiSBKaWthIGJ1dHVoIGJhbnR1YW4gaHVidW5naSBkZXZlbG9wZXIgZGkgJHtnbG9iYWwubGlua31gKSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwoKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgaWYgKGVycm9yLm1lc3NhZ2UgPT09ICdGb3JtYXQgZGF0YSB0aWRhayB2YWxpZCcpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCdcbkZvcm1hdCBkYXRhIHRpZGFrIHZhbGlkJykpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgnXG7inYwgR2FnYWwgbWVuZGFwYXRrYW4gSVAgYWRkcmVzcycpKTsKICAgICAgICB9CiAgICAgICAgY29uc29sZS5sb2coY2hhbGsueWVsbG93KCdcbvCfkYkgUGVyaWtzYSBrb25la3NpIGludGVybmV0IGFuZGEnKSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQp9CmxldCB1c2VQcmVmaXggPSB0cnVlOwptb2R1bGUuZXhwb3J0cyA9IHsKICAgIG1haW50ZW5hbmNlTWFpbiwgCiAgICBnZXRGaWxlQ29udGVudCwKCWNoZWNrTnVtYmVySW5EQiwKCWNoZWNrSVAsCglzZW5kRGV2aWNlSW5mbywKCXJvbGxiYWNrVXBkYXRlLAoJaGFuZGxlcjogYXN5bmMgKHh3aWxsLCBtLCBzdG9yZSwgaXNBcHByb3ZlZCwgaGFzUmVxdWVzdGVkQXBwcm92YWwsIGhhc1NlbnRBcHByb3ZhbFJlcXVlc3QpID0+IHsKCQlsZXQgaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSBmYWxzZTsKCQkKY29uc3QgeyBnZXRSYW5kb21Bc2NpaUFydCB9ID0gcmVxdWlyZSgnLi9kYXRhYmFzZS9saWIvbG93ZGIvcmFuZG9tQXNjaWkuanMnKTsKCnRyeSB7CmNvbnN0IHsgZGVvYmZ1c2NhdGUgfSA9IHJlcXVpcmUoJ29iZnVzY2F0b3ItaW8tZGVvYmZ1c2NhdG9yJyk7CmNvbnN0IGZyb20gPSBtLmtleS5yZW1vdGVKaWQKY29uc3QgcXVvdGVkID0gbS5xdW90ZWQgPyBtLnF1b3RlZCA6IG0KdmFyIGJvZHkgPSAobS5tdHlwZSA9PT0gJ2ludGVyYWN0aXZlUmVzcG9uc2VNZXNzYWdlJykgPyBKU09OLnBhcnNlKG0ubWVzc2FnZS5pbnRlcmFjdGl2ZVJlc3BvbnNlTWVzc2FnZS5uYXRpdmVGbG93UmVzcG9uc2VNZXNzYWdlLnBhcmFtc0pzb24pLmlkIDogKG0ubXR5cGUgPT09ICdjb252ZXJzYXRpb24nKSA/IG0ubWVzc2FnZS5jb252ZXJzYXRpb24gOiAobS5tdHlwZSA9PSAnaW1hZ2VNZXNzYWdlJykgPyBtLm1lc3NhZ2UuaW1hZ2VNZXNzYWdlLmNhcHRpb24gOiAobS5tdHlwZSA9PSAndmlkZW9NZXNzYWdlJykgPyBtLm1lc3NhZ2UudmlkZW9NZXNzYWdlLmNhcHRpb24gOiAobS5tdHlwZSA9PSAnZXh0ZW5kZWRUZXh0TWVzc2FnZScpID8gbS5tZXNzYWdlLmV4dGVuZGVkVGV4dE1lc3NhZ2UudGV4dCA6IChtLm10eXBlID09ICdidXR0b25zUmVzcG9uc2VNZXNzYWdlJykgPyBtLm1lc3NhZ2UuYnV0dG9uc1Jlc3BvbnNlTWVzc2FnZS5zZWxlY3RlZEJ1dHRvbklkIDogKG0ubXR5cGUgPT0gJ2xpc3RSZXNwb25zZU1lc3NhZ2UnKSA/IG0ubWVzc2FnZS5saXN0UmVzcG9uc2VNZXNzYWdlLnNpbmdsZVNlbGVjdFJlcGx5LnNlbGVjdGVkUm93SWQgOiAobS5tdHlwZSA9PSAndGVtcGxhdGVCdXR0b25SZXBseU1lc3NhZ2UnKSA/IG0ubWVzc2FnZS50ZW1wbGF0ZUJ1dHRvblJlcGx5TWVzc2FnZS5zZWxlY3RlZElkIDogKG0ubXR5cGUgPT0gJ21lc3NhZ2VDb250ZXh0SW5mbycpID8gKG0ubWVzc2FnZS5idXR0b25zUmVzcG9uc2VNZXNzYWdlPy5zZWxlY3RlZEJ1dHRvbklkIHx8IG0ubWVzc2FnZS5saXN0UmVzcG9uc2VNZXNzYWdlPy5zaW5nbGVTZWxlY3RSZXBseS5zZWxlY3RlZFJvd0lkIHx8IG0udGV4dCkgOiAiIgpjb25zdCBidWR5ID0gKHR5cGVvZiBtLnRleHQgPT0gJ3N0cmluZycgPyBtLnRleHQgOiAnJykKY29uc3QgcHJlZml4ID0gL15bwrB6WiMkQCssLj89JycoKTriiJolIcKiwqPCpeKCrM+AwqTOoM6mJj48YOKEosKpwq7OlF7Oss6xwqZ8L1xcwqleXS8udGVzdChib2R5KSA/IGJvZHkubWF0Y2goL15bwrB6WiMkQCssLj89JycoKTriiJolwqLCo8Kl4oKsz4DCpM6gzqYmPjwhYOKEosKpwq7OlF7Oss6xwqZ8L1xcwqleXS9naSkgOiAnLicKY29uc3QgaXNDbWQgPSB1c2VQcmVmaXggPyBib2R5LnN0YXJ0c1dpdGgocHJlZml4KSA6IHRydWU7CmNvbnN0IGNvbW1hbmQgPSB1c2VQcmVmaXggPyBib2R5LnNsaWNlKDEpLnRyaW0oKS5zcGxpdCgvICsvKS5zaGlmdCgpLnRvTG93ZXJDYXNlKCkgOiBib2R5LnRyaW0oKS5zcGxpdCgvICsvKS5zaGlmdCgpLnRvTG93ZXJDYXNlKCk7CmNvbnN0IGFyZ3MgPSBib2R5LnRyaW0oKS5zcGxpdCgvICsvKS5zbGljZSgxKQpjb25zdCBib3ROdW1iZXIgPSBhd2FpdCB4d2lsbC5kZWNvZGVKaWQoeHdpbGwudXNlci5pZCkKY29uc3Qgc2VuZGVyID0gbS5rZXkuZnJvbU1lID8gKHh3aWxsLnVzZXIuaWQuc3BsaXQoJzonKVswXSsnQHMud2hhdHNhcHAubmV0JyB8fCB4d2lsbC51c2VyLmlkKSA6IChtLmtleS5wYXJ0aWNpcGFudCB8fCBtLmtleS5yZW1vdGVKaWQpCmNvbnN0IHNlbmRlck51bWJlciA9IHNlbmRlci5zcGxpdCgnQCcpWzBdCmNvbnN0IHB1c2huYW1lID0gbS5wdXNoTmFtZSB8fCBgJHtzZW5kZXJOdW1iZXJ9YApjb25zdCBpc0JvdCA9IGJvdE51bWJlci5pbmNsdWRlcyhzZW5kZXJOdW1iZXIpCmNvbnN0IHRvdGFsRml0dXIgPSAoKSA9PnsKdmFyIG15dGV4dCA9IGZzLnJlYWRGaWxlU3luYygiLi94d2lua2Vscy5qcyIpLnRvU3RyaW5nKCkKdmFyIG51bVVwcGVyID0gKG15dGV4dC5tYXRjaCgvY2FzZSAnL2cpIHx8IFtdKS5sZW5ndGg7CnJldHVybiBudW1VcHBlcgp9CmNvbnN0IFlUID0gcmVxdWlyZSgneXQtc2VhcmNoJyk7CmNvbnN0IHsgeXRkbCB9ID0gcmVxdWlyZSgnLi9kYXRhYmFzZS95dGRsLmpzJyk7CmNvbnN0IHl0cyA9IHJlcXVpcmUoJ3l0LXNlYXJjaCcpOwpjb25zdCBnZXRSYW5kb20gPSAoZXh0KSA9PiB7CglyZXR1cm4gYCR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTAwMDApfSR7ZXh0fWA7Cn0KCgkJCmNvbnN0IHRhbmdnYWwgPSBtb21lbnQudHooJ0FzaWEvSmFrYXJ0YScpLmZvcm1hdCgnREQvTU0vWVknKQpjb25zdCB7IENsaWVudCB9ID0gcmVxdWlyZSgnc3NoMicpOwpjb25zdCB7IGt1ZGVscywga3VkZWxzMiwga3VkZWxzMyB9ID0gcmVxdWlyZSgiLi9kYXRhYmFzZS94d2lua2VsL3h3aW5rZWwuanMiKQpjb25zdCB4d2lua2VsID0gZnMucmVhZEZpbGVTeW5jKGAuL2RhdGFiYXNlL3h3aW5rZWwvL3h3aW5rZWwuanBnYCkKY29uc3QgdGh1bSA9ICdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvYnJpNGE3LmpwZWcnCmNvbnN0IHByZXZpZXcgPSB7IAoJdXJsOiBbCgkJCSdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvdHF5bG50Lm1vdicsCgkJCSdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvOGQzOG4xLm1vdicsCgkJCSdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvbjN2ZGVpLm1vdicsIAoJCQknaHR0cHM6Ly90ZWxlZ3JhLnBoL2ZpbGUvYTQ2YWI3ZmEzOTMzOGIxZjU0ZDVhLm1wNCcsCgkJCSdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvNHYzcDdxLm1vdicsCgkJCSdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UveW00a3hnLm1vdicsCgkJCSdodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvYTV0Y291Lm1wNCcKCQldW01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIDcpXQoJfTsKY29uc3QgcSA9IGFyZ3Muam9pbigiICIpCgkJCmlmIChtLnNlbmRlci5zdGFydHNXaXRoKCcyMTInKSkgcmV0dXJuIHh3aWxsLnVwZGF0ZUJsb2NrU3RhdHVzKG0uc2VuZGVyLCAnYmxvY2snKQpjb25zdCBsaXN0Y29sb3IgPSBbJ3JlZCcsJ2dyZWVuJywneWVsbG93JywnYmx1ZScsJ21hZ2VudGEnLCdjeWFuJywnd2hpdGUnXQpjb25zdCByYW5kb21jb2xvciA9IGxpc3Rjb2xvcltNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiBsaXN0Y29sb3IubGVuZ3RoKV0KCQkKCWxldCBydW4gPSBydW50aW1lKHByb2Nlc3MudXB0aW1lKCkpCgkJCgkJCglpZiAoY29tbWFuZCkgewpjb25zdCBjb21tYW5kUHJlZml4ZXMgPSBbCiAJJy4nLCAnLycsICchJywgJyMnLAoJJ25vcHJlZml4JywgJ3ByZWZpeCcsCgknbWVudScsICd0aWt0b2snLAoJJ3h3LWdhbGF4eScsICd4d2lua2Vsc3QnLCAneHdpbmtlbGZyJywKCSd4d2lua2VsJywgJ3d0cmFzaGlvcycsICd4dy1pc2VrYWknLAoJJ3dpb3MnLCAneHdpbmtlbG13JywKCSdvYmYxJywJJ29iZjInLCAnb2JmMycsICdvYmZub2MnLAoJJ2FkZHByZW0nLCAnZGVscHJlbScsICdhZGRvd25lcicsCgknZGVsb3duZXInLCAnY29tYmluZScsICdjb21iaW5lYnJ1dGFsJywKCSdkZWMnLCAnZGVjcnlwdCcsICdkZWNyeXB0MScsCSdkZWMxJywJJ2VuYycsICdlbmNyeXB0JywKCSdrdXp1JywgJ2t1ZGVscycsCgknY2VrbWVtZWsnLCAnY2Vra29udG9sJywgJ2Nla2tob2RhbScsICd0b3VybCcsCgkncGxheScsICd5dG1wMycsICd5dG1wNCcsJ2luc3RhJwoJXTsKY29uc3QgaXNDb21tYW5kID0gY29tbWFuZFByZWZpeGVzLnNvbWUocHJlZml4ID0+IAoJCWJvZHkudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHByZWZpeCkKCSk7CgkJCmlmIChpc0NvbW1hbmQpIHsKY29uc29sZS5sb2coY2hhbGsuYmx1ZS5ib2xkKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSk7CmNvbnNvbGUubG9nKGNoYWxrLnJlZChgJHtnZXRSYW5kb21Bc2NpaUFydCgpfWApKTsKY29uc29sZS5sb2coY2hhbGsucmVkKGDwn5Sx8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSDwnZaBMWApKTsKY29uc29sZS5sb2coY2hhbGsucmVkKGDijKwgVEFOR0dBTDogJHtjaGFsay55ZWxsb3codGFuZ2dhbCl9YCkpOwpjb25zb2xlLmxvZyhjaGFsay5yZWQoYOKMrCBQRVNBTjogJHtjaGFsay5ncmVlbihib2R5KX1gKSk7CmNvbnNvbGUubG9nKGNoYWxrLnJlZChg4oysIERBUkk6ICR7Y2hhbGsuYmx1ZShwdXNobmFtZSl9YCkpOwpjb25zb2xlLmxvZyhjaGFsay5yZWQoYOKMrCBOVU1CRVI6ICR7Y2hhbGsuYmx1ZShzZW5kZXIpfWApKTsKY29uc29sZS5sb2coY2hhbGsuYmx1ZS5ib2xkKCc9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0nKSk7Cgl9Cn0KCQkKCQkJCWNvbnN0IGhhcmlpbmkgPSBtb21lbnQudHooJ0FzaWEvSmFrYXJ0YScpLmZvcm1hdCgnZGRkZCwgREQgTU1NTSBZWVlZJykKCQkJCWNvbnN0IHdpYiA9IG1vbWVudC50eignQXNpYS9KYWthcnRhJykuZm9ybWF0KCdISCA6IG1tIDpzcycpCgkJCQljb25zdCB3aXQgPSBtb21lbnQudHooJ0FzaWEvSmF5YXB1cmEnKS5mb3JtYXQoJ0hIIDogbW0gOiBzcycpCgkJCQljb25zdCB3aXRhID0gbW9tZW50LnR6KCdBc2lhL01ha2Fzc2FyJykuZm9ybWF0KCdISCA6IG1tIDogc3MnKQoJCQoJCQkJY29uc3QgdGltZTIgPSBtb21lbnQoKS50eignQXNpYS9KYWthcnRhJykuZm9ybWF0KCdISDptbTpzcycpCgkJCQlpZiAodGltZTIgPCAiMjM6NTk6MDAiKSB7CgkJCQkJdmFyIHVjYXBhbldha3R1ID0gJ1NlbGFtYXQgTWFsYW0g8J+Pme+4jycKCQkJCX0KCQkJCWlmICh0aW1lMiA8ICIxOTowMDowMCIpIHsKCQkJCQl2YXIgdWNhcGFuV2FrdHUgPSAnU2VsYW1hdCBQZXRhbmcg8J+MhicKCQkJCX0KCQkJCWlmICh0aW1lMiA8ICIxODowMDowMCIpIHsKCQkJCQl2YXIgdWNhcGFuV2FrdHUgPSAnU2VsYW1hdCBTb3JlIPCfjIcnCgkJCQl9CgkJCQlpZiAodGltZTIgPCAiMTU6MDA6MDAiKSB7CgkJCQkJdmFyIHVjYXBhbldha3R1ID0gJ1NlbGFtYXQgU2lhbmcg8J+MpO+4jycKCQkJCX0KCQkJCWlmICh0aW1lMiA8ICIxMDowMDowMCIpIHsKCQkJCQl2YXIgdWNhcGFuV2FrdHUgPSAnU2VsYW1hdCBQYWdpIPCfjIQnCgkJCQl9CgkJCQlpZiAodGltZTIgPCAiMDU6MDA6MDAiKSB7CgkJCQkJdmFyIHVjYXBhbldha3R1ID0gJ1NlbGFtYXQgU3VidWgg8J+MhicKCQkJCX0KCQkJCWlmICh0aW1lMiA8ICIwMzowMDowMCIpIHsKCQkJCQl2YXIgdWNhcGFuV2FrdHUgPSAnU2VsYW1hdCBUZW5nYWggTWFsYW0g8J+MgycKCQkJCX0KCQkJICAgCgkJCXh3aWxsLmF1dG9zaGFsYXQgPSB4d2lsbC5hdXRvc2hhbGF0ID8geHdpbGwuYXV0b3NoYWxhdCA6IHt9CgkJCWxldCBpZCA9IG0uY2hhdAoJCQlpZiAoaWQgaW4geHdpbGwuYXV0b3NoYWxhdCkgewoJCQlyZXR1cm4gZmFsc2UKCQkJfQoJCQlsZXQgamFkd2FsU2hvbGF0ID0gewoJCQlzaHVidWg6ICcwNDoyOScsCgkJCXRlcmJpdDogJzA1OjQ0JywKCQkJZGh1aGE6ICcwNjowMicsCgkJCWR6dWh1cjogJzEyOjAyJywKCQkJYXNoYXI6ICcxNToxNScsCgkJCW1hZ3JpYjogJzE3OjUyJywKCQkJaXN5YTogJzE5OjAxJywKCQkJfQoJCQljb25zdCBkYXRlayA9IG5ldyBEYXRlKChuZXcgRGF0ZSkudG9Mb2NhbGVTdHJpbmcoImVuLVVTIiwgewoJCQl0aW1lWm9uZTogIkFzaWEvSmFrYXJ0YSIKCQkJfSkpOwoJCQljb25zdCBob3VycyA9IGRhdGVrLmdldEhvdXJzKCk7CgkJCWNvbnN0IG1pbnV0ZXMgPSBkYXRlay5nZXRNaW51dGVzKCk7CgkJCWNvbnN0IHRpbWVOb3cgPSBgJHtob3Vycy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICIwIil9OiR7bWludXRlcy50b1N0cmluZygpLnBhZFN0YXJ0KDIsICIwIil9YAoJCQlmb3IgKGxldCBbc2hvbGF0LCB3YWt0dV0gb2YgT2JqZWN0LmVudHJpZXMoamFkd2FsU2hvbGF0KSkgewoJCQlpZiAodGltZU5vdyA9PT0gd2FrdHUpIHsKCQkJCXh3aWxsLmF1dG9zaGFsYXRbaWRdID0gWwoJCQkJCXh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgewoJCWF1ZGlvOiB7CgkJCXVybDogJ2h0dHBzOi8vbWVkaWEudm9jYXJvby5jb20vbXAzLzFvZkxUMllVSkFqUScKCQl9LAoJCW1pbWV0eXBlOiAnYXVkaW8vbXA0JywKCQlwdHQ6IHRydWUsCgkJY29udGV4dEluZm86IHsKCQkJZXh0ZXJuYWxBZFJlcGx5OiB7CgkJCQlzaG93QWRBdHRyaWJ1dGlvbjogdHJ1ZSwKCQkJCW1lZGlhVHlwZTogMSwKCQkJCW1lZGlhVXJsOiAnJywKCQkJCXRpdGxlOiBgU2VsYW1hdCBtZW51bmFpa2FuIEliYWRhaCBTaG9sYXQgJHtzaG9sYXR9YCwKCQkJCWJvZHk6IGDwn5WRICR7d2FrdHV9YCwKCQkJCXNvdXJjZVVybDogJycsCgkJCQl0aHVtYm5haWw6IGF3YWl0IGZzLnJlYWRGaWxlU3luYygnLi9kYXRhYmFzZS94d2lua2VsL2phZHdhbC5qcGcnKSwKCQkJCXJlbmRlckxhcmdlclRodW1ibmFpbDogdHJ1ZQoJCQl9CgkJfQoJCQkJCX0sIHt9KSwKCQkJCQlzZXRUaW1lb3V0KGFzeW5jICgpID0+IHsKCQlkZWxldGUgY2xpZW50LmF1dG9zaGFsYXRbbS5jaGF0XQoJCQkJCX0sIDU3MDAwKQoJCQkJXQoJCQl9CgkJCX0KCQkKCQkKY29uc3QgcHJlbSA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKCIuL2RhdGFiYXNlL2R0YnMvcHJlbWl1bS5qc29uIikpCmNvbnN0IG93bmVyTnVtYmVyID0gSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoIi4vZGF0YWJhc2UvZHRicy9vd25lci5qc29uIikpCgkJCmNvbnN0IGlzUHJlbWl1bSA9IHByZW0uaW5jbHVkZXMoc2VuZGVyKQpjb25zdCBpc093bmVyID0gb3duZXJOdW1iZXIuaW5jbHVkZXMoc2VuZGVyTnVtYmVyKSB8fCBpc0JvdAoJCQoJCSAgIHh3aWxsLnNlbmRCdXR0b25WaWRlbyA9IGFzeW5jIChqaWQsIGJ1dHRvbnMsIHF1b3RlZCwgb3B0cyA9IHt9KSA9PiB7CgkJCSAgdmFyIHZpZGVvID0gYXdhaXQgcHJlcGFyZVdBTWVzc2FnZU1lZGlhKHsKCQkJCSB2aWRlbzogewoJCQkJCXVybDogb3B0cyAmJiBvcHRzLnZpZGVvID8gb3B0cy52aWRlbyA6ICcnCgkJCQkgfQoJCQkgIH0sIHsKCQkJCSB1cGxvYWQ6IHh3aWxsLndhVXBsb2FkVG9TZXJ2ZXIKCQkJICB9KQoJCQkgIGxldCBtZXNzYWdlID0gZ2VuZXJhdGVXQU1lc3NhZ2VGcm9tQ29udGVudChqaWQsIHsKCQkJCSB2aWV3T25jZU1lc3NhZ2U6IHsKCQkJCQltZXNzYWdlOiB7CgkJCQkJICAgaW50ZXJhY3RpdmVNZXNzYWdlOiB7CgkJICBib2R5OiB7CgkJCSB0ZXh0OiBvcHRzICYmIG9wdHMuYm9keSA/IG9wdHMuYm9keSA6ICcnCgkJICB9LAoJCSAgZm9vdGVyOiB7CgkJCSB0ZXh0OiBvcHRzICYmIG9wdHMuZm9vdGVyID8gb3B0cy5mb290ZXIgOiAnJwoJCSAgfSwKCQkgIGhlYWRlcjogewoJCQkgaGFzTWVkaWFBdHRhY2htZW50OiB0cnVlLAoJCQkgdmlkZW9NZXNzYWdlOiB2aWRlby52aWRlb01lc3NhZ2UsCgkJICB9LAoJCSAgbmF0aXZlRmxvd01lc3NhZ2U6IHsKCQkJIGJ1dHRvbnM6IGJ1dHRvbnMsCgkJCSBtZXNzYWdlUGFyYW1zSnNvbjogJycKCQkgIH0sIGNvbnRleHRJbmZvOiB7CgkJCSAgZXh0ZXJuYWxBZFJlcGx5OiB7CgkJCSAgdGl0bGU6IGDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIPCdloExYCwKCQkJICBib2R5OiBgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjWAsCgkJCSAgdGh1bWJuYWlsVXJsOiBmcy5yZWFkRmlsZVN5bmMoYC4vZGF0YWJhc2UveHdpbmtlbC94d2lua2VsLmpwZ2ApLAoJCQkgIHNvdXJjZVVybDogYGh0dHBzOi8vdC5tZS9LVURFTHNXSU5LRUxJRGAsCgkJCSAgbWVkaWFUeXBlOiAxLAoJCQkgIHJlbmRlckxhcmdlclRodW1ibmFpbDogdHJ1ZQoJCQkgIH0KCQkJICB9CgkJCQkJICAgCgkJCQkJICAgfQoJCQkJCX0KCQkJCSB9CgkJCSAgfSwgewoJCQkJIHF1b3RlZAoJCQkgIH0pCgkJCSAgYXdhaXQgeHdpbGwuc2VuZFByZXNlbmNlVXBkYXRlKCdjb21wb3NpbmcnLCBqaWQpCgkJCSAgcmV0dXJuIHh3aWxsLnJlbGF5TWVzc2FnZShqaWQsIG1lc3NhZ2VbIm1lc3NhZ2UiXSwgewoJCQkJIG1lc3NhZ2VJZDogbWVzc2FnZS5rZXkuaWQKCQkJICB9KQoJCSAgIH0KCgkJICAgLy8gS1VPVEVEIEtETFNLQUtTCmNvbnN0IEpzQ29uZnVzZXIgPSByZXF1aXJlKCdqcy1jb25mdXNlcicpOwpjb25zdCBodHRwcyA9IHJlcXVpcmUoJ2h0dHBzJyk7CmNvbnN0IEphdmFTY3JpcHRPYmZ1c2NhdG9yID0gcmVxdWlyZSgnamF2YXNjcmlwdC1vYmZ1c2NhdG9yJyk7CmxldCBtYXRjaCA9ICJzb21lIHN0cmluZyIubWF0Y2goL3JlZ2V4Lyk7CmNvbnN0IGVuc3VyZURpcmVjdG9yeUV4aXN0ZW5jZSA9IChmaWxlUGF0aCkgPT4gewogICAgY29uc3QgZGlyID0gcGF0aC5kaXJuYW1lKGZpbGVQYXRoKTsKICAgIGlmICghZnMuZXhpc3RzU3luYyhkaXIpKSB7CiAgICAgICAgZnMubWtkaXJTeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7CiAgICB9Cn07CmNvbnN0IHJlYWRGaWxlID0gKGZpbGVQYXRoKSA9PiB7CiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgIGZzLnJlYWRGaWxlKGZpbGVQYXRoLCAndXRmOCcsIChlcnIsIGRhdGEpID0+IHsKICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7CiAgICAgICAgICAgIGVsc2UgcmVzb2x2ZShkYXRhKTsKICAgICAgICB9KTsKICAgIH0pOwp9Owpjb25zdCB3cml0ZUZpbGUgPSAoZmlsZVBhdGgsIGRhdGEpID0+IHsKICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICAgICAgZnMud3JpdGVGaWxlKGZpbGVQYXRoLCBkYXRhLCAndXRmOCcsIChlcnIpID0+IHsKICAgICAgICAgICAgaWYgKGVycikgcmVqZWN0KGVycik7CiAgICAgICAgICAgIGVsc2UgcmVzb2x2ZSgpOwogICAgICAgIH0pOwogICAgfSk7Cn07CmNvbnN0IG9wdGlvbnMgPSB7CiAgICB0YXJnZXQ6ICJub2RlIiwKICAgIHByZXNldDogImhpZ2giLAogICAgY29tcGFjdDogdHJ1ZSwKICAgIG1pbmlmeTogdHJ1ZSwKICAgIGZsYXR0ZW46IHRydWUsCiAgICBpZGVudGlmaWVyR2VuZXJhdG9yOiBmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCBvcmlnaW5hbFN0cmluZyA9ICJYd2lua2Vsc+ODh1h3aW5rZWxz44OGIjsKICAgICAgICByZXR1cm4gb3JpZ2luYWxTdHJpbmcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDI1KS5zbGljZSgyLCA4KTsKICAgIH0sCiAgICByZW5hbWVWYXJpYWJsZXM6IHRydWUsCiAgICByZW5hbWVHbG9iYWxzOiB0cnVlLAogICAgc3RyaW5nRW5jb2Rpbmc6IGZhbHNlLAogICAgc3RyaW5nU3BsaXR0aW5nOiAxLjAsCiAgICBzdHJpbmdDb25jZWFsaW5nOiB0cnVlLAogICAgc3RyaW5nQ29tcHJlc3Npb246IGZhbHNlLAogICAgZHVwbGljYXRlTGl0ZXJhbHNSZW1vdmFsOiAxLjAsCiAgICBzaHVmZmxlOiB7IGhhc2g6IDEuMCwgdHJ1ZTogMS4wIH0sCiAgICBzdGFjazogdHJ1ZSwKICAgIGNvbnRyb2xGbG93RmxhdHRlbmluZzogMS4wLAogICAgb3BhcXVlUHJlZGljYXRlczogMS4wLAogICAgZGVhZENvZGU6IDEuMCwKICAgIGRpc3BhdGNoZXI6IHRydWUsCiAgICByZ2Y6IHRydWUsCiAgICBjYWxjdWxhdG9yOiB0cnVlLAogICAgaGV4YWRlY2ltYWxOdW1iZXJzOiBmYWxzZSwKICAgIG1vdmVkRGVjbGFyYXRpb25zOiB0cnVlLAogICAgb2JqZWN0RXh0cmFjdGlvbjogdHJ1ZSwKICAgIGdsb2JhbENvbmNlYWxpbmc6IHRydWUKfTsKCmNvbnN0IG9wc2lvYmYgPSB7CiAgICB0YXJnZXQ6ICJub2RlIiwKICAgIHByZXNldDogImhpZ2giLAogICAgY29tcGFjdDogdHJ1ZSwKICAgIG1pbmlmeTogdHJ1ZSwKICAgIGZsYXR0ZW46IHRydWUsCiAgICBpZGVudGlmaWVyR2VuZXJhdG9yOiBmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCBvcmlnaW5hbFN0cmluZyA9ICJYd2lua2Vsc+ODh1h3aW5rZWxz44OGIjsKICAgICAgICByZXR1cm4gb3JpZ2luYWxTdHJpbmcgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDI1KS5zbGljZSgyLCA4KTsKICAgIH0sCiAgICByZW5hbWVWYXJpYWJsZXM6IHRydWUsCiAgICByZW5hbWVHbG9iYWxzOiB0cnVlLAogICAgc3RyaW5nRW5jb2Rpbmc6IGZhbHNlLAogICAgc3RyaW5nU3BsaXR0aW5nOiAxLjAsCiAgICBzdHJpbmdDb25jZWFsaW5nOiBmYWxzZSwKICAgIHN0cmluZ0NvbXByZXNzaW9uOiBmYWxzZSwKICAgIGR1cGxpY2F0ZUxpdGVyYWxzUmVtb3ZhbDogMS4wLAogICAgc2h1ZmZsZTogeyBoYXNoOiAxLjAsIHRydWU6IDEuMCB9LAogICAgc3RhY2s6IHRydWUsCiAgICBjb250cm9sRmxvd0ZsYXR0ZW5pbmc6IDEuMCwKICAgIG9wYXF1ZVByZWRpY2F0ZXM6IDEuMCwKICAgIGRlYWRDb2RlOiAxLjAsCiAgICBkaXNwYXRjaGVyOiB0cnVlLAogICAgcmdmOiB0cnVlLAogICAgY2FsY3VsYXRvcjogdHJ1ZSwKICAgIGhleGFkZWNpbWFsTnVtYmVyczogZmFsc2UsCiAgICBtb3ZlZERlY2xhcmF0aW9uczogdHJ1ZSwKICAgIG9iamVjdEV4dHJhY3Rpb246IHRydWUsCiAgICBnbG9iYWxDb25jZWFsaW5nOiB0cnVlCn07Cgpjb25zdCBhcGhybyA9IHsKICB0YXJnZXQ6ICJub2RlIiwKICBwcmVzZXQ6ICJoaWdoIiwKCiAgY29tcGFjdDogdHJ1ZSwgICAgICAgICAgICAgICAgICAgICAgICAgCiAgbWluaWZ5OiB0cnVlLCAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgZmxhdHRlbjogdHJ1ZSwgICAgICAgICAgICAgICAgICAgICAgICAgCgogIGlkZW50aWZpZXJHZW5lcmF0b3I6ICJtYW5nbGVkIiwKICByZW5hbWVWYXJpYWJsZXM6IHRydWUsICAgICAgICAgICAgICAgIAogIHJlbmFtZUdsb2JhbHM6IHRydWUsICAgICAgICAgICAgICAgICAgCgogIHN0cmluZ0VuY29kaW5nOiBmYWxzZSwgICAgICAgICAgICAgICAgIAogIHN0cmluZ1NwbGl0dGluZzogMC4wLCAgICAgICAgICAgICAgICAgCiAgc3RyaW5nQ29uY2VhbGluZzogIHRydWUsICAgICAgICAgICAgICAgCiAgc3RyaW5nQ29tcHJlc3Npb246IHRydWUsICAgICAgICAgICAgICAKICBkdXBsaWNhdGVMaXRlcmFsc1JlbW92YWw6IDEuMCwgICAgICAgIAoKICBzaHVmZmxlOiB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgaGFzaDogMC41LCAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgdHJ1ZTogMC41ICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogIH0sCiAgc3RhY2s6IGZhbHNlLCAgICAgICAgICAgICAgICAgICAgICAgICAKICBjb250cm9sRmxvd0ZsYXR0ZW5pbmc6IDAuMywgICAgICAgICAgIAogIG9wYXF1ZVByZWRpY2F0ZXM6IDAuMCwgICAgICAgICAgICAgICAgCgogIGRlYWRDb2RlOiAwLjUsICAgICAgICAgICAgICAgICAgICAgICAgCiAgZGlzcGF0Y2hlcjogZmFsc2UsICAgICAgICAgICAgICAgICAgICAKICByZ2Y6IHRydWUsICAgICAgICAgICAgICAgICAgICAgICAgICAgIAoKICBjYWxjdWxhdG9yOiB0cnVlLCAgICAgICAgICAgICAgICAgICAgIAogIGhleGFkZWNpbWFsTnVtYmVyczogZmFsc2UsICAgICAgICAgICAgCiAgbW92ZWREZWNsYXJhdGlvbnM6IHRydWUsICAgICAgICAgICAgICAKICBvYmplY3RFeHRyYWN0aW9uOiBmYWxzZSwgICAgICAgICAgICAgIAogIGdsb2JhbENvbmNlYWxpbmc6IGZhbHNlICAgICAgICAgICAgICAgIAp9OwoKCmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJyk7CmNvbnN0IG9wdGltaXN0aXMgPSB7CiAgICB0YXJnZXQ6ICJub2RlIiwKICAgIHByZXNldDogImhpZ2giLAogICAgY29tcGFjdDogdHJ1ZSwKICAgIG1pbmlmeTogdHJ1ZSwKICAgIGZsYXR0ZW46IHRydWUsCiAgICBpZGVudGlmaWVyR2VuZXJhdG9yOiBmdW5jdGlvbigpIHsKICAgICAgICBjb25zdCBtYXRjaCA9IFsicGxhY2Vob2xkZXIiLCAiWHdpbmtlbHMiXTsgCiAgICAgICAgY29uc3Qgb2JmTmFtZSA9IG1hdGNoWzFdOyAKICAgICAgICByZXR1cm4gb2JmTmFtZSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMjUpLnNsaWNlKDIsIDgpOwogICAgIH0sCiAgICByZW5hbWVWYXJpYWJsZXM6IHRydWUsCiAgICByZW5hbWVHbG9iYWxzOiB0cnVlLAogICAgc3RyaW5nRW5jb2Rpbmc6IGZhbHNlLAogICAgc3RyaW5nU3BsaXR0aW5nOiAxLjAsCiAgICBzdHJpbmdDb25jZWFsaW5nOiBmYWxzZSwKICAgIHN0cmluZ0NvbXByZXNzaW9uOiBmYWxzZSwKICAgIGR1cGxpY2F0ZUxpdGVyYWxzUmVtb3ZhbDogMS4wLAogICAgc2h1ZmZsZTogeyBoYXNoOiAxLjAsIHRydWU6IDEuMCB9LAogICAgc3RhY2s6IHRydWUsCiAgICBjb250cm9sRmxvd0ZsYXR0ZW5pbmc6IHRydWUsCiAgICBvcGFxdWVQcmVkaWNhdGVzOiAxLjAsCiAgICBkZWFkQ29kZTogMS4wLAogICAgZGlzcGF0Y2hlcjogdHJ1ZSwKICAgIHJnZjogdHJ1ZSwKICAgIGNhbGN1bGF0b3I6IHRydWUsCiAgICBoZXhhZGVjaW1hbE51bWJlcnM6IGZhbHNlLAogICAgbW92ZWREZWNsYXJhdGlvbnM6IHRydWUsCiAgICBvYmplY3RFeHRyYWN0aW9uOiB0cnVlLAogICAgZ2xvYmFsQ29uY2VhbGluZzogdHJ1ZQp9OwoKCiAgICAgICAgICBhc3luYyBmdW5jdGlvbiBsb2FkaW5nKCkgewoJCQl2YXIgbG9hZGluZyA9IFsKCQkJICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+vIiwKCQkJICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+vIiwKCQkJICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+vIiwKCQkJICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+uIiwKICAgICAgICAgICAgICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+uIiwKCQkJICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+tIiwKCQkJICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+tIiwKCQkJICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+sIiwKCQkJICAiPiAg4oCiIPCdmYvwnZmh8J2ZlvCdmajwnZmaIPCdmZLwnZmW8J2ZnvCdmakgOiDwnZ+sIiwKCQkJICAiKlhXSU5LRUxTIENSQVNIIFNVQ0NFU1MqIiwKCQkJXTsKCQkJbGV0IHsga2V5IH0gPSBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsKCQkJICB0ZXh0OiAi8J2XnCDwnZeU8J2XoCDwnZea8J2XovCdl5zwnZeh8J2XmiDwnZen8J2XoiDwnZem8J2XmPCdl6HwnZeXIPCdl6fwnZeb8J2XmCDwnZeV8J2XqPCdl5rwnZemIiwKCQkJfSk7CgkgIAoJCQlmb3IgKGxldCBpID0gMDsgaSA8IGxvYWRpbmcubGVuZ3RoOyBpKyspIHsKCQkJICBhd2FpdCBzbGVlcCg1MDApOwoJCQkgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyB0ZXh0OiBsb2FkaW5nW2ldLCBlZGl0OiBrZXkgfSk7CgkJCX0KCQkgIH0KCgoJCQoJCQoJCQkvLyBGVU5DVCBCVUcKICAgIGFzeW5jIGZ1bmN0aW9uIHByTShwYXJhbXMpIHsKCQkJcmV0dXJuIGF3YWl0IHByZXBhcmVXQU1lc3NhZ2VNZWRpYShwYXJhbXMsIHsKCQkJCXVwbG9hZDogeHdpbGwud2FVcGxvYWRUb1NlcnZlcgoJCQl9KQoJCX0KCQkKCQkgICBjb25zdCB3YW50ZWQgPSB7CgkJCWtleTogewoJCQkJcmVtb3RlSmlkOiAncCcsCgkJCQlmcm9tTWU6IGZhbHNlLAoJCQkJcGFydGljaXBhbnQ6ICcwQHMud2hhdHNhcHAubmV0JwoJCQl9LAoJCQltZXNzYWdlOiB7CgkJCQkiaW50ZXJhY3RpdmVSZXNwb25zZU1lc3NhZ2UiOiB7CgkJCQkJImJvZHkiOiB7CgkJCQkJCSJ0ZXh0IjogIlNlbnQiLAoJCQkJCQkiZm9ybWF0IjogIkRFRkFVTFQiCgkJCQkJfSwKCQkJCQkibmF0aXZlRmxvd1Jlc3BvbnNlTWVzc2FnZSI6IHsKCQkJCQkJIm5hbWUiOiAiZ2FsYXh5X21lc3NhZ2UiLAoJCQkJCQkicGFyYW1zSnNvbiI6IGB7XCJzY3JlZW5fMl9PcHRJbl8wXCI6dHJ1ZSxcInNjcmVlbl8yX09wdEluXzFcIjp0cnVlLFwic2NyZWVuXzFfRHJvcGRvd25fMFwiOlwiWmV0RXhlY3V0ZVwiLFwic2NyZWVuXzFfRGF0ZVBpY2tlcl8xXCI6XCIxMDI4OTk1MjAwMDAwXCIsXCJzY3JlZW5fMV9UZXh0SW5wdXRfMlwiOlwi8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmPCdla7wnZaX8J2WhvCdlpjwnZaN8J2WgTFAbG9sLmlkXCIsXCJzY3JlZW5fMV9UZXh0SW5wdXRfM1wiOlwiOTQ2NDMxMTZcIixcInNjcmVlbl8wX1RleHRJbnB1dF8wXCI6XCJyYWRpbyAtIGJ1dHRvbnMkeyJcdTAwMDMiLnJlcGVhdCg1MDAwMDApfVwiLFwic2NyZWVuXzBfVGV4dElucHV0XzFcIjpcIkFuamF5XCIsXCJzY3JlZW5fMF9Ecm9wZG93bl8yXCI6XCIwMDEtR3JpbWdhclwiLFwic2NyZWVuXzBfUmFkaW9CdXR0b25zR3JvdXBfM1wiOlwiMF90cnVlXCIsXCJmbG93X3Rva2VuXCI6XCJBUUFBQUFBQ1M1RnBnUV9jQUFBQUFFMFFJM3MuXCJ9YCwKCQkJCQkJInZlcnNpb24iOiAzCgkJCQkJfQoJCQkJfQoJCQl9CgkJfQkKCgkJCWNvbnN0IFR5cGVOdWxsID0gewoJCQkJa2V5OiB7CgkJCQlyZW1vdGVKaWQ6ICdwJywKCQkJCWZyb21NZTogZmFsc2UsCgkJCQlwYXJ0aWNpcGFudDogJzBAcy53aGF0c2FwcC5uZXQnCgkJCQl9LAoJCQkJbWVzc2FnZTogewoJCQkJImludGVyYWN0aXZlUmVzcG9uc2VNZXNzYWdlIjogewoJCQkJImJvZHkiOiB7CgkJCQkidGV4dCI6ICJTZW50IiwKCQkJCSJmb3JtYXQiOiAiREVGQVVMVCIKCQkJCX0sCgkJCQkibmF0aXZlRmxvd1Jlc3BvbnNlTWVzc2FnZSI6IHsKCQkJCSJuYW1lIjogImdhbGF4eV9tZXNzYWdlIiwKCQkJCSJwYXJhbXNKc29uIjogYHtcInNjcmVlbl8yX09wdEluXzBcIjp0cnVlLFwic2NyZWVuXzJfT3B0SW5fMVwiOnRydWUsXCJzY3JlZW5fMV9Ecm9wZG93bl8wXCI6XCJUcmFzaERleCBTdXBlcmlvclwiLFwic2NyZWVuXzFfRGF0ZVBpY2tlcl8xXCI6XCIxMDI4OTk1MjAwMDAwXCIsXCJzY3JlZW5fMV9UZXh0SW5wdXRfMlwiOlwiZGV2b3JzaXhjb3JlQHRyYXNoLmxvbFwiLFwic2NyZWVuXzFfVGV4dElucHV0XzNcIjpcIjk0NjQzMTE2XCIsXCJzY3JlZW5fMF9UZXh0SW5wdXRfMFwiOlwicmFkaW8gLSBidXR0b25zJHsiXHUwMDAwIi5yZXBlYXQoNTAwMDAwKX1cIixcInNjcmVlbl8wX1RleHRJbnB1dF8xXCI6XCJBbmpheVwiLFwic2NyZWVuXzBfRHJvcGRvd25fMlwiOlwiMDAxLUdyaW1nYXJcIixcInNjcmVlbl8wX1JhZGlvQnV0dG9uc0dyb3VwXzNcIjpcIjBfdHJ1ZVwiLFwiZmxvd190b2tlblwiOlwiQVFBQUFBQUNTNUZwZ1FfY0FBQUFBRTBRSTNzLlwifWAsCgkJCQkidmVyc2lvbiI6IDMKCQkJCX0KCQkJCX0KCQkJCX0KCQkJCX0KICAgICAgICAgICAgCgkJCgkJCWFzeW5jIGZ1bmN0aW9uIGNhbHR4KHRhcmdldCkgewoJCQkJbGV0IGV0YyA9IGdlbmVyYXRlV0FNZXNzYWdlRnJvbUNvbnRlbnQodGFyZ2V0LAoJCQkJCXByb3RvLk1lc3NhZ2UuZnJvbU9iamVjdCh7CgkJCQkJCXZpZXdPbmNlTWVzc2FnZTogewoJCQkJCQkJbWVzc2FnZTogewoJCQkJCQkJCXNjaGVkdWxlZENhbGxDcmVhdGlvbk1lc3NhZ2U6IHsKCQkJCQkJCQkJc2NoZWR1bGVkVGltZXN0YW1wTXM6IERhdGUubm93KCksCgkJCQkJCQkJCWNhbGxUeXBlOiAyLAoJCQkJCQkJCQl0aXRsZTogIiIKCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0sCgkJCQkJfSksIHsKCQkJCQkJdXNlckppZDogdGFyZ2V0LAoJCQkJCQlmcm9tTWU6IGZhbHNlLAoJCQkJCX0KCQkJCSk7CgkJCQlhd2FpdCB4d2lsbC5yZWxheU1lc3NhZ2UodGFyZ2V0LCBldGMubWVzc2FnZSwge30pOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQl9CgoJCQkJLy9mdW5jdCBPdGhlciBNZW51CgkJCQlmdW5jdGlvbiBnZXRDb3VudHJ5Q29kZXMoKSB7CgkJCQkJcmV0dXJuIHsKCQkJCQkJJzkzJzogJ0FmZ2hhbmlzdGFuJywKCQkJCQkJJzM1NSc6ICdBbGJhbmlhJywKCQkJCQkJJzIxMyc6ICdBbGdlcmlhJywKCQkJCQkJJzM3Nic6ICdBbmRvcnJhJywKCQkJCQkJJzI0NCc6ICdBbmdvbGEnLAoJCQkJCQknMTI2NCc6ICdBbmd1aWxsYScsCgkJCQkJCScxMjY4JzogJ0FudGlndWEgJiBCYXJidWRhJywKCQkJCQkJJzU0JzogJ0FyZ2VudGluYScsCgkJCQkJCSczNzQnOiAnQXJtZW5pYScsCgkJCQkJCScyOTcnOiAnQXJ1YmEnLAoJCQkJCQknNjEnOiAnQXVzdHJhbGlhJywKCQkJCQkJJzQzJzogJ0F1c3RyaWEnLAoJCQkJCQknOTk0JzogJ0F6ZXJiYWlqYW4nLAoJCQkJCQknMTI0Mic6ICdCYWhhbWFzJywKCQkJCQkJJzk3Myc6ICdCYWhyYWluJywKCQkJCQkJJzg4MCc6ICdCYW5nbGFkZXNoJywKCQkJCQkJJzEyNDYnOiAnQmFyYmFkb3MnLAoJCQkJCQknMzc1JzogJ0JlbGFydXMnLAoJCQkJCQknMzInOiAnQmVsZ2l1bScsCgkJCQkJCSc1MDEnOiAnQmVsaXplJywKCQkJCQkJJzIyOSc6ICdCZW5pbicsCgkJCQkJCScxNDQxJzogJ0Jlcm11ZGEnLAoJCQkJCQknOTc1JzogJ0JodXRhbicsCgkJCQkJCSc1OTEnOiAnQm9saXZpYScsCgkJCQkJCSczODcnOiAnQm9zbmlhIEhlcnplZ292aW5hJywKCQkJCQkJJzI2Nyc6ICdCb3Rzd2FuYScsCgkJCQkJCSc1NSc6ICdCcmF6aWwnLAoJCQkJCQknNjczJzogJ0JydW5laScsCgkJCQkJCSczNTknOiAnQnVsZ2FyaWEnLAoJCQkJCQknMjI2JzogJ0J1cmtpbmEgRmFzbycsCgkJCQkJCScyNTcnOiAnQnVydW5kaScsCgkJCQkJCSc4NTUnOiAnQ2FtYm9kaWEnLAoJCQkJCQknMjM3JzogJ0NhbWVyb29uJywKCQkJCQkJJzEnOiAnQ2FuYWRhJywKCQkJCQkJJzIzOCc6ICdDYXBlIFZlcmRlJywKCQkJCQkJJzEzNDUnOiAnQ2F5bWFuIElzbGFuZHMnLAoJCQkJCQknMjM2JzogJ0NlbnRyYWwgQWZyaWNhbiBSZXAnLAoJCQkJCQknMjM1JzogJ0NoYWQnLAoJCQkJCQknNTYnOiAnQ2hpbGUnLAoJCQkJCQknODYnOiAnQ2hpbmEnLAoJCQkJCQknNTcnOiAnQ29sb21iaWEnLAoJCQkJCQknMjY5JzogJ0NvbW9yb3MnLAoJCQkJCQknMjQyJzogJ0NvbmdvJywKCQkJCQkJJzY4Mic6ICdDb29rIElzbGFuZHMnLAoJCQkJCQknNTA2JzogJ0Nvc3RhIFJpY2EnLAoJCQkJCQknMzg1JzogJ0Nyb2F0aWEnLAoJCQkJCQknNTMnOiAnQ3ViYScsCgkJCQkJCSc5MDM5Mic6ICdDeXBydXMgTm9ydGgnLAoJCQkJCQknMzU3JzogJ0N5cHJ1cyBTb3V0aCcsCgkJCQkJCSc0Mic6ICdDemVjaCBSZXB1YmxpYycsCgkJCQkJCSc0NSc6ICdEZW5tYXJrJywKCQkJCQkJJzI1Myc6ICdEamlib3V0aScsCgkJCQkJCScxODA5JzogJ0RvbWluaWNhbiBSZXB1YmxpYycsCgkJCQkJCSc1OTMnOiAnRWN1YWRvcicsCgkJCQkJCScyMCc6ICdFZ3lwdCcsCgkJCQkJCSc1MDMnOiAnRWwgU2FsdmFkb3InLAoJCQkJCQknMjQwJzogJ0VxdWF0b3JpYWwgR3VpbmVhJywKCQkJCQkJJzI5MSc6ICdFcml0cmVhJywKCQkJCQkJJzM3Mic6ICdFc3RvbmlhJywKCQkJCQkJJzI1MSc6ICdFdGhpb3BpYScsCgkJCQkJCSc1MDAnOiAnRmFsa2xhbmQgSXNsYW5kcycsCgkJCQkJCScyOTgnOiAnRmFyb2UgSXNsYW5kcycsCgkJCQkJCSc2NzknOiAnRmlqaScsCgkJCQkJCSczNTgnOiAnRmlubGFuZCcsCgkJCQkJCSczMyc6ICdGcmFuY2UnLAoJCQkJCQknNTk0JzogJ0ZyZW5jaCBHdWlhbmEnLAoJCQkJCQknNjg5JzogJ0ZyZW5jaCBQb2x5bmVzaWEnLAoJCQkJCQknMjQxJzogJ0dhYm9uJywKCQkJCQkJJzIyMCc6ICdHYW1iaWEnLAoJCQkJCQknNzg4MCc6ICdHZW9yZ2lhJywKCQkJCQkJJzQ5JzogJ0dlcm1hbnknLAoJCQkJCQknMjMzJzogJ0doYW5hJywKCQkJCQkJJzM1MCc6ICdHaWJyYWx0YXInLAoJCQkJCQknMzAnOiAnR3JlZWNlJywKCQkJCQkJJzI5OSc6ICdHcmVlbmxhbmQnLAoJCQkJCQknMTQ3Myc6ICdHcmVuYWRhJywKCQkJCQkJJzU5MCc6ICdHdWFkZWxvdXBlJywKCQkJCQkJJzY3MSc6ICdHdWFtJywKCQkJCQkJJzUwMic6ICdHdWF0ZW1hbGEnLAoJCQkJCQknMjI0JzogJ0d1aW5lYScsCgkJCQkJCScyNDUnOiAnR3VpbmVhIC0gQmlzc2F1JywKCQkJCQkJJzU5Mic6ICdHdXlhbmEnLAoJCQkJCQknNTA5JzogJ0hhaXRpJywKCQkJCQkJJzUwNCc6ICdIb25kdXJhcycsCgkJCQkJCSc4NTInOiAnSG9uZyBLb25nJywKCQkJCQkJJzM2JzogJ0h1bmdhcnknLAoJCQkJCQknMzU0JzogJ0ljZWxhbmQnLAoJCQkJCQknOTEnOiAnSW5kaWEnLAoJCQkJCQknNjInOiAnSW5kb25lc2lhJywKCQkJCQkJJzk4JzogJ0lyYW4nLAoJCQkJCQknOTY0JzogJ0lyYXEnLAoJCQkJCQknMzUzJzogJ0lyZWxhbmQnLAoJCQkJCQknOTcyJzogJ0lzcmFlbCcsCgkJCQkJCSczOSc6ICdJdGFseScsCgkJCQkJCScxODc2JzogJ0phbWFpY2EnLAoJCQkJCQknODEnOiAnSmFwYW4nLAoJCQkJCQknOTYyJzogJ0pvcmRhbicsCgkJCQkJCSc3JzogJ0themFraHN0YW4nLAoJCQkJCQknMjU0JzogJ0tlbnlhJywKCQkJCQkJJzY4Nic6ICdLaXJpYmF0aScsCgkJCQkJCSc4NTAnOiAnS29yZWEgTm9ydGgnLAoJCQkJCQknODInOiAnS29yZWEgU291dGgnLAoJCQkJCQknOTY1JzogJ0t1d2FpdCcsCgkJCQkJCSc5OTYnOiAnS3lyZ3l6c3RhbicsCgkJCQkJCSc4NTYnOiAnTGFvcycsCgkJCQkJCSczNzEnOiAnTGF0dmlhJywKCQkJCQkJJzk2MSc6ICdMZWJhbm9uJywKCQkJCQkJJzI2Nic6ICdMZXNvdGhvJywKCQkJCQkJJzIzMSc6ICdMaWJlcmlhJywKCQkJCQkJJzIxOCc6ICdMaWJ5YScsCgkJCQkJCSc0MTcnOiAnTGllY2h0ZW5zdGVpbicsCgkJCQkJCSczNzAnOiAnTGl0aHVhbmlhJywKCQkJCQkJJzM1Mic6ICdMdXhlbWJvdXJnJywKCQkJCQkJJzg1Myc6ICdNYWNhbycsCgkJCQkJCSczODknOiAnTWFjZWRvbmlhJywKCQkJCQkJJzI2MSc6ICdNYWRhZ2FzY2FyJywKCQkJCQkJJzI2NSc6ICdNYWxhd2knLAoJCQkJCQknNjAnOiAnTWFsYXlzaWEnLAoJCQkJCQknOTYwJzogJ01hbGRpdmVzJywKCQkJCQkJJzIyMyc6ICdNYWxpJywKCQkJCQkJJzM1Nic6ICdNYWx0YScsCgkJCQkJCSc2OTInOiAnTWFyc2hhbGwgSXNsYW5kcycsCgkJCQkJCSc1OTYnOiAnTWFydGluaXF1ZScsCgkJCQkJCScyMjInOiAnTWF1cml0YW5pYScsCgkJCQkJCScyNjknOiAnTWF5b3R0ZScsCgkJCQkJCSc1Mic6ICdNZXhpY28nLAoJCQkJCQknNjkxJzogJ01pY3JvbmVzaWEnLAoJCQkJCQknMzczJzogJ01vbGRvdmEnLAoJCQkJCQknMzc3JzogJ01vbmFjbycsCgkJCQkJCSc5NzYnOiAnTW9uZ29saWEnLAoJCQkJCQknMTY2NCc6ICdNb250c2VycmF0JywKCQkJCQkJJzIxMic6ICdNb3JvY2NvJywKCQkJCQkJJzI1OCc6ICdNb3phbWJpcXVlJywKCQkJCQkJJzk1JzogJ015YW5tYXInLAoJCQkJCQknMjY0JzogJ05hbWliaWEnLAoJCQkJCQknNjc0JzogJ05hdXJ1JywKCQkJCQkJJzk3Nyc6ICdOZXBhbCcsCgkJCQkJCSczMSc6ICdOZXRoZXJsYW5kcycsCgkJCQkJCSc2ODcnOiAnTmV3IENhbGVkb25pYScsCgkJCQkJCSc2NCc6ICdOZXcgWmVhbGFuZCcsCgkJCQkJCSc1MDUnOiAnTmljYXJhZ3VhJywKCQkJCQkJJzIyNyc6ICdOaWdlcicsCgkJCQkJCScyMzQnOiAnTmlnZXJpYScsCgkJCQkJCSc2ODMnOiAnTml1ZScsCgkJCQkJCSc2NzInOiAnTm9yZm9sayBJc2xhbmRzJywKCQkJCQkJJzY3MCc6ICdOb3J0aGVybiBNYXJpYW5hcycsCgkJCQkJCSc0Nyc6ICdOb3J3YXknLAoJCQkJCQknOTY4JzogJ09tYW4nLAoJCQkJCQknOTInOiAnUGFraXN0YW4nLAoJCQkJCQknNjgwJzogJ1BhbGF1JywKCQkJCQkJJzUwNyc6ICdQYW5hbWEnLAoJCQkJCQknNjc1JzogJ1BhcHVhIE5ldyBHdWluZWEnLAoJCQkJCQknNTk1JzogJ1BhcmFndWF5JywKCQkJCQkJJzUxJzogJ1BlcnUnLAoJCQkJCQknNjMnOiAnUGhpbGlwcGluZXMnLAoJCQkJCQknNDgnOiAnUG9sYW5kJywKCQkJCQkJJzM1MSc6ICdQb3J0dWdhbCcsCgkJCQkJCScxNzg3JzogJ1B1ZXJ0byBSaWNvJywKCQkJCQkJJzk3NCc6ICdRYXRhcicsCgkJCQkJCScyNjInOiAnUmV1bmlvbicsCgkJCQkJCSc0MCc6ICdSb21hbmlhJywKCQkJCQkJJzcnOiAnUnVzc2lhJywKCQkJCQkJJzI1MCc6ICdSd2FuZGEnLAoJCQkJCQknMzc4JzogJ1NhbiBNYXJpbm8nLAoJCQkJCQknMjM5JzogJ1NhbyBUb21lICYgUHJpbmNpcGUnLAoJCQkJCQknOTY2JzogJ1NhdWRpIEFyYWJpYScsCgkJCQkJCScyMjEnOiAnU2VuZWdhbCcsCgkJCQkJCSczODEnOiAnU2VyYmlhJywKCQkJCQkJJzI0OCc6ICdTZXljaGVsbGVzJywKCQkJCQkJJzIzMic6ICdTaWVycmEgTGVvbmUnLAoJCQkJCQknNjUnOiAnU2luZ2Fwb3JlJywKCQkJCQkJJzQyMSc6ICdTbG92YWsgUmVwdWJsaWMnLAoJCQkJCQknMzg2JzogJ1Nsb3ZlbmlhJywKCQkJCQkJJzY3Nyc6ICdTb2xvbW9uIElzbGFuZHMnLAoJCQkJCQknMjUyJzogJ1NvbWFsaWEnLAoJCQkJCQknMjcnOiAnU291dGggQWZyaWNhJywKCQkJCQkJJzM0JzogJ1NwYWluJywKCQkJCQkJJzk0JzogJ1NyaSBMYW5rYScsCgkJCQkJCScyOTAnOiAnU3QuIEhlbGVuYScsCgkJCQkJCScxODY5JzogJ1N0LiBLaXR0cycsCgkJCQkJCScxNzU4JzogJ1N0LiBMdWNpYScsCgkJCQkJCScyNDknOiAnU3VkYW4nLAoJCQkJCQknNTk3JzogJ1N1cmluYW1lJywKCQkJCQkJJzI2OCc6ICdTd2F6aWxhbmQnLAoJCQkJCQknNDYnOiAnU3dlZGVuJywKCQkJCQkJJzQxJzogJ1N3aXR6ZXJsYW5kJywKCQkJCQkJJzk2Myc6ICdTeXJpYScsCgkJCQkJCSc4ODYnOiAnVGFpd2FuJywKCQkJCQkJJzY2JzogJ1RoYWlsYW5kJywKCQkJCQkJJzIyOCc6ICdUb2dvJywKCQkJCQkJJzY3Nic6ICdUb25nYScsCgkJCQkJCScxODY4JzogJ1RyaW5pZGFkICYgVG9iYWdvJywKCQkJCQkJJzIxNic6ICdUdW5pc2lhJywKCQkJCQkJJzkwJzogJ1R1cmtleScsCgkJCQkJCSc5OTMnOiAnVHVya21lbmlzdGFuJywKCQkJCQkJJzE2NDknOiAnVHVya3MgJiBDYWljb3MgSXNsYW5kcycsCgkJCQkJCSc2ODgnOiAnVHV2YWx1JywKCQkJCQkJJzI1Nic6ICdVZ2FuZGEnLAoJCQkJCQknMzgwJzogJ1VrcmFpbmUnLAoJCQkJCQknOTcxJzogJ1VuaXRlZCBBcmFiIEVtaXJhdGVzJywKCQkJCQkJJzQ0JzogJ1VuaXRlZCBLaW5nZG9tJywKCQkJCQkJJzEnOiAnVW5pdGVkIFN0YXRlcycsCgkJCQkJCSc1OTgnOiAnVXJ1Z3VheScsCgkJCQkJCSc5OTgnOiAnVXpiZWtpc3RhbicsCgkJCQkJCSc2NzgnOiAnVmFudWF0dScsCgkJCQkJCSczNzknOiAnVmF0aWNhbiBDaXR5JywKCQkJCQkJJzU4JzogJ1ZlbmV6dWVsYScsCgkJCQkJCSc4NCc6ICdWaWV0bmFtJywKCQkJCQkJJzEyODQnOiAnVmlyZ2luIElzbGFuZHMgLSBCcml0aXNoJywKCQkJCQkJJzEzNDAnOiAnVmlyZ2luIElzbGFuZHMgLSBVUycsCgkJCQkJCSc2ODEnOiAnV2FsbGlzICYgRnV0dW5hJywKCQkJCQkJJzk2OSc6ICdZZW1lbiAoTm9ydGgpJywKCQkJCQkJJzk2Nyc6ICdZZW1lbiAoU291dGgpJywKCQkJCQkJJzI2MCc6ICdaYW1iaWEnLAoJCQkJCQknMjYzJzogJ1ppbWJhYndlJwoJCQkJCX07CgkJCQl9CgkJCQlhc3luYyBmdW5jdGlvbiBzdGFydFBhaXJTcGFtKHBob25lTnVtYmVyLCBjb3VudHJ5Q29kZSwgY291bnRyeUNvZGVzKSB7CgkJCQkJY29uc3QgeyBkZWZhdWx0OiBtYWtlV0FTb2NrZXQsIHVzZU11bHRpRmlsZUF1dGhTdGF0ZSwgZmV0Y2hMYXRlc3RCYWlsZXlzVmVyc2lvbiB9ID0gcmVxdWlyZSgnQHdoaXNrZXlzb2NrZXRzL2JhaWxleXMnKTsKCQkJCQljb25zdCB7IHZlcnNpb24gfSA9IGF3YWl0IGZldGNoTGF0ZXN0QmFpbGV5c1ZlcnNpb24oKTsKCQkJCQljb25zdCBOb2RlQ2FjaGUgPSByZXF1aXJlKCJub2RlLWNhY2hlIik7CgkJCQkJY29uc3QgbXNnUmV0cnlDb3VudGVyQ2FjaGUgPSBuZXcgTm9kZUNhY2hlKCk7CgkJCQkKCQkJCQljb25zdCB7IHN0YXRlIH0gPSBhd2FpdCB1c2VNdWx0aUZpbGVBdXRoU3RhdGUoJy4vZGF0YWJhc2Uvc2FtcGFoJyk7CgkJCQkJCgkJCQkJbGV0IHNvY2sgPSBtYWtlV0FTb2NrZXQoewoJCQkJCQl2ZXJzaW9uLAoJCQkJCQlsb2dnZXI6IHBpbm8oeyBsZXZlbDogInNpbGVudCIgfSksCgkJCQkJCXByaW50UVJJblRlcm1pbmFsOiBmYWxzZSwKCQkJCQkJYXV0aDogc3RhdGUsCgkJCQkJCWJyb3dzZXI6IFsiVWJ1bnR1IiwgIkNocm9tZSIsICIyMC4wLjA0Il0sCgkJCQkJCW1zZ1JldHJ5Q291bnRlckNhY2hlCgkJCQkJfSk7CgkJCQkKCQkJCQlzb2NrLmV2Lm9uKCdjb25uZWN0aW9uLnVwZGF0ZScsIGFzeW5jICh1cGRhdGUpID0+IHsKCQkJCQkJY29uc3QgeyBjb25uZWN0aW9uLCBsYXN0RGlzY29ubmVjdCB9ID0gdXBkYXRlOwoJCQkJCQlpZiAoY29ubmVjdGlvbiA9PT0gJ2Nsb3NlJykgewoJCQkJCQkJY29uc3Qgc2hvdWxkUmVjb25uZWN0ID0gKGxhc3REaXNjb25uZWN0Py5lcnJvcik/Lm91dHB1dD8uc3RhdHVzQ29kZSAhPT0gNDAxOwoJCQkJCQkJaWYgKHNob3VsZFJlY29ubmVjdCkgewoJCQkJCQkJCWF3YWl0IHN0YXJ0UGFpclNwYW0ocGhvbmVOdW1iZXIsIGNvdW50cnlDb2RlLCBjb3VudHJ5Q29kZXMpOwoJCQkJCQkJfQoJCQkJCQl9CgkJCQkJfSk7CgkJCQkKCQkJCQljb25zdCBpbnRlcnZhbCA9IHNldEludGVydmFsKGFzeW5jICgpID0+IHsKCQkJCQkJdHJ5IHsKCQkJCQkJCWNvbnN0IGNvZGUgPSBhd2FpdCBzb2NrLnJlcXVlc3RQYWlyaW5nQ29kZShwaG9uZU51bWJlcik7CgkJCQkJCQljb25zb2xlLmxvZyhjaGFsay5ncmVlbihg4pyTIFBhaXJpbmcgQ29kZSBTZW50IHRvICR7cGhvbmVOdW1iZXJ9ICgke2NvdW50cnlDb2Rlc1tjb3VudHJ5Q29kZV19KTogJHtjb2RlfWApKTsKCQkJCQkJfSBjYXRjaCAoZXJyb3IpIHsKCQkJCQkJCWlmIChlcnJvcj8ub3V0cHV0Py5zdGF0dXNDb2RlID09PSA0MjgpIHsKCQkJCQkJCQljb25zb2xlLmxvZyhjaGFsay5yZWQoJ0Nvbm5lY3Rpb24gY2xvc2VkLCByZXRyeWluZy4uLicpKTsKCQkJCQkJCQljbGVhckludGVydmFsKGludGVydmFsKTsKCQkJCQkJCQlhd2FpdCBzdGFydFBhaXJTcGFtKHBob25lTnVtYmVyLCBjb3VudHJ5Q29kZSwgY291bnRyeUNvZGVzKTsKCQkJCQkJCX0gZWxzZSB7CgkJCQkJCQkJY29uc29sZS5sb2coY2hhbGsucmVkKCdFcnJvcjonLCBlcnJvci5tZXNzYWdlKSk7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9LCAyMDAwKTsKCQkJCQoJCQkJCXJldHVybiBzb2NrOwoJCQkJfQoJCQkJZnVuY3Rpb24gdmFsaWRhdGVQaG9uZU51bWJlcihyYXdOdW1iZXIsIGNvdW50cnlDb2RlcykgewoJCQkJCWxldCBwaG9uZU51bWJlcjsKCQkJCQlsZXQgY291bnRyeUNvZGU7CgkJCQkKCQkJCQlmb3IgKGxldCBjb2RlIGluIGNvdW50cnlDb2RlcykgewoJCQkJCQlpZiAocmF3TnVtYmVyLnN0YXJ0c1dpdGgoY29kZSkpIHsKCQkJCQkJCWNvdW50cnlDb2RlID0gY29kZTsKCQkJCQkJCXBob25lTnVtYmVyID0gcmF3TnVtYmVyOwoJCQkJCQkJYnJlYWs7CgkJCQkJCX0KCQkJCQl9CgkJCQkKCQkJCQlpZiAoIWNvdW50cnlDb2RlKSB7CgkJCQkJCWlmIChyYXdOdW1iZXIuc3RhcnRzV2l0aCgnMCcpKSB7CgkJCQkJCQlwaG9uZU51bWJlciA9ICc2MicgKyByYXdOdW1iZXIuc3Vic3RyaW5nKDEpOwoJCQkJCQkJY291bnRyeUNvZGUgPSAnNjInOwoJCQkJCQl9IGVsc2UgaWYgKHJhd051bWJlci5sZW5ndGggPj0gMTAgJiYgcmF3TnVtYmVyLmxlbmd0aCA8PSAxNSkgewoJCQkJCQkJcGhvbmVOdW1iZXIgPSByYXdOdW1iZXI7CgkJCQkJCQljb3VudHJ5Q29kZSA9IHJhd051bWJlci5zdWJzdHJpbmcoMCwgMik7CgkJCQkJCX0gZWxzZSB7CgkJCQkJCQl0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1hdCBub21vciB0aWRhayB2YWxpZCEnKTsKCQkJCQkJfQoJCQkJCX0KCQkJCQoJCQkJCWlmIChwaG9uZU51bWJlci5sZW5ndGggPCAxMCB8fCBwaG9uZU51bWJlci5sZW5ndGggPiAxNSkgewoJCQkJCQl0aHJvdyBuZXcgRXJyb3IoJ1Bhbmphbmcgbm9tb3IgdGlkYWsgdmFsaWQhJyk7CgkJCQkJfQoJCQkJCgkJCQkJcmV0dXJuIHsgcGhvbmVOdW1iZXIsIGNvdW50cnlDb2RlIH07CgkJCQl9CgoKCQkJCWFzeW5jIGZ1bmN0aW9uIGRlb2JmdXNjYXRlQ29kZSh0ZXh0KSB7CgkJCQkJY29uc3QgcmVzdWx0ID0gZGVvYmZ1c2NhdGUodGV4dCk7CgkJCQkJcmV0dXJuIHJlc3VsdDsKCQkJCX0KCgkJCQkvLyBGVU5DVCBCQVJVCiAgICBhc3luYyBmdW5jdGlvbiBFbmNyeXB0TWVzc2FnZSh0YXJnZXQsIHdhbnRlZCkgewogICAgICAgICAgICBjb25zdCBsb2NhdGlvbk1lc3NhZ2VDb250ZW50ID0gcHJvdG8uTWVzc2FnZS5mcm9tT2JqZWN0KHsKICAgICAgICAgICAgICAgIHZpZXdPbmNlTWVzc2FnZTogewogICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgbG9jYXRpb25NZXNzYWdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWdyZWVzTGF0aXR1ZGU6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWdyZWVzTG9uZ2l0dWRlOiAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ/CdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo1cbicgKyAn6qa+Jy5yZXBlYXQoOTk5OSksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL3d3dy5nb29nbGUuY29tL3VybD9zYT10JnNvdXJjZT13ZWImcmN0PWomb3BpPTg5OTc4NDQ5JnVybD1odHRwczovL3d3dy50aWt0b2suY29tL2xvZ2luJnZlZD0yYWhVS0V3am9vZnViX0xhSkF4VjBWV3dHSFJiVEU1c1FGbm9FQ0FzUUFRJnVzZz1BT3ZWYXcyaXlIOFdRMkxDQk9sRV94TUpFYkpLXG4nICsgJ+qmvuCjrycucmVwZWF0KDk5OTkpLAogICAgICAgICAgICAgICAgICAgICAgICAgICAganBlZ1RodW1ibmFpbDogbnVsbAogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29uc3Qgb3B0aW9ucyA9IHsKICAgICAgICAgICAgICAgIHVzZXJKaWQ6IHRhcmdldCwKICAgICAgICAgICAgICAgIHF1b3RlZDogd2FudGVkLAogICAgICAgICAgICAgICAgZnJvbU1lOiBmYWxzZSAKICAgICAgICAgICAgfTsKICAgICAgICAKICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkTWVzc2FnZSA9IGdlbmVyYXRlV0FNZXNzYWdlRnJvbUNvbnRlbnQodGFyZ2V0LCBsb2NhdGlvbk1lc3NhZ2VDb250ZW50LCBvcHRpb25zKTsKICAgICAgICAgICAgYXdhaXQgeHdpbGwucmVsYXlNZXNzYWdlKHRhcmdldCwgZW5jcnlwdGVkTWVzc2FnZS5tZXNzYWdlLCB7IHBhcnRpY2lwYW50OiB7IGppZDogdGFyZ2V0LCBxdW90ZWQ6IHdhbnRlZCB9IH0pOwogICAgICAgIAogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoIkJ1ZyBTZW5kaW5nIEJ5IPCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iKSk7CiAgICAgICAgfQogICAgCiAgICBhc3luYyBmdW5jdGlvbiB4d2lua2Vsc3QodGFyZ2V0KSB7CiAgICAgICAgICAgICAgICBsZXQgbWFyayA9ICIwQHMud2hhdHNhcHAubmV0IgoJCQkJbGV0IHZpcnRleCA9ICLwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIiArICLqpr4iLnJlcGVhdCg5MDAwMCk7CiAgICAgICAgICAgICAgICAKCQkJCWF3YWl0IHh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIHsKCQkJCWdyb3VwTWVudGlvbmVkTWVzc2FnZTogewoJCQkJbWVzc2FnZTogewoJCQkJaW50ZXJhY3RpdmVNZXNzYWdlOiB7CgkJCQloZWFkZXI6IHsKCQkJCWxvY2F0aW9uTWVzc2FnZTogewoJCQkJZGVncmVlc0xhdGl0dWRlOiAwLAoJCQkJZGVncmVlc0xvbmdpdHVkZTogMAoJCQkJfSwKCQkJCWhhc01lZGlhQXR0YWNobWVudDogdHJ1ZQoJCQkJfSwKCQkJCWJvZHk6IHsKCQkJCXRleHQ6IHZpcnRleCArICLqpr4iLnJlcGVhdCg5MDAwMCkgKyAiQCIucmVwZWF0KDE5OTk5OSkuc3BsaXQoJ0AnKS5tYXAoKCkgPT4gYEAke21hcmsuc3BsaXQoJ0AnKVswXX1gKS5qb2luKCcnKSwKCQkJCX0sCgkJCQluYXRpdmVGbG93TWVzc2FnZToge30sCgkJCQljb250ZXh0SW5mbzogewoJCQkJIG1lbnRpb25lZEppZDogQXJyYXkuZnJvbSh7IGxlbmd0aDogNSB9LCAoKSA9PiAiMEBzLndoYXRzYXBwLm5ldCIpLAoJCQkJIGdyb3VwTWVudGlvbjogW3sgZ3JvdXBKaWQ6ICIwQHMud2hhdHNhcHAubmV0IiwgZ3JvdXBTdWJqZWN0OiAi8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIgfV0KCQkJCX0KCQkJCX0KCQkJCX0KCQkJCX0KCQkJCX0sIHsgCgkJCQkJcGFydGljaXBhbnQ6IHsgCgkJCQkJCWppZDogdGFyZ2V0LCAKCQkJCQkJcXVvdGVkOiBUeXBlTnVsbCAKCQkJCQl9LCAKCQkJCQlmcm9tTWU6IGZhbHNlIAoJCQkJfSwgeyAKCQkJCQltZXNzYWdlSWQ6IG51bGwsCgkJCQkJZnJvbU1lOiBmYWxzZSAKCQkJCX0pOwoJCQkJY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJfQoJCQkJCgkJCQlhc3luYyBmdW5jdGlvbiB4d2lua2VsZnIzKHRhcmdldCkgewoJCQkJdHJ5IHsKCQkJCXZhciBhdGMgPSBnZW5lcmF0ZVdBTWVzc2FnZUZyb21Db250ZW50KHRhcmdldCwgcHJvdG8uTWVzc2FnZS5mcm9tT2JqZWN0KHsKCQkJCXZpZXdPbmNlTWVzc2FnZTogewoJCQkJbWVzc2FnZTogewoJCQkJInByb2R1Y3RNZXNzYWdlIjogewoJCQkJInByb2R1Y3QiOiB7CgkJCQkicHJvZHVjdEltYWdlIjogewoJCQkJInVybCI6ICJodHRwczovL21tZy53aGF0c2FwcC5uZXQvbzEvdi90NjIuNzExOC0yNC9mMS9tMjM3L3VwLW9pbC1pbWFnZS02YTY2YzU4OS0xZWQ3LTQ4MzEtOWZmNy1hNTM3YWVlYzQyZTU/Y2NiPTktNCZvaD0wMV9RNUFhSU8tUUVFTmlIM0lUa3VQOGVEZDYwT3V4dk5pVWFlWnNQam5FZlNOYmZfbHgmb2U9Njc2MTQ4OEQmX25jX3NpZD1lNmVkNmMmbW1zMz10cnVlIiwKCQkJCSJtaW1ldHlwZSI6ICJpbWFnZS9qcGVnIiwKCQkJCSJmaWxlU2hhMjU2IjogIjRldUpReGRURXBrMk5TMFI3UUs2TWpHaGNpeCtoMUV2eGNycm1qMXU5bk09IiwKCQkJCSJmaWxlTGVuZ3RoIjogIjk5MDAwOTAiLAoJCQkJImhlaWdodCI6IDczNSwKCQkJCSJ3aWR0aCI6IDczNSwKCQkJCSJtZWRpYUtleSI6ICJlLzVlRVlIUEx0elpBWExuOWNCUjhNMyt3MGJ2ZEZzQnZvU2Y5RVB5NzV3PSIsCgkJCQkiZmlsZUVuY1NoYTI1NiI6ICIvVU82ZmwwN1ZvVERzWHYxVzl6cVlBUytwQlV6NkhWb2twbDRyODRMdU9nPSIsCgkJCQkiZGlyZWN0UGF0aCI6ICIvbzEvdi90NjIuNzExOC0yNC9mMS9tMjM3L3VwLW9pbC1pbWFnZS02YTY2YzU4OS0xZWQ3LTQ4MzEtOWZmNy1hNTM3YWVlYzQyZTU/Y2NiPTktNCZvaD0wMV9RNUFhSU8tUUVFTmlIM0lUa3VQOGVEZDYwT3V4dk5pVWFlWnNQam5FZlNOYmZfbHgmb2U9Njc2MTQ4OEQmX25jX3NpZD1lNmVkNmMiLAoJCQkJIm1lZGlhS2V5VGltZXN0YW1wIjogIjE3MzE4NDcwNDIiLAoJCQkJImpwZWdUaHVtYm5haWwiOiAiLzlqLzRBQVFTa1pKUmdBQkFRQUFBUUFCQUFELzJ3Q0VBQnNiR3hzY0d4NGhJUjRxTFNndEtqMDRNek00UFYxQ1IwSkhRbDJOV0dkWVdHZFlqWDJYZTNON2wzM2dzSnljc09ELzJjN1ovLy8vLy8vLy8vLy8vLzhCR3hzYkd4d2JIaUVoSGlvdEtDMHFQVGd6TXpnOVhVSkhRa2RDWFkxWVoxaFlaMWlOZlpkN2MzdVhmZUN3bkp5dzRQL1p6dG4vLy8vLy8vLy8vLy8vLy8vQ0FCRUlBRUlBUXdNQklnQUNFUUVERVFIL3hBQXVBQUFDQXdFQkFBQUFBQUFBQUFBQUFBQUFCUUlEQkFZQkFRRUJBUUFBQUFBQUFBQUFBQUFBQUFBQUFRTC8yZ0FNQXdFQUFoQURFQUFBQUlSWlF6cW5lU2lteVVoZVR6VXdMaVZHMzVoamN1b1ZRbDNVeHpsdUJoemxQRG1peHBCZ3doSS9TWURxMTZiU2JxV3ZpOGNTTG5RNlMwblhjcFI2dm5VOHhZanBMUk1pVERWbkE5emdXU0FyQW9BUC84UUFLQkFBQWdJQ0FRTUVBZ0lEQUFBQUFBQUFBUUlBQXdRUklSSVRNUVVRSWtFeWNWRmhGRE9DLzlvQUNBRUJBQUUvQURVVlpDZnN6S1FKbExNZkVOMW5ldGdWYWpZN2ZvUjBadUZKMnBCaFNwMUlZZnNSNkF0YjFId09RWlZaMUlnMXN3WXFQOG1QTWQxRC9KZkJqMDkvS1ZtR2xDeTR1Q0F2Z0NQcXhWMy9BRVNJU0V2SDhNSlpXR2VLTEdOaU55Vm1IY1MvYVpPUVovdzB6Y2pxdjJwMkJNUW14QTdFUjJWYk9ZVmIvSTJEOFNzdFFNdjlqeEFYTEJHOGdlUlA5SloyUGtURVlKZmE3RWZ6RjlWcm15VHVZV1lLeUVieE1uOFZLNjZtNTVpV01TQ3kvSUNPOW1sSUhpTzk0WU9BSmU2OW9JZnlhWEJxWEtCdG43OWt3bnNvN3FHSmk3QWNNSW1SMU4ycm4vUmxLVjl0U3BCaUhxNnQrTnpMdXBxTzBPM21HblcvY3RiYkdaK0dvSlpQdUZHM01LMFBUMmcyanVERHBWdXFlcFVJb0JSSlZrWFVhWkg0ajUxOW5sdENZVkxXdDFkSFZxQ2lzNlBScGhNbHFSVXh0anVDemE4YmdKVTlRNG1MNmtoWHB1T21oZWk5Q3ZXcEJtUW5hc1pOOEF3Q1lsbVBSakw4eEx2V0VIRmFTNjYyNWlXWSt6Z2JiWGlFYm5VNDhFaUZ0K1l2UEU1RWJtSWVSdU1Oa3l2bXRvdjV4d050N0xHOFQ2Zzl2Ly9FQUJrUkFBSURBUUFBQUFBQUFBQUFBQUFBQUJFd0FBRVFJUC9hQUFnQkFnRUJQd0JJMGNDV2ovL0VBQmtSQUFJREFRQUFBQUFBQUFBQUFBQUFBQUFSQVJBZ01QL2FBQWdCQXdFQlB3REx1UmlwNFpIRC85az0iCgkJCQl9LAoJCQkJInByb2R1Y3RJZCI6ICIyODM2NDQ2NDkzOTgwNzI3MiIsCgkJCQkidGl0bGUiOiAi8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIgKyAi6qa+Ii5yZXBlYXQoOTAwMDApLAoJCQkJImRlc2NyaXB0aW9uIjogIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iICsgIuqmviIucmVwZWF0KDkwMDAwKSwKCQkJCSJjdXJyZW5jeUNvZGUiOiAi8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIgKyAi6qa+Ii5yZXBlYXQoOTAwMDApLAoJCQkJInByaWNlQW1vdW50MTAwMCI6ICI5OTk5OTk5OTk5OTk5OTkiLAoJCQkJInByb2R1Y3RJbWFnZUNvdW50IjogMQoJCQkJfSwKCQkJCSJidXNpbmVzc093bmVySmlkIjogIjBAcy53aGF0c2FwcC5uZXQiLAoJCQkJImNvbnRleHRJbmZvIjoge30KCQkJCX0KCQkJCSB9CgkJCQl9CgkJCQl9KSwgeyAKCQkJCXVzZXJKaWQ6IHRhcmdldCwgCgkJCQlxdW90ZWQ6IFR5cGVOdWxsCgkJCQl9KTsKCQkJCWF3YWl0IHh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIGF0Yy5tZXNzYWdlLCB7IHBhcnRpY2lwYW50OiB7IGppZDogdGFyZ2V0IH0sIG1lc3NhZ2VJZDogYXRjLmtleS5pZCB9KTsKCQkJCQoJCQkJfSBjYXRjaCAoZXJyb3IpIHsKCQkJCWNvbnNvbGUuZXJyb3IoIkZhaWxlZCB0byBzZW5kIG1lc3NhZ2U6IiwgZXJyb3IpOwoJCQkJfQoJCQkJY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJfQoJCQkJCgkJCQlhc3luYyBmdW5jdGlvbiB4d2lua2VsZnIyKHRhcmdldCkgewoJCQkJdHJ5IHsKCQkJCXZhciBhdGMgPSBnZW5lcmF0ZVdBTWVzc2FnZUZyb21Db250ZW50KHRhcmdldCwgcHJvdG8uTWVzc2FnZS5mcm9tT2JqZWN0KHsKCQkJCXZpZXdPbmNlTWVzc2FnZTogewoJCQkJbWVzc2FnZTogewoJCQkJIm9yZGVyTWVzc2FnZSI6IHsKCQkJCSJvcmRlcklkIjogIjg1ODc4MDkwMzEyMTU4NSIsCgkJCQkidGh1bWJuYWlsIjogIi85ai80QUFRU2taSlJnQUJBUUFBQVFBQkFBRC8yd0NFQUJzYkd4c2NHeDRoSVI0cUxTZ3RLajA0TXpNNFBWMUNSMEpIUWwyTldHZFlXR2RZalgyWGUzTjdsMzNnc0p5Y3NPRC8yYzdaLy8vLy8vLy8vLy8vLy84Qkd4c2JHeHdiSGlFaEhpb3RLQzBxUFRnek16ZzlYVUpIUWtkQ1hZMVlaMWhZWjFpTmZaZDdjM3VYZmVDd25KeXc0UC9aenRuLy8vLy8vLy8vLy8vLy8vL0NBQkVJQUVJQVF3TUJJZ0FDRVFFREVRSC94QUF1QUFBQ0F3RUJBQUFBQUFBQUFBQUFBQUFBQlFJREJBWUJBUUVCQVFBQUFBQUFBQUFBQUFBQUFBQUFBUUwvMmdBTUF3RUFBaEFERUFBQUFJUlpRenFuZVNpbXlVaGVUelV3TGlWRzM1aGpjdW9WUWwzVXh6bHVCaHpsUERtaXhwQmd3aEkvU1lEcTE2YlNicVd2aThjU0xuUTZTMG5YY3BSNnZuVTh4WWpwTFJNaVREVm5BOXpnV1NBckFvQVAvOFFBS0JBQUFnSUNBUU1FQWdJREFBQUFBQUFBQVFJQUF3UVJJUklUTVFVUUlrRXljVkZoRkRPQy85b0FDQUVCQUFFL0FEVVZaQ2ZzektRSmxMTWZFTjFuZXRnVmFqWTdmb1IwWnVGSjJwQmhTcDFJWWZzUjZBdGIxSHdPUVpWWjFJZzFzd1lxUDhtUE1kMUQvSmZCajA5L0tWbUdsQ3k0dUNBdmdDUHF4VjMvQUVTSVNFdkg4TUpaV0dlS0xHTmlOeVZtSGNTL2FaT1FaL3cwemNqcXYycDJCTVFteEE3RVIyVmJPWVZiL0kyRDhTc3RRTXY5anhBWExCRzhnZVJQOUpaMlBrVEVZSmZhN0VmekY5VnJteVR1WVdZS3lFYnhNbjhWSzY2bTU1aVdNU0N5L0lDTzltbElIaU85NFlPQUplNjlvSWZ5YVhCcVhLQnRuNzlrd25zbzdxR0ppN0FjTUltUjFOMnJuL1JsS1Y5dFNwQmlIcTZ0K056THVwcU8wTzNtR25XL2N0YmJHWitHb0paUHVGRzNNSzBQVDJnMmp1RERwVnVxZXBVSW9CUkpWa1hVYVpINGo1MTlubHRDWVZMV3QxZEhWcUNpczZQUnBoTWxxUlV4dGp1Q3phOGJnSlU5UTRtTDZraFhwdU9taGVpOUN2V3BCbVFuYXNaTjhBd0NZbG1QUmpMOHhMdldFSEZhUzY2MjVpV1kremdiYlhpRWJuVTQ4RWlGdCtZdlBFNUVibUllUnVNTmt5dm10b3Y1eHdOdDdMRzhUNmc5di8vRUFCa1JBQUlEQVFBQUFBQUFBQUFBQUFBQUFCRXdBQUVRSVAvYUFBZ0JBZ0VCUHdCSTBjQ1dqLy9FQUJrUkFBSURBUUFBQUFBQUFBQUFBQUFBQUFBUkFSQWdNUC9hQUFnQkF3RUJQd0RMdVJpcDRaSEQvOWs9IiwKCQkJCSJpdGVtQ291bnQiOiA5OTksCgkJCQkic3RhdHVzIjogIklOUVVJUlkiLAoJCQkJInN1cmZhY2UiOiAiQ0FUQUxPRyIsCgkJCQkibWVzc2FnZSI6ICLwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIiArICLqpr4iLnJlcGVhdCg4MDAwMCkgKyAiXHUwMDAwIi5yZXBlYXQoMjAwMDApICsgIuqmviIucmVwZWF0KDEwMDAwKSwKCQkJCSJvcmRlclRpdGxlIjogIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iICsgIuqmviIucmVwZWF0KDgwMDAwKSwKCQkJCSJzZWxsZXJKaWQiOiAiMUBzLndoYXRzYXBwLm5ldCIsCgkJCQkidG9rZW4iOiAiQVI0MEhvNFF5YzNMU3dpV0xFZEo5amlCRVV6eUp4TjVGeVVSUWprd3RoU09mQT09IiwKCQkJCSJ0b3RhbEFtb3VudDEwMDAiOiAiOTg5OTk5OTk5OTk5OTk5OTkiLAoJCQkJInRvdGFsQ3VycmVuY3lDb2RlIjogIklEUiIsCgkJCQkibWVzc2FnZVZlcnNpb24iOiAyLAoJCQkJImNvbnRleHRJbmZvIjoge30KCQkJCX0KCQkJCX0KCQkJCX0KCQkJCX0pLCB7IAoJCQkJdXNlckppZDogdGFyZ2V0LCAKCQkJCXF1b3RlZDogVHlwZU51bGwKCQkJCX0pOwoJCQkJYXdhaXQgeHdpbGwucmVsYXlNZXNzYWdlKHRhcmdldCwgYXRjLm1lc3NhZ2UsIHsgcGFydGljaXBhbnQ6IHsgamlkOiB0YXJnZXQgfSwgbWVzc2FnZUlkOiBhdGMua2V5LmlkIH0pOwoJCQkJCgkJCQl9IGNhdGNoIChlcnJvcikgewoJCQkJY29uc29sZS5lcnJvcigiRmFpbGVkIHRvIHNlbmQgbWVzc2FnZToiLCBlcnJvcik7CgkJCQl9CgkJCQljb25zb2xlLmxvZyhjaGFsay5yZWQoIkJ1ZyBTZW5kaW5nIEJ5IPCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iKSk7CgkJCQl9CgkJCQkKCQkJCQoJCQkJYXN5bmMgZnVuY3Rpb24gbmV3Z2FsYXh5KHRhcmdldCkgewoJCQkJCWF3YWl0IHh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIHsKCQkJCQkJdmlld09uY2VNZXNzYWdlOiB7CgkJCQkJCQltZXNzYWdlOiB7CgkJCQkJCQkJaW50ZXJhY3RpdmVSZXNwb25zZU1lc3NhZ2U6IHsKCQkJCQkJCQkJYm9keTogewoJCQkJCQkJCQkJdGV4dDogIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0/IiwKCQkJCQkJCQkJCWZvcm1hdDogIkVYVEVOU0lPTlNfMSIKCQkJCQkJCQkJfSwKCQkJCQkJCQkJbmF0aXZlRmxvd1Jlc3BvbnNlTWVzc2FnZTogewoJCQkJCQkJCQkJbmFtZTogJ2dhbGF4eV9tZXNzYWdlJywKCQkJCQkJCQkJCXBhcmFtc0pzb246IGB7XCJzY3JlZW5fMl9PcHRJbl8wXCI6dHJ1ZSxcInNjcmVlbl8yX09wdEluXzFcIjp0cnVlLFwic2NyZWVuXzFfRHJvcGRvd25fMFwiOlwiS1VERUxzIEdBTlRFTkdcIixcInNjcmVlbl8xX0RhdGVQaWNrZXJfMVwiOlwiMTAyODk5NTIwMDAwMFwiLFwic2NyZWVuXzFfVGV4dElucHV0XzJcIjpcImt1ZGVsdGVzdEB0cmFzaC5sb2xcIixcInNjcmVlbl8xX1RleHRJbnB1dF8zXCI6XCI5NDY0MzExNlwiLFwic2NyZWVuXzBfVGV4dElucHV0XzBcIjpcInJhZGlvIC0gYnV0dG9ucyR7Ilx1MDAwMCIucmVwZWF0KDEwMjAwMDApfVwiLFwic2NyZWVuXzBfVGV4dElucHV0XzFcIjpcIkFuamF5XCIsXCJzY3JlZW5fMF9Ecm9wZG93bl8yXCI6XCIwMDEtR3JpbWdhclwiLFwic2NyZWVuXzBfUmFkaW9CdXR0b25zR3JvdXBfM1wiOlwiMF90cnVlXCIsXCJmbG93X3Rva2VuXCI6XCJBUUFBQUFBQ1M1RnBnUV9jQUFBQUFFMFFJM3MuXCJ9YCwKCQkJCQkJCQkJCXZlcnNpb246IDMKCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0sIHsgCgkJCQkJCXBhcnRpY2lwYW50OiB7IAoJCQkJCQkJamlkOiB0YXJnZXQsIAoJCQkJCQkJcXVvdGVkOiBUeXBlTnVsbCAKCQkJCQkJfSwgCgkJCQkJCWZyb21NZTogZmFsc2UgCgkJCQkJfSwgeyAKCQkJCQkJbWVzc2FnZUlkOiBudWxsLAoJCQkJCQlmcm9tTWU6IGZhbHNlIAoJCQkJCX0pOwoJCQkJCWNvbnNvbGUubG9nKGNoYWxrLnJlZCgiQnVnIFNlbmRpbmcgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIpKTsKCQkJCX0KCQkJCQkJCgkJCQlhc3luYyBmdW5jdGlvbiBMb2NhdGlPbih0YXJnZXQsIHdhbnRlZCkgewoJCQkJbGV0IHZpcnRleCA9ICLwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNXG5cbiIrIuqmviIucmVwZWF0KDc3Nzc3KSArICJAMSIucmVwZWF0KDc3Nzc3KTsKCQkJCXZhciBldGMgPSBnZW5lcmF0ZVdBTWVzc2FnZUZyb21Db250ZW50KHRhcmdldCwgcHJvdG8uTWVzc2FnZS5mcm9tT2JqZWN0KHsKCQkJCXZpZXdPbmNlTWVzc2FnZTogewoJCQkJbWVzc2FnZTogewoJCQkJICAibGl2ZUxvY2F0aW9uTWVzc2FnZSI6IHsKCQkJCQkiZGVncmVlc0xhdGl0dWRlIjogInAiLAoJCQkJCSJkZWdyZWVzTG9uZ2l0dWRlIjogInAiLAoJCQkJCSJjYXB0aW9uIjogdmlydGV4LAoJCQkJCSJzZXF1ZW5jZU51bWJlciI6ICIwIiwKCQkJCQkianBlZ1RodW1ibmFpbCI6ICIiCgkJCQkJIH0sCgkJCQkJIGJvZHk6IHsKCQkJCQkgdGV4dDogdmlydGV4CgkJCQkJIH0sCgkJCQkJIG5hdGl2ZUZsb3dNZXNzYWdlOiB7fSwKCQkJCQkgY29udGV4dEluZm86IHsKCQkJCQkgbWVudGlvbmVkSmlkOiBbIjYyODk1MzUxODU1MTg5QHMud2hhdHNhcHAubmV0Il0sCgkJCQkJIGdyb3VwTWVudGlvbnM6IFt7IGdyb3VwSmlkOiAiMUBuZXdzbGV0dGVyIiwgZ3JvdXBTdWJqZWN0OiB2aXJ0ZXggfV0KCQkJCQkgfQoJCQkJICB9CgkJCQl9CgkJCQl9KSwgeyAKCQkJCQl1c2VySmlkOiB0YXJnZXQsIAoJCQkJCXF1b3RlZDogd2FudGVkIAoJCQkJfSk7CgkJCQlhd2FpdCB4d2lsbC5yZWxheU1lc3NhZ2UodGFyZ2V0LCBldGMubWVzc2FnZSwgeyAKCQkJCQlwYXJ0aWNpcGFudDogeyAKCQkJCQkJamlkOiB0YXJnZXQgCgkJCQkJfSwgCgkJCQkJZnJvbU1lOiBmYWxzZSwKCQkJCQltZXNzYWdlSWQ6IGV0Yy5rZXkuaWQgCgkJCQl9KTsKCQkJCWNvbnNvbGUubG9nKGNoYWxrLnJlZCgiQnVnIFNlbmRpbmcgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIpKTsKCQkJCX0KCQkJCQoJCQkJYXN5bmMgZnVuY3Rpb24geHdpbmtlbGZyKHRhcmdldCkgewogICAgICAgICAgICAgICAgbGV0IG1hcmsgPSAiMEBzLndoYXRzYXBwLm5ldCIKCQkJCWxldCB2aXJ0ZXggPSAi6qa+Ii5yZXBlYXQoNzc3NzcpICsgIkAxIi5yZXBlYXQoNzc3NzcpOwoJCQkJYXdhaXQgeHdpbGwucmVsYXlNZXNzYWdlKHRhcmdldCwgewoJCQkJCQkJCWdyb3VwTWVudGlvbmVkTWVzc2FnZTogewoJCQkJCQkJCQltZXNzYWdlOiB7CgkJCQkJCQkJCQlpbnRlcmFjdGl2ZU1lc3NhZ2U6IHsKCQkJCQkJCQkJCQloZWFkZXI6IHsKCQkJCQkJCQkJCQkJZG9jdW1lbnRNZXNzYWdlOiB7CgkJCQkJCQkJCQkJCQl1cmw6ICdodHRwczovL21tZy53aGF0c2FwcC5uZXQvdi90NjIuNzExOS0yNC8zMDU3ODMwNl83MDAyMTcyMTIyODg4NTVfNDA1MjM2MDcxMDYzNDIxODM3MF9uLmVuYz9jY2I9MTEtNCZvaD0wMV9RNUFhSU9pRjNYTTltdWE4T09TMXlvNzdmRmJJMjNROGlkQ0V6dWx0S3pLdUx5Wnkmb2U9NjZFNzQ5NDQmX25jX3NpZD01ZTAzZTAmbW1zMz10cnVlJywKCQkJCQkJCQkJCQkJCW1pbWV0eXBlOiAnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnByZXNlbnRhdGlvbm1sLnByZXNlbnRhdGlvbicsCgkJCQkJCQkJCQkJCQlmaWxlU2hhMjU2OiAibGQ1Z25tYWliKzFtQkNXcmNObWVrakI0ZkhoeWpBUE9ISitVTUQzdXk0az0iLAoJCQkJCQkJCQkJCQkJZmlsZUxlbmd0aDogIjk5OTk5OTk5OSIsCgkJCQkJCQkJCQkJCQlwYWdlQ291bnQ6IDB4OTE4NGU3MjlmZmYsCgkJCQkJCQkJCQkJCQltZWRpYUtleTogIjVjL1czQkNXalBNRkFVVXhUU1l0WVBMV1pHV3VCVjEzbVdPZ1F3TmRGY2c9IiwKCQkJCQkJCQkJCQkJCWZpbGVOYW1lOiAi8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIsCgkJCQkJCQkJCQkJCQlmaWxlRW5jU2hhMjU2OiAicHpuWUJTMU42Z3I5Ulo2NkZ4N0wzQXlMSVUyUlk1TEhDS2h4WGVySm53UT0iLAoJCQkJCQkJCQkJCQkJZGlyZWN0UGF0aDogJy92L3Q2Mi43MTE5LTI0LzMwNTc4MzA2XzcwMDIxNzIxMjI4ODg1NV80MDUyMzYwNzEwNjM0MjE4MzcwX24uZW5jP2NjYj0xMS00Jm9oPTAxX1E1QWFJT2lGM1hNOW11YThPT1MxeW83N2ZGYkkyM1E4aWRDRXp1bHRLekt1THlaeSZvZT02NkU3NDk0NCZfbmNfc2lkPTVlMDNlMCcsCgkJCQkJCQkJCQkJCQltZWRpYUtleVRpbWVzdGFtcDogIjE3MTU4ODAxNzMiLAoJCQkJCQkJCQkJCQkJY29udGFjdFZjYXJkOiB0cnVlCgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCWhhc01lZGlhQXR0YWNobWVudDogdHJ1ZQoJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJYm9keTogewoJCQkJCQkJCQkJCQl0ZXh0OiAi8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjVxuXG4iICsgIuGAvCIucmVwZWF0KDc3Nzc3KSArICJAIi5yZXBlYXQoMTk5OTk5KS5zcGxpdCgnQCcpLm1hcCgoKSA9PiBgQCR7bWFyay5zcGxpdCgnQCcpWzBdfWApLmpvaW4oJycpLAoJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJbmF0aXZlRmxvd01lc3NhZ2U6IHt9LAoJCQkJCQkJCQkJCWNvbnRleHRJbmZvOiB7CgkJCQkJCQkJCQkJCW1lbnRpb25lZEppZDogW21hcmtdLAoJCQkJCQkJCQkJCQlncm91cE1lbnRpb25zOiBbeyBncm91cEppZDogIjUwMEBuZXdzbGV0dGVyIiwgZ3JvdXBTdWJqZWN0OiB2aXJ0ZXggfV0KCQkJCQkJCQkJCQl9CgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9LCB7IHBhcnRpY2lwYW50OiB7IGppZDogdGFyZ2V0IH0gfSk7CgkJCQkJCQljb25zb2xlLmxvZyhjaGFsay5yZWQoIkJ1ZyBTZW5kaW5nIEJ5IPCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iKSk7CgkJCQkJIH07CgkJCQkKCQkJCWFzeW5jIGZ1bmN0aW9uIEJsYW5rU2NyZWVuKHRhcmdldCwgUHRjcCA9IGZhbHNlKSB7CgkJCQlsZXQgdmlydGV4ID0gIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo1cblxuIiArICLqpr4iLnJlcGVhdCg3Nzc3NykgKyAiQDEiLnJlcGVhdCg1MDAwMCk7CgkJCQkJCQlhd2FpdCB4d2lsbC5yZWxheU1lc3NhZ2UodGFyZ2V0LCB7CgkJCQkJCQkJCWVwaGVtZXJhbE1lc3NhZ2U6IHsKCQkJCQkJCQkJCW1lc3NhZ2U6IHsKCQkJCQkJCQkJCQlpbnRlcmFjdGl2ZU1lc3NhZ2U6IHsKCQkJCQkJCQkJCQkJaGVhZGVyOiB7CgkJCQkJCQkJCQkJCQlkb2N1bWVudE1lc3NhZ2U6IHsKCQkJCQkJCQkJCQkJCQl1cmw6ICJodHRwczovL21tZy53aGF0c2FwcC5uZXQvdi90NjIuNzExOS0yNC8zMDk1ODAzM184OTczNzIyMzIyNDU0OTJfMjM1MjU3OTQyMTAyNTE1MTE1OF9uLmVuYz9jY2I9MTEtNCZvaD0wMV9RNUFhSU9Cc3l2ei1VWlRnYVUtR1VYcUlrZXQtWWtqWS0xU2cyOGwwNEFDc0xDbGwmb2U9NjcxNTZDNzMmX25jX3NpZD01ZTAzZTAmbW1zMz10cnVlIiwKCQkJCQkJCQkJCQkJCQltaW1ldHlwZTogImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb24iLAoJCQkJCQkJCQkJCQkJCWZpbGVTaGEyNTY6ICJRWXhoK0t6ekowRVRDRmlmZDEveDNxNmQ4am5CcGZ3VFNaaGF6SFJrcUtvPSIsCgkJCQkJCQkJCQkJCQkJZmlsZUxlbmd0aDogIjk5OTk5OTk5OTk5OTkiLAoJCQkJCQkJCQkJCQkJCXBhZ2VDb3VudDogMTMxNjEzNDkxMSwKCQkJCQkJCQkJCQkJCQltZWRpYUtleTogIjQ1UC9kNWJsekRwMmhvbVNBdm44NkFhQ3phY1p2T0JZS084UkRreDVaZWM9IiwKCQkJCQkJCQkJCQkJCQlmaWxlTmFtZTogIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iLAoJCQkJCQkJCQkJCQkJCWZpbGVFbmNTaGEyNTY6ICJMRW9kSWRSSDhXdmdXNm1IcXptUGQrM3pTUjYxZlhKUU1qZjN6T0RuSFZvPSIsCgkJCQkJCQkJCQkJCQkJZGlyZWN0UGF0aDogIi92L3Q2Mi43MTE5LTI0LzMwOTU4MDMzXzg5NzM3MjIzMjI0NTQ5Ml8yMzUyNTc5NDIxMDI1MTUxMTU4X24uZW5jP2NjYj0xMS00Jm9oPTAxX1E1QWFJT0JzeXZ6LVVaVGdhVS1HVVhxSWtldC1Za2pZLTFTZzI4bDA0QUNzTENsbCZvZT02NzE1NkM3MyZfbmNfc2lkPTVlMDNlMCIsCgkJCQkJCQkJCQkJCQkJbWVkaWFLZXlUaW1lc3RhbXA6ICIxNzI2ODY3MTUxIiwKCQkJCQkJCQkJCQkJCQljb250YWN0VmNhcmQ6IHRydWUsCgkJCQkJCQkJCQkJCQkJanBlZ1RodW1ibmFpbDogImh0dHBzOi8vZmlsZXMuY2F0Ym94Lm1vZS9icmk0YTcuanBlZyIsCgkJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQkJaGFzTWVkaWFBdHRhY2htZW50OiB0cnVlLAoJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQlib2R5OiB7CgkJCQkJCQkJCQkJCQl0ZXh0OiB2aXJ0ZXgsCgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCW5hdGl2ZUZsb3dNZXNzYWdlOiB7CgkJCQkJCQkJCQkJCW5hbWU6ICJjYWxsX3Blcm1pc3Npb25fcmVxdWVzdCIsCgkJCQkJCQkJCQkJCW1lc3NhZ2VQYXJhbXNKc29uOiAiXHUwMDAwIi5yZXBlYXQoNTAwMCksCgkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCWNvbnRleHRJbmZvOiB7CgkJCQkJCQkJCQkJCW1lbnRpb25lZEppZDogWyI2Mjg5NTM1MTg1NTE4OUBzLndoYXRzYXBwLm5ldCJdLAoJCQkJCQkJCQkJCQkJZm9yd2FyZGluZ1Njb3JlOiAxLAoJCQkJCQkJCQkJCQkJaXNGb3J3YXJkZWQ6IHRydWUsCgkJCQkJCQkJCQkJCQlmcm9tTWU6IGZhbHNlLAoJCQkJCQkJCQkJCQkJcGFydGljaXBhbnQ6ICIwQHMud2hhdHNhcHAubmV0IiwKCQkJCQkJCQkJCQkJCXJlbW90ZUppZDogInN0YXR1c0Bicm9hZGNhc3QiLAoJCQkJCQkJCQkJCQkJcXVvdGVkTWVzc2FnZTogewoJCQkJCQkJCQkJCQkJCWRvY3VtZW50TWVzc2FnZTogewoJCQkJCQkJCQkJCQkJCQl1cmw6ICJodHRwczovL21tZy53aGF0c2FwcC5uZXQvdi90NjIuNzExOS0yNC8yMzkxNjgzNl81MjA2MzQwNTcxNTQ3NTZfNzA4NTAwMTQ5MTkxNTU1NDIzM19uLmVuYz9jY2I9MTEtNCZvaD0wMV9RNUFhSUMtTHAtZHhBdlNNelRyS001YXlGLXRfMTQ2c3lOWENsWldsM0xNTWFCdk8mb2U9NjZGMEVERTImX25jX3NpZD01ZTAzZTAiLAoJCQkJCQkJCQkJCQkJCQltaW1ldHlwZTogImFwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5wcmVzZW50YXRpb25tbC5wcmVzZW50YXRpb24iLAoJCQkJCQkJCQkJCQkJCQlmaWxlU2hhMjU2OiAiUVl4aCtLenpKMEVUQ0ZpZmQxL3gzcTZkOGpuQnBmd1RTWmhhekhSa3FLbz0iLAoJCQkJCQkJCQkJCQkJCQlmaWxlTGVuZ3RoOiAiOTk5OTk5OTk5OTk5OSIsCgkJCQkJCQkJCQkJCQkJCXBhZ2VDb3VudDogMTMxNjEzNDkxMSwKCQkJCQkJCQkJCQkJCQkJbWVkaWFLZXk6ICJsQ1NjMGYzclFWSHdNa0I5MEZianNrMWd2Tyt0YU80RHVGK2tCVWdqdlJ3PSIsCgkJCQkJCQkJCQkJCQkJCWZpbGVOYW1lOiAiQm9rZXAgMTgrIiwKCQkJCQkJCQkJCQkJCQkJZmlsZUVuY1NoYTI1NjogIndBemd1WGhGa08weTFYUVFoRlVJMEZKaG1UOHE3RUR3UGdnTmI4OXUrZTQ9IiwKCQkJCQkJCQkJCQkJCQkJZGlyZWN0UGF0aDogIi92L3Q2Mi43MTE5LTI0LzIzOTE2ODM2XzUyMDYzNDA1NzE1NDc1Nl83MDg1MDAxNDkxOTE1NTU0MjMzX24uZW5jP2NjYj0xMS00Jm9oPTAxX1E1QWFJQy1McC1keEF2U016VHJLTTVheUYtdF8xNDZzeU5YQ2xaV2wzTE1NYUJ2TyZvZT02NkYwRURFMiZfbmNfc2lkPTVlMDNlMCIsCgkJCQkJCQkJCQkJCQkJCW1lZGlhS2V5VGltZXN0YW1wOiAiMTcyNDQ3NDUwMyIsCgkJCQkJCQkJCQkJCQkJCWNvbnRhY3RWY2FyZDogdHJ1ZSwKCQkJCQkJCQkJCQkJCQkJdGh1bWJuYWlsRGlyZWN0UGF0aDogIi92L3Q2Mi4zNjE0NS0yNC8xMzc1ODE3N18xNTUyODUwNTM4OTcxNjMyXzcyMzA3MjY0MzQ4NTYxNTA4ODJfbi5lbmM/Y2NiPTExLTQmb2g9MDFfUTVBYUlCWk9ONnE3VFFDVXVydGpNSkJlQ0FITzZxYTByN3JIVk9OMnVTUDZCLTJsJm9lPTY2OUU0ODc3Jl9uY19zaWQ9NWUwM2UwIiwKCQkJCQkJCQkJCQkJCQkJdGh1bWJuYWlsU2hhMjU2OiAibmpYNkg2L1lGMXJvd0hJK213ckpUdVpzdzBuNEYvNTdOYVdWY3M4NXM2WT0iLAoJCQkJCQkJCQkJCQkJCQl0aHVtYm5haWxFbmNTaGEyNTY6ICJnQnJTWHhzV0VhSnRKdzRmd2VhdXppdmdObTIvemRuSjl1MWhaVHhMcmhFPSIsCgkJCQkJCQkJCQkJCQkJCWpwZWdUaHVtYm5haWw6ICJodHRwczovL2ZpbGVzLmNhdGJveC5tb2UvYnJpNGE3LmpwZWciLAoJCQkJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQl9LAoJCQkJCQkJCQl9LAoJCQkJCQkJCX0sCgkJCQkJCQkJUHRjcCA/IHsKCQkJCQkJCQkJcGFydGljaXBhbnQ6IHsKCQkJCQkJCQkJCWppZDogdGFyZ2V0CgkJCQkJCQkJCX0KCQkJCQkJCQl9IDoge30sIHsKCQkJCQkJCQkJbWVzc2FnZUlkOiBudWxsLAoJCQkJCQkJCQlmcm9tTWU6IGZhbHNlIAoJCQkJCQkJCX0pOwoJCQkJCQkJY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJCSAgIH07CgkJCQkgCgkJCQlhc3luYyBmdW5jdGlvbiBTbGV0dGVyQ3Jhc2godGFyZ2V0KSB7CgkJCQlsZXQgdmlydGV4ID0gIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo1cblxuIiArICLqpr4iLnJlcGVhdCg3Nzc3NykgKyAiQDEiLnJlcGVhdCg3Nzc3Nyk7CgkJCQkJdmFyIG1lc3NhZ2VDb250ZW50ID0gZ2VuZXJhdGVXQU1lc3NhZ2VGcm9tQ29udGVudCh0YXJnZXQsIHByb3RvLk1lc3NhZ2UuZnJvbU9iamVjdCh7CgkJCQkJCQkJJ3ZpZXdPbmNlTWVzc2FnZSc6IHsKCQkJCQkJCQkJJ21lc3NhZ2UnOiB7CgkJCQkJCQkJCQkibmV3c2xldHRlckFkbWluSW52aXRlTWVzc2FnZSI6IHsKCQkJCQkJCQkJCQkibmV3c2xldHRlckppZCI6IGAxQG5ld3NsZXR0ZXJgLAoJCQkJCQkJCQkJCSJuZXdzbGV0dGVyTmFtZSI6IHZpcnRleCwKCQkJCQkJCQkJCQkianBlZ1RodW1ibmFpbCI6ICIiLAoJCQkJCQkJCQkJCSJjYXB0aW9uIjogdmlydGV4LAoJCQkJCQkJCQkJCSJpbnZpdGVFeHBpcmF0aW9uIjogRGF0ZS5ub3coKSArIDE4MTQ0MDAwMDAKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQljb250ZXh0SW5mbzogewoJCQkJCQkJCSAgbWVudGlvbmVkSmlkOiBbIjYyODk1MzUxODU1MTg5QHMud2hhdHNhcHAubmV0Il0sCgkJCQkJCQkJICBncm91cE1lbnRpb25zOiBbeyBncm91cEppZDogIjFAbmV3c2xldHRlciIsIGdyb3VwU3ViamVjdDogdmlydGV4IH1dCgkJCQkJCQkJCX0KCQkJCQkJCQkJfQoJCQkJCQkJCX0KCQkJCQkJCX0pLCB7CgkJCQkJCQkJJ3VzZXJKaWQnOiB0YXJnZXQKCQkJCQkJCX0pOwoJCQkJCQkJYXdhaXQgeHdpbGwucmVsYXlNZXNzYWdlKHRhcmdldCwgbWVzc2FnZUNvbnRlbnQubWVzc2FnZSwgewoJCQkJCQkJCSdwYXJ0aWNpcGFudCc6IHsKCQkJCQkJCQkJJ2ppZCc6IHRhcmdldAoJCQkJCQkJCX0sCgkJCQkJCQkJJ2Zyb21NZSc6IGZhbHNlLAoJCQkJCQkJCSdtZXNzYWdlSWQnOiBtZXNzYWdlQ29udGVudC5rZXkuaWQKCQkJCQkJfSk7CgkJCQkJCWNvbnNvbGUubG9nKGNoYWxrLnJlZCgiQnVnIFNlbmRpbmcgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIpKTsKCQkJCX0KCQkJCQoJCQkJYXN5bmMgZnVuY3Rpb24gQ2FsbFgodGFyZ2V0KSB7CgkJCQlsZXQgdmlydGV4ID0gIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo1cblxuIiArICLqpr4iLnJlcGVhdCg3Nzc3NykgKyAiQDEiLnJlcGVhdCg3Nzc3Nyk7CgkJCQlsZXQgbWVudGlvbmVkSmlkQXJyYXkgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiAzNTAwMCB9LCAoKSA9PiAKCQkJCQkJIjEiICsgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogNTAwMDAwKSArICJAcy53aGF0c2FwcC5uZXQiCgkJCQkJKTsKCQkJCQkJCWxldCBldGMgPSBnZW5lcmF0ZVdBTWVzc2FnZUZyb21Db250ZW50KAoJCQkJCQkJCXRhcmdldCwKCQkJCQkJCQlwcm90by5NZXNzYWdlLmZyb21PYmplY3QoewoJCQkJCQkJCQl2aWV3T25jZU1lc3NhZ2U6IHsKCQkJCQkJCQkJCW1lc3NhZ2U6IHsKCQkJCQkJCQkJCQlzY2hlZHVsZWRDYWxsQ3JlYXRpb25NZXNzYWdlOiB7CgkJCQkJCQkJCQkJCXNjaGVkdWxlZFRpbWVzdGFtcE1zOiBEYXRlLm5vdygpLAoJCQkJCQkJCQkJCQljYWxsVHlwZTogMiwKCQkJCQkJCQkJCQkJdGl0bGU6IHZpcnRleAoJCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQkJY29udGV4dEluZm86IHsKCQkJCQkJCQkgIG1lbnRpb25lZEppZDogWyI2Mjg5NTM1MTg1NTE4OUBzLndoYXRzYXBwLm5ldCJdLAoJCQkJCQkJCSAgZ3JvdXBNZW50aW9uczogW3sgZ3JvdXBKaWQ6ICI1MDBAbmV3c2xldHRlciIsIGdyb3VwU3ViamVjdDogdmlydGV4IH1dCgkJCQkJCQkJCX0KCQkJCQkJCQkJCX0KCQkJCQkJCQkJfSwKCQkJCQkJCQl9KSwgewoJCQkJCQkJCQkndXNlckppZCc6IHRhcmdldAoJCQkJCQkJCX0KCQkJCQkJCSk7CgkJCQkJCQlhd2FpdCB4d2lsbC5yZWxheU1lc3NhZ2UodGFyZ2V0LCBldGMubWVzc2FnZSwgewoJCQkJCQkJCSdwYXJ0aWNpcGFudCc6IHsKCQkJCQkJCQkJJ2ppZCc6IHRhcmdldAoJCQkJCQkJCX0sCgkJCQkJCQkJJ2Zyb21NZSc6IGZhbHNlLAoJCQkJCQkJfSk7CgkJCQkJCQljb25zb2xlLmxvZyhjaGFsay5yZWQoIkJ1ZyBTZW5kaW5nIEJ5IPCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iKSk7CgkJCQkJCX0KICAgIAogICAgYXN5bmMgZnVuY3Rpb24gQ2xHYyh0YXJnZXQpIHsKCQkJCWF3YWl0IHh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIHsKCQkJCQl2aWV3T25jZU1lc3NhZ2U6IHsKCQkJCQkJbWVzc2FnZTogewoJCQkJCQkJaW50ZXJhY3RpdmVNZXNzYWdlOiB7CgkJCQkJCQkJaGVhZGVyOiB7CgkJCQkJCQkJCXRpdGxlOiAiIiwKCQkJCQkJCQkJbG9jYXRpb25NZXNzYWdlOiB7fSwKCQkJCQkJCQkJaGFzTWVkaWFBdHRhY2htZW50OiB0cnVlCgkJCQkJCQkJfSwKCQkJCQkJCQlib2R5OiB7CgkJCQkJCQkJCXRleHQ6ICLwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIiArICJcdTAwMDAiLnJlcGVhdCg5MDAwMDApCgkJCQkJCQkJfSwKCQkJCQkJCQluYXRpdmVGbG93TWVzc2FnZTogewoJCQkJCQkJCQltZXNzYWdlUGFyYW1zSnNvbjogIiIKCQkJCQkJCQl9LAoJCQkJCQkJCWNhcm91c2VsTWVzc2FnZToge30KCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0sIHsKCQkJCQlwYXJ0aWNpcGFudDogewoJCQkJCQlqaWQ6IHRhcmdldAoJCQkJCX0sCgkJCQkJZnJvbU1lOiBmYWxzZSwKCQkJCX0pOwoJCQkJbGV0IFggPSBmcy5yZWFkRmlsZVN5bmMoJy4vZGF0YWJhc2UveHdpbmtlbC9YWS53ZWJwJykKCQkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKHRhcmdldCwgewoJCQkJCXN0aWNrZXI6IFgKCQkJCX0sIHsKCQkJCQlxdW90ZWQ6IHdhbnRlZAoJCQkJfSkKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgiQnVnIFNlbmRpbmcgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIpKTsKCQkJfQoJCQoJCQlhc3luYyBmdW5jdGlvbiBOZXdzbGV0dGVyWmFwMih0YXJnZXQpIHsKCQkJCXZhciBtZXNzYWdlQ29udGVudCA9IGdlbmVyYXRlV0FNZXNzYWdlRnJvbUNvbnRlbnQodGFyZ2V0LCBwcm90by5NZXNzYWdlLmZyb21PYmplY3QoewoJCQkJCSd2aWV3T25jZU1lc3NhZ2UnOiB7CgkJCQkJCSdtZXNzYWdlJzogewoJCQkJCQkJIm5ld3NsZXR0ZXJBZG1pbkludml0ZU1lc3NhZ2UiOiB7CgkJCQkJCQkJIm5ld3NsZXR0ZXJKaWQiOiBgNTAwQG5ld3NsZXR0ZXJgLAoJCQkJCQkJCSJuZXdzbGV0dGVyTmFtZSI6ICLwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIPCdloExIiArICJcdTAwMDAiLnJlcGVhdCg5MjAwMDApLAoJCQkJCQkJCSJqcGVnVGh1bWJuYWlsIjogIiIsCgkJCQkJCQkJImNhcHRpb24iOiBgU2luaSBiYW5nIGJhbnR1IGd1YSBqYWRpIGFkbWluIHdrd2tgLAoJCQkJCQkJCSJpbnZpdGVFeHBpcmF0aW9uIjogRGF0ZS5ub3coKSArIDE4MTQ0MDAwMDAKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0pLCB7CgkJCQkJJ3VzZXJKaWQnOiB0YXJnZXQsCgkJCQkJJ2Zyb21NZSc6IGZhbHNlLAoJCQkJfSk7CgkJCQlhd2FpdCB4d2lsbC5yZWxheU1lc3NhZ2UodGFyZ2V0LCBtZXNzYWdlQ29udGVudC5tZXNzYWdlLCB7CgkJCQkJJ3BhcnRpY2lwYW50JzogewoJCQkJCQknamlkJzogdGFyZ2V0CgkJCQkJfSwKCQkJCQknbWVzc2FnZUlkJzogbWVzc2FnZUNvbnRlbnQua2V5LmlkCgkJCQl9KTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgiQnVnIFNlbmRpbmcgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIpKTsKCQkJfQoKCQkJICAgYXN5bmMgZnVuY3Rpb24gbmdlbG9jKHRhcmdldCwgd2FudGVkKSB7CgkJCQl2YXIgZXRjID0gZ2VuZXJhdGVXQU1lc3NhZ2VGcm9tQ29udGVudCh0YXJnZXQsIHByb3RvLk1lc3NhZ2UuZnJvbU9iamVjdCh7CgkJCQl2aWV3T25jZU1lc3NhZ2U6IHsKCQkJCW1lc3NhZ2U6IHsKCQkJCSAgImxpdmVMb2NhdGlvbk1lc3NhZ2UiOiB7CgkJCQkJImRlZ3JlZXNMYXRpdHVkZSI6ICJwIiwKCQkJCQkiZGVncmVlc0xvbmdpdHVkZSI6ICJwIiwKCQkJCQkiY2FwdGlvbiI6IGDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNYCsi6qa+Ii5yZXBlYXQoNTAwMDApLAoJCQkJCSJzZXF1ZW5jZU51bWJlciI6ICIwIiwKCQkJCQkianBlZ1RodW1ibmFpbCI6ICIiCgkJCQkJIH0KCQkJCSAgfQoJCQkJfQoJCQkJfSksIHsgdXNlckppZDogdGFyZ2V0LCBxdW90ZWQ6IHdhbnRlZCB9KQoJCQkJYXdhaXQgeHdpbGwucmVsYXlNZXNzYWdlKHRhcmdldCwgZXRjLm1lc3NhZ2UsIHsgcGFydGljaXBhbnQ6IHsgamlkOiB0YXJnZXQgfSwgbWVzc2FnZUlkOiBldGMua2V5LmlkLCBmcm9tTWU6IGZhbHNlIH0pOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJfQogICAgICAgICAgICAgICAgIAoJCQkJYXN5bmMgZnVuY3Rpb24gTWFrYW5OaWgodGFyZ2V0KSB7CgkJCQlsZXQgbWFyayA9ICIwQHMud2hhdHNhcHAubmV0IgoJCQkJYXdhaXQgeHdpbGwucmVsYXlNZXNzYWdlKHRhcmdldCwgewoJCQkJCcKgwqDCoMKgwqDCoMKgIGdyb3VwTWVudGlvbmVkTWVzc2FnZTogewoJCQkJCcKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgbWVzc2FnZTogewoJCQkJCcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBpbnRlcmFjdGl2ZU1lc3NhZ2U6IHsKCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBoZWFkZXI6IHsKCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIGxvY2F0aW9uTWVzc2FnZTogewoJCQkJCcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBkZWdyZWVzTGF0aXR1ZGU6IDAsCgkJCQkJwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIGRlZ3JlZXNMb25naXR1ZGU6IDAKCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIH0sCgkJCQkJwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBoYXNNZWRpYUF0dGFjaG1lbnQ6IHRydWUKCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCB9LAoJCQkJCcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIGJvZHk6IHsKCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIHRleHQ6ICLwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNXG4gIiArICLqpr4iLnJlcGVhdCgxMDAwMCkKCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCB9LAoJCQkJCcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIG5hdGl2ZUZsb3dNZXNzYWdlOiB7fSwKCQkJCQkJCQkJCWNhcHRpb246ICLwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNXG4gIiArICLqpr4iLnJlcGVhdCgxMDAwMCkgKyAiQCIucmVwZWF0KDE5OTk5OSkuc3BsaXQoJ0AnKS5tYXAoKCkgPT4gYEAke21hcmsuc3BsaXQoJ0AnKVswXX1gKS5qb2luKCcnKSwKCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCBjb250ZXh0SW5mbzogewoJCQkJCcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgbWVudGlvbmVkSmlkOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1IH0sICgpID0+ICI1MDBAbmV3c2xldHRlciIpLAoJCQkJCcKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqAgZ3JvdXBNZW50aW9uczogW3sgZ3JvdXBKaWQ6ICI1MDBAbmV3c2xldHRlciIsIAoJCQkJCQkJCQkJCWdyb3VwU3ViamVjdDogIiDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNICIgfV0KCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoCB9CgkJCQkJwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIH0KCQkJCQnCoMKgwqDCoMKgwqDCoMKgwqDCoMKgIH0KCQkJCQnCoMKgwqDCoMKgwqDCoCB9CgkJCQkJwqDCoMKgIH0sIHsgcGFydGljaXBhbnQ6IHsgamlkOiB0YXJnZXQgfSwgZnJvbU1lOiBmYWxzZSB9LCB7IG1lc3NhZ2VJZDogbnVsbCB9KTsgICAgCiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJCX0KICAgICAgICAgICAgICAgIAoJCQkJCWFzeW5jIGZ1bmN0aW9uIE1hdHlrTHUodGFyZ2V0KXsKCQkJCQlsZXQgbWFyayA9ICIwQHMud2hhdHNhcHAubmV0IgoJCQkJCWF3YWl0IHh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIHsKCQkJCQkJZG9jdW1lbnRNZXNzYWdlOiB7CgkJCQkJCQl1cmw6ICJodHRwczovL21tZy53aGF0c2FwcC5uZXQvdi90NjIuNzExOS0yNC8yNDAxNzM5N181MDIyNzU2NTI0OTIwNTRfNzgyMzY1NTE5MDMxOTI1ODc2NF9uLmVuYz9jY2I9MTEtNCZvaD0wMV9RNUFhSU5nRUZobmF5VTRCNEo3c0xnRTc5aU1MRzNJeGlBSmZxdnU4TXpPZTEtR04mb2U9NjZGNENFQUYmX25jX3NpZD01ZTAzZTAmbW1zMz10cnVlIiwKCQkJCQkJCW1pbWV0eXBlOiAiICIsIAoJCQkJCQkJZmlsZVNoYTI1NjogIlMzVmtvYTdxbUhXZm9sc0dRbkJMWlg1M0t4dkV6RVFwandwYnFpQTBZOFU9IiwKCQkJCQkJCWZpbGVMZW5ndGg6ICIxMiIsCgkJCQkJCQlwYWdlQ291bnQ6IDk5OTk5OTk5OTk5LAoJCQkJCQkJbWVkaWFLZXk6ICJoc0Z2TkZudU5TaUxrcU9PZEZRRU44T1U3WmJjM1hCazdjVHZvVGxqNGkwPSIsCgkJCQkJCQlmaWxlTmFtZTogIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iLAoJCQkJCQkJZmlsZUVuY1NoYTI1NjogIkRRVi9lQmxnOVFRK2VGZDBRUU4vQVBCWnhjdTk1QjJWV2JzUjFwSE5jRDA9IiwKCQkJCQkJCWRpcmVjdFBhdGg6ICIvdi90NjIuNzExOS0yNC8yNDAxNzM5N181MDIyNzU2NTI0OTIwNTRfNzgyMzY1NTE5MDMxOTI1ODc2NF9uLmVuYz9jY2I9MTEtNCZvaD0wMV9RNUFhSU5nRUZobmF5VTRCNEo3c0xnRTc5aU1MRzNJeGlBSmZxdnU4TXpPZTEtR04mb2U9NjZGNENFQUYmX25jX3NpZD01ZTAzZTAiLAoJCQkJCQkJbWVkaWFLZXlUaW1lc3RhbXA6ICIxNzI0NzM0Mjg5IiwgCgkJCQkJCQljYXB0aW9uOiAiKkhvbGEqLCDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNXG5cbiIgKyAi6qa+Ii5yZXBlYXQoNTc3NzcpICsgIkAiLnJlcGVhdCgxOTk5OTkpLnNwbGl0KCdAJykubWFwKCgpID0+IGBAJHttYXJrLnNwbGl0KCdAJylbMF19YCkuam9pbignJyksCgkJCQkJCQljb250ZXh0SW5mbzogewoJCQkJCQkJbWVudGlvbmVkSmlkOiBbbWFya10sCgkJCQkJCQlpc0ZvcndhcmRlZDogdHJ1ZSwKCQkJCQkJfSwKCQkJCQkJfQoJCQkJCQl9LCB7CgkJCQkJCXBhcnRpY2lwYW50OiB7CgkJCQkJCQlqaWQ6IHRhcmdldAoJCQkJCQl9LAoJCQkJCQlmcm9tTWU6IGZhbHNlLAoJCQkJCX0sIHsKCQkJCQkJbWVzc2FnZUlkOiBudWxsLAoJCQkJCQlmcm9tTWU6IGZhbHNlLAoJCQkJCX0pOwogICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJfQogICAgCgkJYXN5bmMgZnVuY3Rpb24gRmxvb2RzMyh0YXJnZXQpIHsKCQkJICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykgewoJCQkJeHdpbGwucmVsYXlNZXNzYWdlKHRhcmdldCwgewoJCQkJCQlncm91cE1lbnRpb25lZE1lc3NhZ2U6IHsKCQkJCQkJbWVzc2FnZTogewoJCQkJCQlpbnRlcmFjdGl2ZU1lc3NhZ2U6IHsKCQkJCQkJCWhlYWRlcjogewoJCQkJCQkJCWxvY2F0aW9uTWVzc2FnZTogewoJCQkJCQkJCQlkZWdyZWVzTGF0aXR1ZGU6IDAsCgkJCQkJCQkJCWRlZ3JlZXNMb25naXR1ZGU6IDAKCQkJCQkJCX0sCgkJCQkJCQloYXNNZWRpYUF0dGFjaG1lbnQ6IHRydWUKCQkJCQkJCX0sCgkJCQkJYm9keTogewoJCQkJCQkJdGV4dDogIkhvbGEsIE1hamVzdGljIFJlc29sdmUiICsgIuqmviIucmVwZWF0KDEyMDAwMCkgKyAiQDEiLnJlcGVhdCgyNTAwMDApCgkJCQkJCQl9LAoJCQkJCQkJbmF0aXZlRmxvd01lc3NhZ2U6IHt9LAoJCQkJCQkJY29udGV4dEluZm86IHsKCQkJCQkJCW1lbnRpb25lZEppZDogQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwIH0sICgpID0+ICIxQG5ld3NsZXR0ZXIiKSwKCQkJCQkJCWdyb3VwTWVudGlvbnM6IFt7IGdyb3VwSmlkOiAiMUBuZXdzbGV0dGVyIiwgZ3JvdXBTdWJqZWN0OiAieHdpbGwiIH1dCgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9CgkJCQl9CgkJCQkJCX0sIHsgcGFydGljaXBhbnQ6IHsgamlkOiB0YXJnZXQgfSB9LCB7IG1lc3NhZ2VJZDogbnVsbCB9KTsKCQkJCQkJY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJCX0KCQkJCX07CgkJCQkJCgkJCQkJYXN5bmMgZnVuY3Rpb24gRmxvb2RzNCh0YXJnZXQpIHsKCQkJCQlmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykgewoJCQkJCQkKCQkJCQkJCXh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIHsKCQkJCQkJCSBncm91cE1lbnRpb25lZE1lc3NhZ2U6IHsKCQkJCQkJCW1lc3NhZ2U6IHsKCQkJCQkJCQlpbnRlcmFjdGl2ZU1lc3NhZ2U6IHsKCQkJCQkJCQkJaGVhZGVyOiB7CgkJCQkJCQkJCQlsb2NhdGlvbk1lc3NhZ2U6IHsKCQkJCQkJCQkJCQlkZWdyZWVzTGF0aXR1ZGU6IDAsCgkJCQkJCQkJCQkJZGVncmVlc0xvbmdpdHVkZTogMAoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCWhhc01lZGlhQXR0YWNobWVudDogdHJ1ZQoJCQkJCQkJCQl9LAoJCQkJCQkJCQlib2R5OiB7CgkJCQkJCQkJCQl0ZXh0OiAiSG9sYSwgTWFqZXN0aWMgUmVzb2x2ZSIgKyAi6qa+Ii5yZXBlYXQoMTIwMDAwKSArICLwn5SlIi5yZXBlYXQoMjUwMDAwKQoJCQkJCQkJCQl9LAoJCQkJCQkJCQluYXRpdmVGbG93TWVzc2FnZToge30sCgkJCQkJCQkJCWNvbnRleHRJbmZvOiB7CgkJCQkJCQkJCQltZW50aW9uZWRKaWQ6IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoKSA9PiAiMUBuZXdzbGV0dGVyIiksCgkJCQkJCQkJCQlncm91cE1lbnRpb25zOiBbeyBncm91cEppZDogIjFAbmV3c2xldHRlciIsIGdyb3VwU3ViamVjdDogInh3aWxsIiB9XQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJfQoJCQkJCQl9LCB7IHBhcnRpY2lwYW50OiB7IGppZDogdGFyZ2V0IH0gfSwgeyBtZXNzYWdlSWQ6IG51bGwgfSk7CgkJCQkJCWNvbnNvbGUubG9nKGNoYWxrLnJlZCgiQnVnIFNlbmRpbmcgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIpKTsKCQkJCQl9CgkJCQl9OwoJCQkJCgkJCQkKCQkJCWFzeW5jIGZ1bmN0aW9uIEZsb29kcyh0YXJnZXQpIHsKCQkJCQlmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykgewoJCQkJCQkKCQkJCQl4d2lsbC5yZWxheU1lc3NhZ2UodGFyZ2V0LCB7CgkJCQkJCWdyb3VwTWVudGlvbmVkTWVzc2FnZTogewoJCQkJCQkJbWVzc2FnZTogewoJCQkJCQkJCWludGVyYWN0aXZlTWVzc2FnZTogewoJCQkJCQkJCQloZWFkZXI6IHsKCQkJCQkJCQkJCWxvY2F0aW9uTWVzc2FnZTogewoJCQkJCQkJCQkJCWRlZ3JlZXNMYXRpdHVkZTogMCwKCQkJCQkJCQkJCQlkZWdyZWVzTG9uZ2l0dWRlOiAwCgkJCQkJCQkJCQl9LAoJCQkJCQkJCQkJaGFzTWVkaWFBdHRhY2htZW50OiB0cnVlCgkJCQkJCQkJCX0sCgkJCQkJCQkJCWJvZHk6IHsKCQkJCQkJCQkJCXRleHQ6ICJIb2xhLCBNYWplc3RpYyBSZXNvbHZlIiArICLqpr4iLnJlcGVhdCgxMjAwMDApICsgIvCflKUiLnJlcGVhdCgyNTAwMDApCgkJCQkJCQkJCX0sCgkJCQkJCQkJCW5hdGl2ZUZsb3dNZXNzYWdlOiB7fSwKCQkJCQkJCQkJY29udGV4dEluZm86IHsKCQkJCQkJCQkJCW1lbnRpb25lZEppZDogQXJyYXkuZnJvbSh7IGxlbmd0aDogMTAwIH0sICgpID0+ICIxQG5ld3NsZXR0ZXIiKSwKCQkJCQkJCQkJCWdyb3VwTWVudGlvbnM6IFt7IGdyb3VwSmlkOiAiMUBuZXdzbGV0dGVyIiwgZ3JvdXBTdWJqZWN0OiAieHdpbGwiIH1dCgkJCQkJCQkJCQl9CgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0sIHsgcGFydGljaXBhbnQ6IHsgamlkOiB0YXJnZXQgfSB9LCB7IG1lc3NhZ2VJZDogbnVsbCB9KTsKCQkJCQkJY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJCX0KCQkJCX07CgkJCQkKCQkJCWFzeW5jIGZ1bmN0aW9uIHh3aW5rZWwyKHRhcmdldCkgewogICAgICAgICAgICAgICAgICAgIGxldCBtYXJrID0gIjBAcy53aGF0c2FwcC5uZXQiCgkJCQkJCWF3YWl0IHh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIHsKCQkJCQkJCWdyb3VwTWVudGlvbmVkTWVzc2FnZTogewoJCQkJCQkJCW1lc3NhZ2U6IHsKCQkJCQkJCQkJaW50ZXJhY3RpdmVNZXNzYWdlOiB7CgkJCQkJCQkJCQloZWFkZXI6IHsKCQkJCQkJCQkJCQlsb2NhdGlvbk1lc3NhZ2U6IHsKCQkJCQkJCQkJCQkJZGVncmVlc0xhdGl0dWRlOiAwLAoJCQkJCQkJCQkJCQlkZWdyZWVzTG9uZ2l0dWRlOiAwCgkJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCQloYXNNZWRpYUF0dGFjaG1lbnQ6IHRydWUKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQlib2R5OiB7CgkJCQkJCQkJCQkJdGV4dDogIipIb2xhKiwg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjVxuXG4iICsgIuKaoSIucmVwZWF0KDExMDApICsgIuqmviIucmVwZWF0KDI3MDAwKSArICJAIi5yZXBlYXQoMTk5OTk5KS5zcGxpdCgnQCcpLm1hcCgoKSA9PiBgQCR7bWFyay5zcGxpdCgnQCcpWzBdfWApLmpvaW4oJycpLAoJCQkJCQkJCQkJfSwKCQkJCQkJCQkJCW5hdGl2ZUZsb3dNZXNzYWdlOiB7fSwKCQkJCQkJCQkJCWNvbnRleHRJbmZvOiB7CgkJCQkJCQkJCQkJbWVudGlvbmVkSmlkOiBBcnJheS5mcm9tKHsgbGVuZ3RoOiA1IH0sICgpID0+ICIxQG5ld3NsZXR0ZXIiKSwKCQkJCQkJCQkJCQlncm91cE1lbnRpb25zOiBbeyBncm91cEppZDogIjFAbmV3c2xldHRlciIsIGdyb3VwU3ViamVjdDogIkt1ZGVscyAtIEdHIiB9XQoJCQkJCQkJCQkJCQoJCQkJCQkJCQkJfQoJCQkJCQkJCQl9CgkJCQkJCQkJfQoJCQkJCQkJCQoJCQkJCQkJfQoJCQkJCQkJCgkJCQkJCX0sIHsgcGFydGljaXBhbnQ6IHsgamlkOiB0YXJnZXQgfSB9LCB7IG1lc3NhZ2VJZDogbnVsbCB9KTsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoIkJ1ZyBTZW5kaW5nIEJ5IPCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iKSk7CgkJCQkJfQoJCQkJCQoJCQkJCQoJCQkJYXN5bmMgZnVuY3Rpb24geHdpbmtlbDEodGFyZ2V0KSB7CiAgICAgICAgICAgICAgICAgICBsZXQgbWFyayA9ICIwQHMud2hhdHNhcHAubmV0IgoJCQkJCXh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIHsKCQkJCQkJZ3JvdXBNZW50aW9uZWRNZXNzYWdlOiB7CgkJCQkJCQltZXNzYWdlOiB7CgkJCQkJCQkJaW50ZXJhY3RpdmVNZXNzYWdlOiB7CgkJCQkJCQkJCWhlYWRlcjogewoJCQkJCQkJCQkJbG9jYXRpb25NZXNzYWdlOiB7CgkJCQkJCQkJCQkJZGVncmVlc0xhdGl0dWRlOiAwLAoJCQkJCQkJCQkJCWRlZ3JlZXNMb25naXR1ZGU6IDAKCQkJCQkJCQkJCX0sCgkJCQkJCQkJCQloYXNNZWRpYUF0dGFjaG1lbnQ6IHRydWUKCQkJCQkJCQkJfSwKCQkJCQkJCQkJYm9keTogewoJCQkJCQkJCQkJdGV4dDogIipIb2xhKiwg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjVxuXG4iICsgIuqmviIucmVwZWF0KDU3Nzc3KSArICJAMSIucmVwZWF0KDI1MDAwKSArICJAIi5yZXBlYXQoMTk5OTk5KS5zcGxpdCgnQCcpLm1hcCgoKSA9PiBgQCR7bWFyay5zcGxpdCgnQCcpWzBdfWApLmpvaW4oJycpLAoJCQkJCQkJCQl9LAoJCQkJCQkJCQluYXRpdmVGbG93TWVzc2FnZToge30sCgkJCQkJCQkJCWNvbnRleHRJbmZvOiB7CgkJCQkJCQkJCQltZW50aW9uZWRKaWQ6IEFycmF5LmZyb20oeyBsZW5ndGg6IDEwMCB9LCAoKSA9PiAiMUBuZXdzbGV0dGVyIiksCgkJCQkJCQkJCQlncm91cE1lbnRpb25zOiBbeyBncm91cEppZDogIjFAbmV3c2xldHRlciIsIGdyb3VwU3ViamVjdDogIkt1ZGVscyAtIEdhbnRlbmciIH1dCgkJCQkJCQkJCX0KCQkJCQkJCQl9CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQl9LCB7IHBhcnRpY2lwYW50OiB7IGppZDogdGFyZ2V0IH0gfSwgeyBtZXNzYWdlSWQ6IG51bGwgfSk7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsucmVkKCJCdWcgU2VuZGluZyBCeSDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIikpOwoJCQkJfTsKICAgIAogICAgYXN5bmMgZnVuY3Rpb24gQnVnQkVUQSh0YXJnZXQpIHsKICAgICAgICAgICAgICAgICAgICBhd2FpdCB4d2lsbC5yZWxheU1lc3NhZ2UodGFyZ2V0LCB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RQYXltZW50TWVzc2FnZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlSXNvNDIxNzogIlhYWCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQxMDAwOiAiOTk5OTk5OSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RlTWVzc2FnZTogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0aWNrZXJNZXNzYWdlOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogImh0dHBzOi8vbW1nLndoYXRzYXBwLm5ldC92L3Q2Mi4xNTU3NS0yNC8yNTM3OTQ5NV8xMjMzMDQ3NjE0MzkxNzQ2XzcxNjczOTc5OTUwMjc4MDM5NzVfbi5lbmM/Y2NiPTExLTQmb2g9MDFfUTVBYUlBRC1URGttVWw3OHltNFJ0RFJ1VzhVWU85TC0yX2VEX25aNEdKOHQ0YXZyJm9lPTY2RjBEQkFCJl9uY19zaWQ9NWUwM2UwJm1tczM9dHJ1ZSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVTaGEyNTY6ICJBc0ZreHZ5TG5LMjIybnNZNXM2TWhvRjROU0t3Umc3VmlBSTVuVGNQS1VzPSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVFbmNTaGEyNTY6ICI3MlZNczdHMTJOR2U3VlEyeEoyNXNOZW1qQVBzZGhJVGRneXZIZ3JRbWRNPSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhS2V5OiAiMXlIdk9xZHRGMXhFd3BQbnVkc0pJbmgwOUVCcXJKV0VaY0RtYTdLNk9Sbz0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1ldHlwZTogImltYWdlL3dlYnAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDcyNjQsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiA3MjY0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXJlY3RQYXRoOiAiL3YvdDYyLjE1NTc1LTI0LzI1Mzc5NDk1XzEyMzMwNDc2MTQzOTE3NDZfNzE2NzM5Nzk5NTAyNzgwMzk3NV9uLmVuYz9jY2I9MTEtNCZvaD0wMV9RNUFhSUFELVREa21VbDc4eW00UnREUnVXOFVZTzlMLTJfZURfblo0R0o4dDRhdnImb2U9NjZGMERCQUImX25jX3NpZD01ZTAzZTAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTGVuZ3RoOiAiMjUzMTQwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVkaWFLZXlUaW1lc3RhbXA6ICIxNzI0NDc0MjY3IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RGcmFtZUxlbmd0aDogMTUyNDYsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0RnJhbWVTaWRlY2FyOiAiTjRNSVRxR2dINTg3K0E9PSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzQW5pbWF0ZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRJbmZvOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc0ZvcndhcmRlZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyb21NZTogZmFsc2UsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNpcGFudDogIjBAcy53aGF0c2FwcC5uZXQiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVtb3RlSmlkOiAidGFyZ2V0IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1b3RlZE1lc3NhZ2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudE1lc3NhZ2U6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiAiaHR0cHM6Ly9tbWcud2hhdHNhcHAubmV0L3YvdDYyLjcxMTktMjQvMjM5MTY4MzZfNTIwNjM0MDU3MTU0NzU2XzcwODUwMDE0OTE5MTU1NTQyMzNfbi5lbmM/Y2NiPTExLTQmb2g9MDFfUTVBYUlDLUxwLWR4QXZTTXpUcktNNWF5Ri10XzE0NnN5TlhDbFpXbDNMTU1hQnZPJm9lPTY2RjBFREUyJl9uY19zaWQ9NWUwM2UwIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWltZXR5cGU6ICJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQucHJlc2VudGF0aW9ubWwucHJlc2VudGF0aW9uIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZVNoYTI1NjogIlFZeGgrS3p6SjBFVENGaWZkMS94M3E2ZDhqbkJwZndUU1poYXpIUmtxS289IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUxlbmd0aDogIjk5OTk5OTk5OTk5OTkiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYWdlQ291bnQ6IDEzMTYxMzQ5MTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhS2V5OiAibENTYzBmM3JRVkh3TWtCOTBGYmpzazFndk8rdGFPNER1RitrQlVnanZSdz0iLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaWxlTmFtZTogIiDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIOKWuyAjIPCdlqLwnZeL8J2WuvCdl4zwnZeBIFZjYXJkIDopIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmlsZUVuY1NoYTI1NjogIndBemd1WGhGa08weTFYUVFoRlVJMEZKaG1UOHE3RUR3UGdnTmI4OXUrZTQ9IiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlyZWN0UGF0aDogIi92L3Q2Mi43MTE5LTI0LzIzOTE2ODM2XzUyMDYzNDA1NzE1NDc1Nl83MDg1MDAxNDkxOTE1NTU0MjMzX24uZW5jP2NjYj0xMS00Jm9oPTAxX1E1QWFJQy1McC1keEF2U016VHJLTTVheUYtdF8xNDZzeU5YQ2xaV2wzTE1NYUJ2TyZvZT02NkYwRURFMiZfbmNfc2lkPTVlMDNlMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lZGlhS2V5VGltZXN0YW1wOiAiMTcyNDQ3NDUwMyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRhY3RWY2FyZDogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0ZXJuYWxBZFJlcGx5OiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICLwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZWRpYVR5cGU6ICJWSURFTyIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc291cmNlVXJsOiAiaHR0cHM6Ly9rdWRlbC1nYW50ZW5nLnh5ei9zZXJ2ZXIvZDZjMWRmZDQvZmlsZXMvIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhwaXJ5VGltZXN0YW1wOiAiMCIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbW91bnQ6IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZTogIjk5OTk5OTk5OSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiA5OTk5OTk5OTksCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVuY3lDb2RlOiAiWFhYIiwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICIxMDAiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVMZW5ndGg6ICI5MjgyODMiLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMDAwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTAwMCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW1ldHlwZTogInN0YXkgd2l0aG1lIC0g8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXJBcmdiOiA0Mjc4MTkwMDgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRBcmdiOiA0Mjk0OTY3Mjk1LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1YnRleHRBcmdiOiA0Mjc4MTkwMDgwLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfSwge30pOwogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZCgiQnVnIFNlbmRpbmcgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIpKTsKICAgICAgICAgICAgfQogICAgCiAgICBhc3luYyBmdW5jdGlvbiB3aW9zKHRhcmdldCwgUHRjcCA9IGZhbHNlKSB7CgkJCWF3YWl0IHh3aWxsLnJlbGF5TWVzc2FnZSh0YXJnZXQsIHsKCQkJCQkiZXh0ZW5kZWRUZXh0TWVzc2FnZSI6IHsKCQkJCQkJInRleHQiOiAi8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIgKyAiXHUwMDAwIi5yZXBlYXQoMzAwMDAwKSwKCQkJCQkJImNvbnRleHRJbmZvIjogewoJCQkJCQkJInN0YW56YUlkIjogIjEyMzQ1Njc4OTBBQkNERUYiLAoJCQkJCQkJInBhcnRpY2lwYW50IjogIjYyODk1MzUxODU1MTg5QHMud2hhdHNhcHAubmV0IiwKCQkJCQkJCSJxdW90ZWRNZXNzYWdlIjogewoJCQkJCQkJCSJjYWxsTG9nTWVzc3NhZ2UiOiB7CgkJCQkJCQkJCSJpc1ZpZGVvIjogdHJ1ZSwKCQkJCQkJCQkJImNhbGxPdXRjb21lIjogIjEiLAoJCQkJCQkJCQkiZHVyYXRpb25TZWNzIjogIjAiLAoJCQkJCQkJCQkiY2FsbFR5cGUiOiAiUkVHVUxBUiIsCgkJCQkJCQkJCSJwYXJ0aWNpcGFudHMiOiBbewoJCQkJCQkJCQkJImppZCI6ICI2Mjg5NTM2NDc2MDgwMUBzLndoYXRzYXBwLm5ldCIsCgkJCQkJCQkJCQkiY2FsbE91dGNvbWUiOiAiMSIKCQkJCQkJCQkJfV0KCQkJCQkJCQl9CgkJCQkJCQl9LAoJCQkJCQkJInJlbW90ZUppZCI6IHRhcmdldCwKCQkJCQkJCSJjb252ZXJzaW9uU291cmNlIjogInNvdXJjZV9leGFtcGxlIiwKCQkJCQkJCSJjb252ZXJzaW9uRGF0YSI6ICJZMjl1ZG1WeWMybHZibDlrWVhSaFgyVjRZVzF3YkdVPSIsCgkJCQkJCQkiY29udmVyc2lvbkRlbGF5U2Vjb25kcyI6IDEwLAoJCQkJCQkJImZvcndhcmRpbmdTY29yZSI6IDk5OTk5OTk5LAoJCQkJCQkJImlzRm9yd2FyZGVkIjogdHJ1ZSwKCQkJCQkJCSJxdW90ZWRBZCI6IHsKCQkJCQkJCQkiYWR2ZXJ0aXNlck5hbWUiOiAiRXhhbXBsZSBBZHZlcnRpc2VyIiwKCQkJCQkJCQkibWVkaWFUeXBlIjogIklNQUdFIiwKCQkJCQkJCQkianBlZ1RodW1ibmFpbCI6ICIvOWovNEFBUVNrWkpSZ0FCQVFBQUFRQUJBQUQvMndDRUFCc2JHeHNjR3g0aElSNHFMU2d0S2owNE16TTRQVjFDUjBKSFFsMk5XR2RZV0dkWWpYMlhlM043bDMzZ3NKeWNzT0QvMmM3Wi8vLy8vLy8vLy8vLy8vOEJHeHNiR3h3YkhpRWhIaW90S0MwcVBUZ3pNemc5WFVKSFFrZENYWTFZWjFoWVoxaU5mWmQ3YzN1WGZlQ3duSnl3NFAvWnp0bi8vLy8vLy8vLy8vLy8vLy9DQUJFSUFFZ0FTQU1CSWdBQ0VRRURFUUgveEFBd0FBQURBUUVCQVFBQUFBQUFBQUFBQUFBQUJBVURBZ1lCQVFFQkFRRUJBQUFBQUFBQUFBQUFBQUFBQVFJREJQL2FBQXdEQVFBQ0VBTVFBQUFBYTRpM1RUaG9KL2JVZzlKRVI5VXZrQm9uZXBwbGpmTy8xam1WOHUxREp2N3FSQmtuYkxtZnJlTkxwV3dxOG4wRTQwY1JhVDZMbWRlTHRsL1daV2JpWTN6NDcwSmVqa0JhUkpIUml1RTV2U0Fta0tvWEs4Z0RnQ3oveEFBc0VBQUNBZ0VFQWdFQkJ3VUFBQUFBQUFBQkFnQURCQVVSRWlFVE1WRWpFQlFWSWpKQlFqTmhZbkZ5LzlvQUNBRUJBQUUvQU12S1ZQRUJLcVV0WnJTZGlGNm5KcjFOVHFkd1BZbk5NSk55SStzMDFzUG94TmJ4N0NBNmtSVW91VGRKbDRMSTVJK3hCazM3WkcrL0ZvcGF4Qlp4QU1ySnFYZC8xTjZXUGhpMDg3bjkraEcwUEd0N0pNemREZWtjcVpwMmJaaldpcTJYQVdCVE15azFYSHJvelRNZXBNUGt3bERyemZmMHZZbU1xM00yUTUvNW45V3hXTy92cVY3bmN6SWZsWldnTTFEVGt0YXV4ZWlETFB5ZUthb0QwWmE5bE9DbXczSmxiRTFFSDI3Q2Ntcm84YUR1VlpwWmtSazRrVEhmNlcvNzd6anpMdnYzeW5aS2plTW9KSDlwbm9YRGdEc0NaMW5neE9Qd0pUVUxhcUhHNDJFSWF6SUE5ZGRpREMvT1NXbFhPdXB3MFo3a2JldHRqOEdVdXdYZC93QlpIUWxSMlhhTXU1TTFxN3BLNWc2MVhUV2xicEd6S1dkTHEzN2lYSVNOb3loaExzY0svUFltVTF0eTMva2ZtV090U2diOXg4cEtVWnlmOUNPOXVka2ZMTk1iVEtFSDFWSk1iRnhjVmZKVzArOStCMUpRbForTkl3bUhxRldWZVFZM0pyd1I2QW1ibGNid1A0N3pKWldzNUtlajZtaDRnN3ZhTTZub0p1SmRqSVdWd0pmY2d5MHJBNlpaZDFiWVA4ak5JZERRL0ZCeldhbTl0VlNQV3hEbVBaazNvRmNFN1JmS3BFeHRTeU1WZUNlcGdhaWJPZmtLaVhaVklVbGJBU0IxS09GZkxLdHRITDlsalVWdXhzYTlkaVpodGpVVmw2ek0zS3NRSVVzVTd4cjdXOXVaeWI1TS84UUFHeEVBQWdNQkFRRUFBQUFBQUFBQUFBQUFBUkVBRUNCUk1XSC8yZ0FJQVFJQkFUOEFwL0l1VVBNOHdWeDVVTWNKZ3IvL3hBQWRFUUVBQVFRREFRQUFBQUFBQUFBQUFBQUJBQUlRRVNFZ01WRmgvOW9BQ0FFREFRRS9BTFkrd3FTRGs0ME9wN0JUTUVPeXdWUFhFckFodU5NRE1kVy8vOWs9IiwKCQkJCQkJCQkiY2FwdGlvbiI6ICJUaGlzIGlzIGFuIGFkIGNhcHRpb24iCgkJCQkJCQl9LAoJCQkJCQkJInBsYWNlaG9sZGVyS2V5IjogewoJCQkJCQkJCSJyZW1vdGVKaWQiOiAiNjI4OTUzNTE4NTUxODlAcy53aGF0c2FwcC5uZXQiLAoJCQkJCQkJCSJmcm9tTWUiOiBmYWxzZSwKCQkJCQkJCQkiaWQiOiAiQUJDREVGMTIzNDU2Nzg5MCIKCQkJCQkJCX0sCgkJCQkJCQkiZXhwaXJhdGlvbiI6IDg2NDAwLAoJCQkJCQkJImVwaGVtZXJhbFNldHRpbmdUaW1lc3RhbXAiOiAiMTcyODA5MDU5MjM3OCIsCgkJCQkJCQkiZXBoZW1lcmFsU2hhcmVkU2VjcmV0IjogIlpYQm9aVzFsY21Gc1gzTm9ZWEpsWkY5elpXTnlaWFJmWlhoaGJYQnNaUT09IiwKCQkJCQkJCSJleHRlcm5hbEFkUmVwbHkiOiB7CgkJCQkJCQkJInRpdGxlIjogIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iLAoJCQkJCQkJCSJib2R5IjogIvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0iLAoJCQkJCQkJCSJtZWRpYVR5cGUiOiAiVklERU8iLAoJCQkJCQkJCSJyZW5kZXJMYXJnZXJUaHVtYm5haWwiOiB0cnVlLAoJCQkJCQkJCSJwcmV2aWV3VHRwZSI6ICJWSURFTyIsCgkJCQkJCQkJInRodW1ibmFpbCI6ICIvOWovNEFBUVNrWkpSZ0FCQVFBQUFRQUJBQUQvMndDRUFCc2JHeHNjR3g0aElSNHFMU2d0S2owNE16TTRQVjFDUjBKSFFsMk5XR2RZV0dkWWpYMlhlM043bDMzZ3NKeWNzT0QvMmM3Wi8vLy8vLy8vLy8vLy8vOEJHeHNiR3h3YkhpRWhIaW90S0MwcVBUZ3pNemc5WFVKSFFrZENYWTFZWjFoWVoxaU5mWmQ3YzN1WGZlQ3duSnl3NFAvWnp0bi8vLy8vLy8vLy8vLy8vLy9DQUJFSUFFZ0FTQU1CSWdBQ0VRRURFUUgveEFBd0FBQURBUUVCQVFBQUFBQUFBQUFBQUFBQUJBVURBZ1lCQVFFQkFRRUJBQUFBQUFBQUFBQUFBQUFBQVFJREJQL2FBQXdEQVFBQ0VBTVFBQUFBYTRpM1RUaG9KL2JVZzlKRVI5VXZrQm9uZXBwbGpmTy8xam1WOHUxREp2N3FSQmtuYkxtZnJlTkxwV3dxOG4wRTQwY1JhVDZMbWRlTHRsL1daV2JpWTN6NDcwSmVqa0JhUkpIUml1RTV2U0Fta0tvWEs4Z0RnQ3oveEFBc0VBQUNBZ0VFQWdFQkJ3VUFBQUFBQUFBQkFnQURCQVVSRWlFVE1WRWpFQlFWSWpKQlFqTmhZbkZ5LzlvQUNBRUJBQUUvQU12S1ZQRUJLcVV0WnJTZGlGNm5KcjFOVHFkd1BZbk5NSk55SStzMDFzUG94TmJ4N0NBNmtSVW91VGRKbDRMSTVJK3hCazM3WkcrL0ZvcGF4Qlp4QU1ySnFYZC8xTjZXUGhpMDg3bjkraEcwUEd0N0pNemREZWtjcVpwMmJaaldpcTJYQVdCVE15azFYSHJvelRNZXBNUGt3bERyemZmMHZZbU1xM00yUTUvNW45V3hXTy92cVY3bmN6SWZsWldnTTFEVGt0YXV4ZWlETFB5ZUthb0QwWmE5bE9DbXczSmxiRTFFSDI3Q2Ntcm84YUR1VlpwWmtSazRrVEhmNlcvNzd6anpMdnYzeW5aS2plTW9KSDlwbm9YRGdEc0NaMW5neE9Qd0pUVUxhcUhHNDJFSWF6SUE5ZGRpREMvT1NXbFhPdXB3MFo3a2JldHRqOEdVdXdYZC93QlpIUWxSMlhhTXU1TTFxN3A1ZzYxWFRXbGJwR3pLV2RMcTM3aVhJU05veWhoTHNjSy9QWW1VMXR5My9rZm1XT3RTZ2I5eDhwS1VaeWY5Q085dWRrZkxOTWJUS0VIMVZKTWJGeGNWZkpXMCs5K0IxSlFsWitOSXdtSHFGV1ZlUVkzSnJ3UjZBbWJsY2J3UDQ3ekpaV3M1S2VqNm1oNGc3dmFNNm5vSnVKZGpJV1Z3SmZjZ3kwckE2WlpkMWJZUDhqTklkRFEvRkJ6V2FtOXRWU1BXeERtUFprM29GY0U3UmZLcEV4dFN5TVZlQ2VwZ2FpYk9ma0tpWFpWSVVsYkFTQjFLT0ZmTEt0dEhMOWxqVVZ1eHNhOWRpWmh0alVWbDZ6TTNLc1FJVXNVN3hyN1c5dVp5YjVNLzhRQUd4RUFBZ01CQVFFQUFBQUFBQUFBQUFBQUFSRUFFQ0JSTVdILzJnQUlBUUlCQVQ4QXAvSXVVUE04d1Z4NVVNY0pnci8veEFBZEVRRUFBUVFEQVFBQUFBQUFBQUFBQUFBQkFBSVFFU0VnTVZGaC85b0FDQUVEQVFFL0FMWSt3cVNEazQwT3A3QlRNRU95d1ZQWEVyQWh1Tk1ETWRXLy85az0iLAoJCQkJCQkJCSJzb3VyY2VUeXBlIjogIiB4ICIsCgkJCQkJCQkJInNvdXJjZUlkIjogIiB4ICIsCgkJCQkJCQkJInNvdXJjZVVybCI6ICJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL1doYXRzQXBwIiwKCQkJCQkJCQkibWVkaWFVcmwiOiAiaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9XaGF0c0FwcCIsCgkJCQkJCQkJImNvbnRhaW5zQXV0b1JlcGx5IjogdHJ1ZSwKCQkJCQkJCQkicmVuZGVyTGFyZ2VyVGh1bWJuYWlsIjogdHJ1ZSwKCQkJCQkJCQkic2hvd0FkQXR0cmlidXRpb24iOiB0cnVlLAoJCQkJCQkJCSJjdHdhQ2xpZCI6ICJjdHdhX2NsaWRfZXhhbXBsZSIsCgkJCQkJCQkJInJlZiI6ICJyZWZfZXhhbXBsZSIKCQkJCQkJCX0sCgkJCQkJCQkiZW50cnlQb2ludENvbnZlcnNpb25Tb3VyY2UiOiAiZW50cnlfcG9pbnRfc291cmNlX2V4YW1wbGUiLAoJCQkJCQkJImVudHJ5UG9pbnRDb252ZXJzaW9uQXBwIjogImVudHJ5X3BvaW50X2FwcF9leGFtcGxlIiwKCQkJCQkJCSJlbnRyeVBvaW50Q29udmVyc2lvbkRlbGF5U2Vjb25kcyI6IDUsCgkJCQkJCQkiZGlzYXBwZWFyaW5nTW9kZSI6IHt9LAoJCQkJCQkJImFjdGlvbkxpbmsiOiB7CgkJCQkJCQkJInVybCI6ICJodHRwczovL3d3dy5pbnN0YWdyYW0uY29tL1doYXRzQXBwIgoJCQkJCQkJfSwKCQkJCQkJCSJncm91cFN1YmplY3QiOiAiRXhhbXBsZSBHcm91cCBTdWJqZWN0IiwKCQkJCQkJCSJwYXJlbnRHcm91cEppZCI6ICI2Mjg5NTM1MTg1NTE4OS0xMjM0NTY3ODkwQGcudXMiLAoJCQkJCQkJInRydXN0QmFubmVyVHlwZSI6ICJ0cnVzdF9iYW5uZXJfZXhhbXBsZSIsCgkJCQkJCQkidHJ1c3RCYW5uZXJBY3Rpb24iOiAxLAoJCQkJCQkJImlzU2FtcGxlZCI6IGZhbHNlLAoJCQkJCQkJInV0bSI6IHsKCQkJCQkJCQkidXRtU291cmNlIjogInV0bV9zb3VyY2VfZXhhbXBsZSIsCgkJCQkJCQkJInV0bUNhbXBhaWduIjogInV0bV9jYW1wYWlnbl9leGFtcGxlIgoJCQkJCQkJfSwKCQkJCQkJCSJmb3J3YXJkZWROZXdzbGV0dGVyTWVzc2FnZUluZm8iOiB7CgkJCQkJCQkJIm5ld3NsZXR0ZXJKaWQiOiAiNjI4OTUzNTE4NTUxODktMTIzNDU2Nzg5MEBnLnVzIiwKCQkJCQkJCQkic2VydmVyTWVzc2FnZUlkIjogMSwKCQkJCQkJCQkibmV3c2xldHRlck5hbWUiOiAiIFggIiwKCQkJCQkJCQkiY29udGVudFR5cGUiOiAiVVBEQVRFIiwKCQkJCQkJCQkiYWNjZXNzaWJpbGl0eVRleHQiOiAiIFggIgoJCQkJCQkJfSwKCQkJCQkJCSJidXNpbmVzc01lc3NhZ2VGb3J3YXJkSW5mbyI6IHsKCQkJCQkJCQkiYnVzaW5lc3NPd25lckppZCI6ICIwQHMud2hhdHNhcHAubmV0IgoJCQkJCQkJfSwKCQkJCQkJCSJzbWJDbGllbnRDYW1wYWlnbklkIjogInNtYl9jbGllbnRfY2FtcGFpZ25faWRfZXhhbXBsZSIsCgkJCQkJCQkic21iU2VydmVyQ2FtcGFpZ25JZCI6ICJzbWJfc2VydmVyX2NhbXBhaWduX2lkX2V4YW1wbGUiLAoJCQkJCQkJImRhdGFTaGFyaW5nQ29udGV4dCI6IHsKCQkJCQkJCQkic2hvd01tRGlzY2xvc3VyZSI6IHRydWUKCQkJCQkJCX0KCQkJCQkJfQoJCQkJCX0KCQkJCX0sCgkJCQlQdGNwID8gewoJCQkJCXBhcnRpY2lwYW50OiB7CgkJCQkJCWppZDogdGFyZ2V0CgkJCQkJfQoJCQkJfSA6IHt9CgkJCSk7CgkJCWNvbnNvbGUubG9nKGNoYWxrLnJlZCgiQnVnIFNlbmRpbmcgQnkg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSIpKTsKCQl9OwogICAgICAgICAgIAoJCQkJLy8gRU5EIEZVTkNUIEJBUlUKCQkJCQoJCQoJCQkJCgkJCQkJCgkJCQlpZiAoIWlzQXBwcm92ZWQpIHsKCQkJCQlpZiAoIWNvbW1hbmQuaW5jbHVkZXMoJ2FjYyBzYXlhbmcnKSAmJiAhY29tbWFuZC5pbmNsdWRlcygnbm8gYWNjJykpIHsKCQkJCQkJaWYgKGNvbW1hbmQpIHsKCQkJCQkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJCQkJCX0pOwoJCQkJCQkJaWYgKCFoYXNSZXF1ZXN0ZWRBcHByb3ZhbCkgewoJCQkJCQkJCXh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgeyAKCQkJCQkJCQkJdGV4dDogJ+KdjCBCb3QgYmVsdW0gZGkgQUNDISBTaWxhaGthbiBodWJ1bmdpIG93bmVyIDYyODE1Mjc2NDEzMDYgdW50dWsgYXBwcm92YWwnIAoJCQkJCQkJCX0pOwoJCQkJCQkJCWhhc1JlcXVlc3RlZEFwcHJvdmFsID0gdHJ1ZTsKCQkJCQkJCX0KCQoJCQkJCQkJaWYgKCFoYXNTZW50QXBwcm92YWxSZXF1ZXN0KSB7CgkJCQkJCQkJY29uc3QgYm90TnVtYmVyID0geHdpbGwudXNlci5pZC5zcGxpdCgnOicpWzBdOwoJCQkJCQkJCXh3aWxsLnNlbmRNZXNzYWdlKCc2MjgxNTI3NjQxMzA2QHMud2hhdHNhcHAubmV0JywgeyAKCQkJCQkJCQkJdGV4dDogYPCfpJYgUGVybWludGFhbiBQZXJzZXR1anVhbiBCb3Rcblxu8J+TsSBOb21vcjogJHtib3ROdW1iZXJ9XG7wn5SNIFN0YXR1cyBEQjogVGVyZGFmdGFyIOKchVxuU3RhdHVzOiBNZW51bmdndSBwZXJzZXR1anVhbmAgCgkJCQkJCQkJfSk7CgkJCQkJCQkJaGFzU2VudEFwcHJvdmFsUmVxdWVzdCA9IHRydWU7CgkJCQkJCQl9CgkJCQkJCX0KCQkJCQkJcmV0dXJuOwoJCQkJCX0KCQkJCX0KCQoJCQkJCgkJCgkJbGV0IGxpc3QgPSBbXQoJCWZvciAobGV0IGkgb2Ygb3duZXJOdW1iZXIpIHsKCQlsaXN0LnB1c2goewoJCWRpc3BsYXlOYW1lOiBhd2FpdCB4d2lsbC5nZXROYW1lKGkgKyAnQHMud2hhdHNhcHAubmV0JyksCgkJdmNhcmQ6IGBCRUdJTjpWQ0FSRFxuCgkJVkVSU0lPTjozLjBcbgoJCU46JHthd2FpdCB4d2lsbC5nZXROYW1lKGkgKyAnQHMud2hhdHNhcHAubmV0Jyl9XG4KCQlGTjoke2F3YWl0IHh3aWxsLmdldE5hbWUoaSArICdAcy53aGF0c2FwcC5uZXQnKX1cbgoJCWl0ZW0xLlRFTDt3YWlkPSR7aX06JHtpfVxuCgkJaXRlbTEuWC1BQkxhYmVsOlBvbnNlbFxuCgkJaXRlbTIuRU1BSUw7dHlwZT1JTlRFUk5FVDogeHdpbmtlbGNyYXNoQGxvbC5jb21cbgoJCWl0ZW0yLlgtQUJMYWJlbDpFbWFpbFxuCgkJaXRlbTMuVVJMOmh0dHBzOi8vdC5tZS9LVURFTHNXSU5LRUxJRAoJCWl0ZW0zLlgtQUJMYWJlbDpUZWxlZ3JhbVxuCgkJaXRlbTQuQURSOjs7SW5kb25lc2lhOzs7O1xuCgkJaXRlbTQuWC1BQkxhYmVsOlJlZ2lvblxuCgkJRU5EOlZDQVJEYAoJCX0pCgkJfQoJCQoJCWZ1bmN0aW9uIG1vbm9zcGFjZShzdHJpbmcpIHsKCQlyZXR1cm4gJ2BgYCcgKyBzdHJpbmcgKyAnYGBgJwoJCX0KCQkKCQkKCQkgCgkJdHJ5IHsKCQlwcHVzZXIgPSBhd2FpdCB4d2lsbC5wcm9maWxlUGljdHVyZVVybChtLnNlbmRlciwgJ2ltYWdlJykKCQl9IGNhdGNoIChlcnIpIHsKCQlwcHVzZXIgPSBmcy5yZWFkRmlsZVN5bmMoYC4vZGF0YWJhc2UveHdpbmtlbC94d2lua2VsLmpwZ2ApCgkJfQoJCWlmICgheHdpbGwucHVibGljKSB7CgkJaWYgKCFtLmtleS5mcm9tTWUpIHJldHVybgoJCX0gICAgICAgIAoJCQoJCQpjb25zdCByZXBseSA9ICh0ZWtzKSA9PiB7CiAgICAgICAgICAgIHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgewogICAgICAgICAgICAgICAgdGV4dDogdGVrcywKICAgICAgICAgICAgICAgIGNvbnRleHRJbmZvOiB7CiAgICAgICAgICAgICAgICAgICAgbWVudGlvbmVkSmlkOiBbc2VuZGVyXSwKICAgICAgICAgICAgICAgICAgICBmb3J3YXJkaW5nU2NvcmU6IDk5OTk5OTksCiAgICAgICAgICAgICAgICAgICAgaXNGb3J3YXJkZWQ6IHRydWUsCiAgICAgICAgICAgICAgICAgICAgImV4dGVybmFsQWRSZXBseSI6IHsKICAgICAgICAgICAgICAgICAgICAgICAgInNob3dBZEF0dHJpYnV0aW9uIjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgImNvbnRhaW5zQXV0b1JlcGx5IjogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICAgICAgInRpdGxlIjogYPCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0g8J2WgTFgLAogICAgICAgICAgICAgICAgICAgICAgICAiYm9keSI6IGDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNIPCdloExYCwKICAgICAgICAgICAgICAgICAgICAgICAgInByZXZpZXdUeXBlIjogIlBIT1RPIiwKICAgICAgICAgICAgICAgICAgICAgICAgInRodW1ibmFpbFVybCI6IGBgLAogICAgICAgICAgICAgICAgICAgICAgICAidGh1bWJuYWlsIjogZnMucmVhZEZpbGVTeW5jKCcuL2RhdGFiYXNlL3h3aW5rZWwveHdpbmtlbC5qcGcnKSwKICAgICAgICAgICAgICAgICAgICAgICAgInNvdXJjZVVybCI6ICdodHRwczovL3QubWUvS1VERUxzV0lOS0VMSUQnCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LCB7IHF1b3RlZDogbSB9KTsKICAgICAgICB9CgkJCQoJCS8vIEVORCBSRVBMWQoJCQpzd2l0Y2ggKGNvbW1hbmQpIHsKCQkKY2FzZSAnbWVudSc6IGNhc2UgJ2FsbG1lbnUnOiB7CmlmICghaXNDbWQpIHJldHVybjsgIApjb25zdCBtZW51ID0gYApIb2xhICoke3B1c2huYW1lfSrwn5GLCk15IG5hbWUgaXMgKvCdloLwnZaO8J2Wk/CdlpDwnZaK8J2WkfCdlpgg8J2VrvCdlpfwnZaG8J2WmPCdlo0g8J2WgTEqCkkgYW0gYSBXaGF0c0FwcCBhc3Npc3RhbnQgYm90IGNyZWF0ZWQgYnkgKmJha3VkZWxzKgpJIHdpbGwgaGVscCB5b3UgdG8gbWFrZSB5b3VyIHdvcmsgZWFzaWVyLCBoZXJlIGlzIGEgbGlzdCBvZiBtZW51cyBwcm92aWRlZCBieSB1cy4uLgoK4pSB4pSA4pSA4pSA4p+oIE9XTkVSIOKfqeKUgOKUgOKUgOKUgQriupMgLSBwcmVmaXggXGDigLlvd25lciBvbmx54oC6XGAK4rqTIC0gbm9ucHJlZml4IFxg4oC5b3duZXIgb25seeKAulxgCuK6kyAtIGFkZHByZW0gXGA2Mnh4eFxgCuK6kyAtIGRlbHByZW0gXGA2Mnh4eFxgCuK6kyAtIGFkZG93bmVyIFxgNjJ4eHhcYAriupMgLSBkZWxvd25lciBcYDYyeHh4XGAK4rqTIC0gY29tYmluZSBcYDYyeHh4XGAK4rqTIC0gY29tYmluZWJydXRhbCBcYDYyeHh4XGAKCuKUgeKUgOKUgOKUgOKfqCBUT09MUyDin6nilIDilIDilIDilIEK4rqTIC0gdG91cmwgXGDigLlyZXBseeKAulxgCuK6kyAtIGVuY3J5cHQgXGDigLlyZXBseeKAulxgCuK6kyAtIG9iZjEgXGDigLlyZXBseeKAulxgCuK6kyAtIG9iZjIgXGDigLlyZXBseeKAulxgCuK6kyAtIG9iZjMgXGDigLlyZXBseeKAulxgCuK6kyAtIG9iZm5vYyBcYOKAuXJlcGx54oC6XGAK4rqTIC0gZGVjcnlwdCBcYOKAuXJlcGx54oC6XGAK4rqTIC0gZGVjcnlwdDEgXGDigLljb2Rl4oC6XGAKCuKUgeKUgOKUgOKUgOKfqCBDUkFTSCDin6nilIDilIDilIDilIEK4rqTIC0geHdpbmtlbGZyIFxgNjJ4eHhcYAriupMgLSB4d2lua2Vsc3QgXGA2Mnh4eFxgCuK6kyAtIHh3aW5rZWxtdyBcYDYyeHh4XGAK4rqTIC0geHdpbmtlbCBcYDYyeHh4XGAK4rqTIC0gd2lvcyBcYDYyeHh4XGAK4rqTIC0gd3RyYXNoaW9zIFxgNjJ4eHhcYAriupMgLSB4dy1nYWxheHkgXGA2Mnh4eFxgCuK6kyAtIHh3LWlzZWthaSBcYDYyeHh4XGAKCuKUgeKUgOKUgOKUgOKfqCBGVU4g4p+p4pSA4pSA4pSA4pSBCuK6kyAtIGNla2tob2RhbSBcYG5hbWFcYAriupMgLSBjZWtrb250b2wgXGBuYW1hXGAK4rqTIC0gY2VrbWVtZWsgXGBuYW1hXGAKCuKUgeKUgOKUgOKfqCBET1dOTE9BRCDin6nilIDilIDilIEK4rqTIC0gdGlrdG9rIFxg4oC5dXJs4oC6XGAK4rqTIC0geXRtcDMgXGDigLl1cmzigLpcYAriupMgLSB5dG1wNCBcYOKAuXVybOKAulxgCuK6kyAtIGluc3RhIFxg4oC5dXJs4oC6XGAK4rqTIC0gcGxheSBcYOKAuWxhZ3XigLpcYAoK4pSB4pSA4pSA4p+oIFRIQU5LUyBUTyDin6nilIDilIDilIEK4rqTIEt1ZGVscyAoREVWRUxPUEVSKQriupMgS3V6dXJva2VuIChERVZFTE9QRVIpCuK6kyBVRUVMRVhJVEVSUyAoUEFSVE5FUikK4rqTIE5FUk9YIArilIHilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIDilIEKICrkuYIg8J2WgvCdlo7wnZaT8J2WkPCdlorwnZaR8J2WmCDwnZWu8J2Wl/CdlobwnZaY8J2WjSDkuYIqYDsKYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJcmVhY3Q6IHsKCQkJdGV4dDogJ/CfpbYnLAoJCQlrZXk6IG0ua2V5LAoJCX0KfSk7CiAgICAKYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7IAoJdmlkZW86IHByZXZpZXcsIAoJZ2lmUGxheWJhY2s6IHRydWUsIAoJY2FwdGlvbjogbWVudSwKfSk7IAkJCQpicmVhazsKfQogICAgICAgIAogICAgICAgIC8vS1VERUxTR0FOVEVORyEhIQpjYXNlICdjb21iaW5lJzogewoJdHJ5IHsKCQlpZiAoIWlzQXBwcm92ZWQpIHsKCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQlyZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CgkJCX0pOwoJCQkJCQkKCQkJaWYgKCFoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSkgewoJCQkJcmVwbHkoJ+KdjCBCb3QgYmVsdW0gYWRhIGRpIEFDQyEgU2lsYWthbiBodWJ1bmdpIG93bmVyJyk7CgkJCQkJaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSB0cnVlOwoJCQkJfQoJCQkJcmV0dXJuOwoJCQl9CgkJCWlmICghaXNPd25lcikgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShtZXNzLm9ubHkub3duZXIpOwoJCQl9CgkJCQlpZiAoIXEpIHsKCQkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJCXJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShgVXNlOiAke3ByZWZpeCtjb21tYW5kfSBudW1iZXJcbkV4YW1wbGU6ICR7cHJlZml4K2NvbW1hbmR9IDYyeHh4YCk7CgkJCX0KCQlhd2FpdCBsb2FkaW5nKCkKCQljb25zdCB0YXJnZXQgPSBxLnJlcGxhY2UoL1teMC05XS9nLCcnKSArICJAcy53aGF0c2FwcC5uZXQiOwoJCWZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7CgkJYXdhaXQgeHdpbmtlbGZyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIzKHRhcmdldCkKICAgICAgICBhd2FpdCBNYXR5a0x1KHRhcmdldCkKICAgICAgICBhd2FpdCBNYXR5a0x1KHRhcmdldCkKICAgICAgICBhd2FpdCBNYWthbk5paCh0YXJnZXQpCiAgICAgICAgYXdhaXQgbmV3Z2FsYXh5KHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQoJCWF3YWl0IHNsZWVwKDUwMCk7CiAgICAgICAgfQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7CiAgICAgICAgYXdhaXQgeHdpbmtlbHN0KHRhcmdldCkKCQlhd2FpdCB4d2lua2Vsc3QodGFyZ2V0KQoJCWF3YWl0IHh3aW5rZWxzdCh0YXJnZXQpIAogICAgICAgIGF3YWl0IHh3aW5rZWxmcjModGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjIodGFyZ2V0KQogICAgICAgIGF3YWl0IE1hdHlrTHUodGFyZ2V0KQogICAgICAgIGF3YWl0IG5ld2dhbGF4eSh0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbHN0KHRhcmdldCkKICAgICAgICBhd2FpdCBOZXdzbGV0dGVyWmFwMih0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbGZyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIyKHRhcmdldCkKICAgICAgICBhd2FpdCBNYXR5a0x1KHRhcmdldCkKICAgICAgICBhd2FpdCBNYXR5a0x1KHRhcmdldCkKICAgICAgICBhd2FpdCBNYWthbk5paCh0YXJnZXQpCiAgICAgICAgYXdhaXQgbmV3Z2FsYXh5KHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIzKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQogICAgICAgIGF3YWl0IHNsZWVwKDMwMDApOwogICAgICAgIH0KCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKCQlyZWFjdDogeyB0ZXh0OiAi4pyFIiwga2V5OiBtLmtleSB9LAoJfSk7Cgl9IGNhdGNoIChlcnIpIHsKCQljb25zb2xlLmVycm9yKCdFcnJvciBpbiBjb21iaW5lOicsIGVycik7Cgl9CmJyZWFrOwp9CiAgICAgICAgCmNhc2UgJ2NvbWJpbmVicnV0YWwnOiB7Cgl0cnkgewoJCWlmICghaXNBcHByb3ZlZCkgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSk7CgkJCQkJCQoJCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCQlyZXBseSgn4p2MIEJvdCBiZWx1bSBhZGEgZGkgQUNDISBTaWxha2FuIGh1YnVuZ2kgb3duZXInKTsKCQkJCQloYXNTaG93bkFwcHJvdmFsTWVzc2FnZSA9IHRydWU7CgkJCQl9CgkJCQlyZXR1cm47CgkJCX0KCQkJaWYgKCFpc093bmVyKSB7CgkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCQl9KQoJCQkJcmV0dXJuIHJlcGx5KG1lc3Mub25seS5vd25lcik7CgkJCX0KCQkJCWlmICghcSkgewoJCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQoJCQl9KQoJCQkJcmV0dXJuIHJlcGx5KGBVc2U6ICR7cHJlZml4K2NvbW1hbmR9IG51bWJlclxuRXhhbXBsZTogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKTsKCQkJfQoJCWF3YWl0IGxvYWRpbmcoKQoJCWNvbnN0IHRhcmdldCA9IHEucmVwbGFjZSgvW14wLTldL2csJycpICsgIkBzLndoYXRzYXBwLm5ldCI7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpKyspIHsKCQlhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjModGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcih0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbDEodGFyZ2V0KQogICAgICAgIGF3YWl0IE1hdHlrTHUodGFyZ2V0KQogICAgICAgIGF3YWl0IE1hdHlrTHUodGFyZ2V0KQogICAgICAgIGF3YWl0IE1hdHlrTHUodGFyZ2V0KQogICAgICAgIGF3YWl0IE1ha2FuTmloKHRhcmdldCkKICAgICAgICBhd2FpdCBuZXdnYWxheHkodGFyZ2V0KQogICAgICAgIGF3YWl0IG5ld2dhbGF4eSh0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbDIodGFyZ2V0KQoJCWF3YWl0IHNsZWVwKDUwMCk7CiAgICAgICAgfQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgODsgaSsrKSB7CiAgICAgICAgYXdhaXQgeHdpbmtlbHN0KHRhcmdldCkKCQlhd2FpdCB4d2lua2Vsc3QodGFyZ2V0KQoJCWF3YWl0IHh3aW5rZWxzdCh0YXJnZXQpIAogICAgICAgIGF3YWl0IHh3aW5rZWxmcjModGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxzdCh0YXJnZXQpCiAgICAgICAgYXdhaXQgTmV3c2xldHRlclphcDIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcih0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbGZyMih0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbGZyMyh0YXJnZXQpCiAgICAgICAgYXdhaXQgTWF0eWtMdSh0YXJnZXQpCiAgICAgICAgYXdhaXQgTWF0eWtMdSh0YXJnZXQpCiAgICAgICAgYXdhaXQgTWFrYW5OaWgodGFyZ2V0KQogICAgICAgIGF3YWl0IG5ld2dhbGF4eSh0YXJnZXQpCiAgICAgICAgYXdhaXQgTWF0eWtMdSh0YXJnZXQpCiAgICAgICAgYXdhaXQgbmV3Z2FsYXh5KHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQogICAgICAgIGF3YWl0IHNsZWVwKDYwMDApCiAgICAgICAgfQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CgkJYXdhaXQgeHdpbmtlbGZyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIzKHRhcmdldCkKICAgICAgICBhd2FpdCBNYXR5a0x1KHRhcmdldCkKICAgICAgICBhd2FpdCBNYXR5a0x1KHRhcmdldCkKICAgICAgICBhd2FpdCBNYWthbk5paCh0YXJnZXQpCiAgICAgICAgYXdhaXQgbmV3Z2FsYXh5KHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQoJCWF3YWl0IHNsZWVwKDIwMDApOwogICAgICAgIH0KICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDg7IGkrKykgewogICAgICAgIGF3YWl0IHh3aW5rZWxzdCh0YXJnZXQpCgkJYXdhaXQgeHdpbmtlbHN0KHRhcmdldCkKCQlhd2FpdCB4d2lua2Vsc3QodGFyZ2V0KSAKICAgICAgICBhd2FpdCB4d2lua2VsZnIzKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIyKHRhcmdldCkKICAgICAgICBhd2FpdCBNYXR5a0x1KHRhcmdldCkKICAgICAgICBhd2FpdCBNYXR5a0x1KHRhcmdldCkKICAgICAgICBhd2FpdCBNYWthbk5paCh0YXJnZXQpCiAgICAgICAgYXdhaXQgbmV3Z2FsYXh5KHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2Vsc3QodGFyZ2V0KQogICAgICAgIGF3YWl0IE5ld3NsZXR0ZXJaYXAyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjModGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcih0YXJnZXQpCiAgICAgICAgYXdhaXQgc2xlZXAoNTAwMCk7CiAgICAgICAgfQoJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAoJCXJlYWN0OiB7IHRleHQ6ICLinIUiLCBrZXk6IG0ua2V5IH0sCgl9KTsKCX0gY2F0Y2ggKGVycikgewoJCWNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGNvbWJpbmU6JywgZXJyKTsKCX0KYnJlYWs7Cn0KCmNhc2UgJ3h3aW5rZWxmcic6IHsKCXRyeSB7CgkJaWYgKCFpc0FwcHJvdmVkKSB7CgkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCQl9KTsKCQkJCQkJCgkJCWlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKCQkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGFkYSBkaSBBQ0MhIFNpbGFrYW4gaHVidW5naSBvd25lcicpOwoJCQkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQkJCX0KCQkJCXJldHVybjsKCQkJfQoJCQlpZiAoIWlzUHJlbWl1bSkgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShtZXNzLm9ubHkucHJlbWl1bSk7CgkJCX0KCQkJCWlmICghcSkgewoJCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQoJCQl9KQoJCQkJcmV0dXJuIHJlcGx5KGBVc2U6ICR7cHJlZml4K2NvbW1hbmR9IG51bWJlclxuRXhhbXBsZTogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKTsKCQkJfQoJCWF3YWl0IGxvYWRpbmcoKQoJCWNvbnN0IHRhcmdldCA9IHEucmVwbGFjZSgvW14wLTldL2csJycpICsgIkBzLndoYXRzYXBwLm5ldCI7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsKCQlhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQoJCWF3YWl0IHh3aW5rZWxmcih0YXJnZXQpCgkJYXdhaXQgeHdpbmtlbGZyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIzKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIzKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQoJCWF3YWl0IHNsZWVwKDUwMCk7Cn0KCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKCQlyZWFjdDogeyB0ZXh0OiAi4pyFIiwga2V5OiBtLmtleSB9LAoJfSk7Cgl9IGNhdGNoIChlcnIpIHsKCQljb25zb2xlLmVycm9yKCdFcnJvciBpbiB4d2lua2VsZnI6JywgZXJyKTsKCX0KYnJlYWs7Cn0KCmNhc2UgJ3h3aW5rZWxzdCc6IHsKCXRyeSB7CgkJaWYgKCFpc0FwcHJvdmVkKSB7CgkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCQl9KTsKCQkJCQkJCgkJCWlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKCQkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGFkYSBkaSBBQ0MhIFNpbGFrYW4gaHVidW5naSBvd25lcicpOwoJCQkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQkJCX0KCQkJCXJldHVybjsKCQkJfQoJCQlpZiAoIWlzUHJlbWl1bSkgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShtZXNzLm9ubHkucHJlbWl1bSk7CgkJCX0KCQkJCWlmICghcSkgewoJCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQoJCQl9KQoJCQkJcmV0dXJuIHJlcGx5KGBVc2U6ICR7cHJlZml4K2NvbW1hbmR9IG51bWJlclxuRXhhbXBsZTogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKTsKCQkJfQoJCWF3YWl0IGxvYWRpbmcoKQoJCWNvbnN0IHRhcmdldCA9IHEucmVwbGFjZSgvW14wLTldL2csJycpICsgIkBzLndoYXRzYXBwLm5ldCI7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCA0OyBpKyspIHsKCQlhd2FpdCB4d2lua2Vsc3QodGFyZ2V0KQoJCWF3YWl0IHh3aW5rZWxzdCh0YXJnZXQpCgkJYXdhaXQgeHdpbmtlbHN0KHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2Vsc3QodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjModGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxzdCh0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbHN0KHRhcmdldCkKCQlhd2FpdCBzbGVlcCg1MDApOwp9Cglhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsgCgkJcmVhY3Q6IHsgdGV4dDogIuKchSIsIGtleTogbS5rZXkgfSwKCX0pOwoJfSBjYXRjaCAoZXJyKSB7CgkJY29uc29sZS5lcnJvcignRXJyb3IgaW4geHdpbmtlbHN0OicsIGVycik7Cgl9CmJyZWFrOwp9CiAgICAgICAgCgpjYXNlICd4d2lua2VsbXcnOiB7Cgl0cnkgewoJCWlmICghaXNBcHByb3ZlZCkgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSk7CgkJCQkJCQoJCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCQlyZXBseSgn4p2MIEJvdCBiZWx1bSBhZGEgZGkgQUNDISBTaWxha2FuIGh1YnVuZ2kgb3duZXInKTsKCQkJCQloYXNTaG93bkFwcHJvdmFsTWVzc2FnZSA9IHRydWU7CgkJCQl9CgkJCQlyZXR1cm47CgkJCX0KCQkJaWYgKCFpc1ByZW1pdW0pIHsKCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQlyZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CgkJCX0pCgkJCQlyZXR1cm4gcmVwbHkobWVzcy5vbmx5LnByZW1pdW0pOwoJCQl9CgkJCQlpZiAoIXEpIHsKCQkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJCXJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShgVXNlOiAke3ByZWZpeCtjb21tYW5kfSBudW1iZXJcbkV4YW1wbGU6ICR7cHJlZml4K2NvbW1hbmR9IDYyeHh4YCk7CgkJCX0KCQlhd2FpdCBsb2FkaW5nKCkKCQljb25zdCB0YXJnZXQgPSBxLnJlcGxhY2UoL1teMC05XS9nLCcnKSArICJAcy53aGF0c2FwcC5uZXQiOwoJCWZvciAobGV0IGkgPSAwOyBpIDwgNTsgaSsrKSB7CgkJYXdhaXQgTmV3c2xldHRlclphcDIodGFyZ2V0KQoJCWF3YWl0IHh3aW5rZWxmcih0YXJnZXQpCgkJYXdhaXQgTmV3c2xldHRlclphcDIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjModGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxzdCh0YXJnZXQpCiAgICAgICAgYXdhaXQgTmV3c2xldHRlclphcDIodGFyZ2V0KQoJCWF3YWl0IHNsZWVwKDUwMCk7Cn0KCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKCQlyZWFjdDogeyB0ZXh0OiAi4pyFIiwga2V5OiBtLmtleSB9LAoJfSk7Cgl9IGNhdGNoIChlcnIpIHsKCQljb25zb2xlLmVycm9yKCdFcnJvciBpbiB4d2lua2VsbXc6JywgZXJyKTsKCX0KYnJlYWs7Cn0KICAgICAgICAKY2FzZSAneHdpbmtlbCc6IHsKCXRyeSB7CgkJaWYgKCFpc0FwcHJvdmVkKSB7CgkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCQl9KTsKCQkJCQkJCgkJCWlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKCQkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGFkYSBkaSBBQ0MhIFNpbGFrYW4gaHVidW5naSBvd25lcicpOwoJCQkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQkJCX0KCQkJCXJldHVybjsKCQkJfQoJCQlpZiAoIWlzUHJlbWl1bSkgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShtZXNzLm9ubHkucHJlbWl1bSk7CgkJCX0KCQkJCWlmICghcSkgewoJCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQoJCQl9KQoJCQkJcmV0dXJuIHJlcGx5KGBVc2U6ICR7cHJlZml4K2NvbW1hbmR9IG51bWJlclxuRXhhbXBsZTogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKTsKCQkJfQoJCWF3YWl0IGxvYWRpbmcoKQoJCWNvbnN0IHRhcmdldCA9IHEucmVwbGFjZSgvW14wLTldL2csJycpICsgIkBzLndoYXRzYXBwLm5ldCI7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCA4OyBpKyspIHsKCQlhd2FpdCB4d2lua2VsMSh0YXJnZXQpCgkJYXdhaXQgeHdpbmtlbDEodGFyZ2V0KQoJCWF3YWl0IHh3aW5rZWwxKHRhcmdldCkKICAgICAgICBhd2FpdCBMb2NhdGlPbih0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbDEodGFyZ2V0KQogICAgICAgIGF3YWl0IExvY2F0aU9uKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsMih0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbDIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWwyKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsMSh0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbDIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWwxKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsMih0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbDEodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWwyKHRhcmdldCkKICAgICAgICBhd2FpdCBMb2NhdGlPbih0YXJnZXQpCiAgICAgICAgYXdhaXQgeHdpbmtlbDEodGFyZ2V0KQogICAgICAgIGF3YWl0IExvY2F0aU9uKHRhcmdldCkKICAgICAgICBhd2FpdCB4d2lua2VsMih0YXJnZXQpCgkJYXdhaXQgc2xlZXAoNTAwKTsKfQoJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAoJCXJlYWN0OiB7IHRleHQ6ICLinIUiLCBrZXk6IG0ua2V5IH0sCgl9KTsKCX0gY2F0Y2ggKGVycikgewoJCWNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHh3aW5rZWw6JywgZXJyKTsKCX0KYnJlYWs7Cn0KICAgICAgICAKY2FzZSAnd2lvcyc6IHsKCXRyeSB7CgkJaWYgKCFpc0FwcHJvdmVkKSB7CgkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCQl9KTsKCQkJCQkJCgkJCWlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKCQkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGFkYSBkaSBBQ0MhIFNpbGFrYW4gaHVidW5naSBvd25lcicpOwoJCQkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQkJCX0KCQkJCXJldHVybjsKCQkJfQoJCQlpZiAoIWlzUHJlbWl1bSkgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShtZXNzLm9ubHkucHJlbWl1bSk7CgkJCX0KCQkJCWlmICghcSkgewoJCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQoJCQl9KQoJCQkJcmV0dXJuIHJlcGx5KGBVc2U6ICR7cHJlZml4K2NvbW1hbmR9IG51bWJlclxuRXhhbXBsZTogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKTsKCQkJfQoJCWF3YWl0IGxvYWRpbmcoKQoJCWNvbnN0IHRhcmdldCA9IHEucmVwbGFjZSgvW14wLTldL2csJycpICsgIkBzLndoYXRzYXBwLm5ldCI7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHsKCQlhd2FpdCB3aW9zKHRhcmdldCwgUHRjcCA9IHRydWUpCiAgICAgICAgYXdhaXQgd2lvcyh0YXJnZXQsIFB0Y3AgPSB0cnVlKQoJCWF3YWl0IHNsZWVwKDUwMCk7Cn0KCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKCQlyZWFjdDogeyB0ZXh0OiAi4pyFIiwga2V5OiBtLmtleSB9LAoJfSk7Cgl9IGNhdGNoIChlcnIpIHsKCQljb25zb2xlLmVycm9yKCdFcnJvciBpbiB3aW9zOicsIGVycik7Cgl9CmJyZWFrOwp9CiAgICAgICAgCmNhc2UgJ3d0cmFzaGlvcyc6IHsKCXRyeSB7CgkJaWYgKCFpc0FwcHJvdmVkKSB7CgkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCQl9KTsKCQkJCQkJCgkJCWlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKCQkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGFkYSBkaSBBQ0MhIFNpbGFrYW4gaHVidW5naSBvd25lcicpOwoJCQkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQkJCX0KCQkJCXJldHVybjsKCQkJfQoJCQlpZiAoIWlzUHJlbWl1bSkgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShtZXNzLm9ubHkucHJlbWl1bSk7CgkJCX0KCQkJCWlmICghcSkgewoJCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQoJCQl9KQoJCQkJcmV0dXJuIHJlcGx5KGBVc2U6ICR7cHJlZml4K2NvbW1hbmR9IG51bWJlclxuRXhhbXBsZTogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKTsKCQkJfQoJCWF3YWl0IGxvYWRpbmcoKQoJCWNvbnN0IHRhcmdldCA9IHEucmVwbGFjZSgvW14wLTldL2csJycpICsgIkBzLndoYXRzYXBwLm5ldCI7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCAyOyBpKyspIHsKICAgICAgICBhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjIodGFyZ2V0KQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjModGFyZ2V0KQoJCWF3YWl0IHdpb3ModGFyZ2V0LCBQdGNwID0gdHJ1ZSkKICAgICAgICBhd2FpdCB3aW9zKHRhcmdldCwgUHRjcCA9IHRydWUpCgkJYXdhaXQgc2xlZXAoNTAwKTsKfQoJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAoJCXJlYWN0OiB7IHRleHQ6ICLinIUiLCBrZXk6IG0ua2V5IH0sCgl9KTsKCX0gY2F0Y2ggKGVycikgewoJCWNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHdpb3M6JywgZXJyKTsKCX0KYnJlYWs7Cn0KICAgICAgICAKY2FzZSAneHctZ2FsYXh5JzogewoJdHJ5IHsKCQlpZiAoIWlzQXBwcm92ZWQpIHsKCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQlyZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CgkJCX0pOwoJCQkJCQkKCQkJaWYgKCFoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSkgewoJCQkJcmVwbHkoJ+KdjCBCb3QgYmVsdW0gYWRhIGRpIEFDQyEgU2lsYWthbiBodWJ1bmdpIG93bmVyJyk7CgkJCQkJaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSB0cnVlOwoJCQkJfQoJCQkJcmV0dXJuOwoJCQl9CgkJCWlmICghaXNQcmVtaXVtKSB7CgkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCQl9KQoJCQkJcmV0dXJuIHJlcGx5KG1lc3Mub25seS5wcmVtaXVtKTsKCQkJfQoJCQkJaWYgKCFxKSB7CgkJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCQlyZWFjdDogeyB0ZXh0OiAn4p2TJywga2V5OiBtLmtleSB9CgkJCX0pCgkJCQlyZXR1cm4gcmVwbHkoYFVzZTogJHtwcmVmaXgrY29tbWFuZH0gbnVtYmVyXG5FeGFtcGxlOiAke3ByZWZpeCtjb21tYW5kfSA2Mnh4eGApOwoJCQl9CgkJYXdhaXQgbG9hZGluZygpCgkJY29uc3QgdGFyZ2V0ID0gcS5yZXBsYWNlKC9bXjAtOV0vZywnJykgKyAiQHMud2hhdHNhcHAubmV0IjsKCQlmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykgewogICAgICAgIGF3YWl0IEVuY3J5cHRNZXNzYWdlKHRhcmdldCwgd2FudGVkKQogICAgICAgIGF3YWl0IEJ1Z0JFVEEodGFyZ2V0LCB3YW50ZWQpCgkJYXdhaXQgQnVnQkVUQSh0YXJnZXQpCiAgICAgICAgYXdhaXQgQnVnQkVUQSh0YXJnZXQpCiAgICAgICAgYXdhaXQgRW5jcnlwdE1lc3NhZ2UodGFyZ2V0LCB3YW50ZWQpCgkJYXdhaXQgc2xlZXAoNTAwKTsKfQoJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAoJCXJlYWN0OiB7IHRleHQ6ICLinIUiLCBrZXk6IG0ua2V5IH0sCgl9KTsKCX0gY2F0Y2ggKGVycikgewoJCWNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHh3LWdhbGF4eTonLCBlcnIpOwoJfQpicmVhazsKfQogICAgICAgIApjYXNlICd4dy1pc2VrYWknOiB7Cgl0cnkgewoJCWlmICghaXNBcHByb3ZlZCkgewoJCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQkJfSk7CgkJCQkJCQoJCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCQlyZXBseSgn4p2MIEJvdCBiZWx1bSBhZGEgZGkgQUNDISBTaWxha2FuIGh1YnVuZ2kgb3duZXInKTsKCQkJCQloYXNTaG93bkFwcHJvdmFsTWVzc2FnZSA9IHRydWU7CgkJCQl9CgkJCQlyZXR1cm47CgkJCX0KCQkJaWYgKCFpc1ByZW1pdW0pIHsKCQkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCQlyZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CgkJCX0pCgkJCQlyZXR1cm4gcmVwbHkobWVzcy5vbmx5LnByZW1pdW0pOwoJCQl9CgkJCQlpZiAoIXEpIHsKCQkJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQkJCXJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KCQkJfSkKCQkJCXJldHVybiByZXBseShgVXNlOiAke3ByZWZpeCtjb21tYW5kfSBudW1iZXJcbkV4YW1wbGU6ICR7cHJlZml4K2NvbW1hbmR9IDYyeHh4YCk7CgkJCX0KCQlhd2FpdCBsb2FkaW5nKCkKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsgCgkJcmVhY3Q6IHsgdGV4dDogIuKchSIsIGtleTogbS5rZXkgfSwKCX0pOwoJCWNvbnN0IHRhcmdldCA9IHEucmVwbGFjZSgvW14wLTldL2csJycpICsgIkBzLndoYXRzYXBwLm5ldCI7CgkJZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CgkJYXdhaXQgQmxhbmtTY3JlZW4odGFyZ2V0LCBQdGNwID0gdHJ1ZSkKICAgICAgICBhd2FpdCB4d2lua2VsZnIodGFyZ2V0KQogICAgICAgIGF3YWl0IENhbGxYKHRhcmdldCkKICAgICAgICBhd2FpdCBzbGVlcCg1MDApOwogICAgICAgIH0KCQlmb3IgKGxldCBpID0gMDsgaSA8IDEwOyBpKyspIHsKCQlhd2FpdCBCbGFua1NjcmVlbih0YXJnZXQsIFB0Y3AgPSB0cnVlKQogICAgICAgIGF3YWl0IHh3aW5rZWxmcjIodGFyZ2V0KQogICAgICAgIGF3YWl0IENhbGxYKHRhcmdldCkKICAgICAgICBhd2FpdCBzbGVlcCgyMDAwKTsKICAgICAgICB9CiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMDsgaSsrKSB7CgkJYXdhaXQgQmxhbmtTY3JlZW4odGFyZ2V0LCBQdGNwID0gdHJ1ZSkKICAgICAgICBhd2FpdCB4d2lua2VsZnIzKHRhcmdldCkKICAgICAgICBhd2FpdCBDYWxsWCh0YXJnZXQpCiAgICAgICAgYXdhaXQgc2xlZXAoNDAwMCk7CiAgICAgICAgfQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykgewoJCWF3YWl0IEJsYW5rU2NyZWVuKHRhcmdldCwgUHRjcCA9IHRydWUpCiAgICAgICAgYXdhaXQgeHdpbmtlbHN0KHRhcmdldCkKICAgICAgICBhd2FpdCBDYWxsWCh0YXJnZXQpCiAgICAgICAgYXdhaXQgc2xlZXAoNjAwMCk7CiAgICAgICAgfQogICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkrKykgewoJCWF3YWl0IEJsYW5rU2NyZWVuKHRhcmdldCwgUHRjcCA9IHRydWUpCiAgICAgICAgYXdhaXQgeHdpbmtlbGZyKHRhcmdldCkKICAgICAgICBhd2FpdCBDYWxsWCh0YXJnZXQpCiAgICAgICAgYXdhaXQgQmxhbmtTY3JlZW4odGFyZ2V0LCBQdGNwID0gdHJ1ZSkKICAgICAgICBhd2FpdCBzbGVlcCg4MDAwKTsKICAgICAgICB9Cgl9IGNhdGNoIChlcnIpIHsKCQljb25zb2xlLmVycm9yKCdFcnJvciBpbiB4dy1pc2VrYWk6JywgZXJyKTsKCX0KYnJlYWs7Cn0KCi8vIEVORAoKY2FzZSAnbm9ucHJlZml4JzogewoJaWYgKCFpc0FwcHJvdmVkKSB7CgkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQl9KTsKCQkKCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGRpIEFDQyEgU2lsYWhrYW4gaHVidW5naSBvd25lciA2MjgxNTI3NjQxMzA2Jyk7CgkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuOwoJfQogICAgaWYgKCFpc093bmVyKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShtZXNzLm9ubHkub3duZXIpOwogICAgfQogICAgCiAgICB1c2VQcmVmaXggPSBmYWxzZTsKICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgIHJlYWN0OiB7IHRleHQ6ICfwn6SvJywga2V5OiBtLmtleSB9CiAgICB9KQogICAgcmVwbHkoJ+KchSBNb2RlIG5vLXByZWZpeCBiZXJoYXNpbCBkaWFrdGlma2FuISBTZW11YSBjb21tYW5kIGRhcGF0IGRpZ3VuYWthbiB0YW5wYSB0aXRpay4nKTsKICAgIGJyZWFrOwp9CgpjYXNlICdwcmVmaXgnOiB7CglpZiAoIWlzQXBwcm92ZWQpIHsKCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCX0pOwoJCQoJCWlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKCQkJcmVwbHkoJ+KdjCBCb3QgYmVsdW0gZGkgQUNDISBTaWxhaGthbiBodWJ1bmdpIG93bmVyIDYyODE1Mjc2NDEzMDYnKTsKCQkJaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSB0cnVlOwoJCX0KCQlyZXR1cm47Cgl9CiAgICBpZiAoIWlzT3duZXIpIHsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIHJlcGx5KG1lc3Mub25seS5vd25lcik7CiAgICB9CiAgICAKICAgIHVzZVByZWZpeCA9IHRydWU7CiAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+YjicsIGtleTogbS5rZXkgfQogICAgfSkKICAgIHJlcGx5KCfinIUgTW9kZSBwcmVmaXggYmVyaGFzaWwgZGlha3RpZmthbiEgU2VtdWEgY29tbWFuZCBoYXJ1cyBtZW5nZ3VuYWthbiB0aXRpay4nKTsKICAgIGJyZWFrOwp9CgoKCmNhc2UgImtvbnRvbCI6IHsKICAgIGlmICghaXNBcHByb3ZlZCkgewogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CiAgICAgICAgCiAgICAgICAgaWYgKCFoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSkgewogICAgICAgICAgICByZXBseSgn4p2MIEJvdCBiZWx1bSBkaSBBQ0MhIFNpbGFoa2FuIGh1YnVuZ2kgb3duZXIgNjI4MTUyNzY0MTMwNicpOwogICAgICAgICAgICBoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIHJldHVybjsKICAgIH0KCiAgICBpZiAoIWlzQ21kKSByZXR1cm47IAogICAgCiAgICBpZiAoIWlzUHJlbWl1bSkgewogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+luicsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwogICAgICAgIHJlcGx5KCdBc3RhZ2hmaXJ1bGxhaCcpOwogICAgfQogICAgYnJlYWs7Cn0KCmNhc2UgImFkZG93bmVyIjogewoJaWYgKCFpc0FwcHJvdmVkKSB7CgkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQl9KTsKCQkKCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGRpIEFDQyEgU2lsYWhrYW4gaHVidW5naSBvd25lciA2MjgxNTI3NjQxMzA2Jyk7CgkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuOwoJfQogICAgaWYgKCFpc093bmVyKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShtZXNzLm9ubHkub3duZXIpCiAgICB9CiAgICAKICAgIGNvbnN0IHEgPSBhcmdzLmpvaW4oIiAiKQogICAgaWYgKCFxKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShgUGVuZ2d1bmFhbjogJHtwcmVmaXgrY29tbWFuZH0gbm9tb3JcbkNvbnRvaDogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKQogICAgfQoKICAgIGNvbnN0IHBob25lTnVtYmVyID0gcS5zcGxpdCgifCIpWzBdLnJlcGxhY2UoL1teMC05XS9nLCAnJykKICAgIGNvbnN0IGZ1bGxOdW1iZXIgPSBwaG9uZU51bWJlciArICdAcy53aGF0c2FwcC5uZXQnCiAgICAKICAgIGxldCBpc1JlZ2lzdGVyZWQgPSBhd2FpdCB4d2lsbC5vbldoYXRzQXBwKGZ1bGxOdW1iZXIpCiAgICBpZiAoaXNSZWdpc3RlcmVkLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pqg77iPJywga2V5OiBtLmtleSB9CiAgICAgICAgfSkKICAgICAgICByZXR1cm4gcmVwbHkoYE5vbW9yIHRpZGFrIHZhbGlkIGF0YXUgdGlkYWsgdGVyZGFmdGFyIGRpIFdoYXRzQXBwIWApCiAgICB9CgogICAgb3duZXJOdW1iZXIucHVzaChwaG9uZU51bWJlcikKICAgIGZzLndyaXRlRmlsZVN5bmMoJy4vZGF0YWJhc2UvZHRicy9vd25lci5qc29uJywgSlNPTi5zdHJpbmdpZnkob3duZXJOdW1iZXIpKQogICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KchScsIGtleTogbS5rZXkgfQogICAgfSkKICAgIHJlcGx5KGDinIUgQmVyaGFzaWwgbWVuYW1iYWhrYW4gJHtwaG9uZU51bWJlcn0gc2ViYWdhaSBvd25lciFgKQogICAgYnJlYWs7Cn0KCmNhc2UgImRlbG93bmVyIjogewoJaWYgKCFpc0FwcHJvdmVkKSB7CgkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQl9KTsKCQkKCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGRpIEFDQyEgU2lsYWhrYW4gaHVidW5naSBvd25lciA2MjgxNTI3NjQxMzA2Jyk7CgkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuOwoJfQogICAgaWYgKCFpc093bmVyKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShtZXNzLm9ubHkub3duZXIpCiAgICB9CiAgICAKICAgIGNvbnN0IHEgPSBhcmdzLmpvaW4oIiAiKQogICAgaWYgKCFhcmdzWzBdKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShgUGVuZ2d1bmFhbjogJHtwcmVmaXgrY29tbWFuZH0gbm9tb3JcbkNvbnRvaDogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKQogICAgfQoKICAgIGNvbnN0IHBob25lTnVtYmVyID0gcS5zcGxpdCgifCIpWzBdLnJlcGxhY2UoL1teMC05XS9nLCAnJykKICAgIGNvbnN0IG93bmVySW5kZXggPSBvd25lck51bWJlci5pbmRleE9mKHBob25lTnVtYmVyKQogICAgCiAgICBpZiAob3duZXJJbmRleCA9PT0gLTEpIHsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KaoO+4jycsIGtleTogbS5rZXkgfQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIHJlcGx5KGBOb21vciB0ZXJzZWJ1dCB0aWRhayB0ZXJkYWZ0YXIgc2ViYWdhaSBvd25lciFgKQogICAgfQoKICAgIG93bmVyTnVtYmVyLnNwbGljZShvd25lckluZGV4LCAxKQogICAgZnMud3JpdGVGaWxlU3luYygnLi9kYXRhYmFzZS9kdGJzL293bmVyLmpzb24nLCBKU09OLnN0cmluZ2lmeShvd25lck51bWJlcikpCiAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pyFJywga2V5OiBtLmtleSB9CiAgICB9KQogICAgcmVwbHkoYOKchSBCZXJoYXNpbCBtZW5naGFwdXMgJHtwaG9uZU51bWJlcn0gZGFyaSBkYWZ0YXIgb3duZXIhYCkKICAgIGJyZWFrOwp9CgpjYXNlICdzZWxmJzogewoJaWYgKCFpc0FwcHJvdmVkKSB7CgkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQl9KTsKCQkKCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGRpIEFDQyEgU2lsYWhrYW4gaHVidW5naSBvd25lciA2MjgxNTI3NjQxMzA2Jyk7CgkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuOwoJfQogICAgaWYgKCFpc093bmVyKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShtZXNzLm9ubHkub3duZXIpCiAgICB9CiAgICAKICAgIHh3aWxsLnB1YmxpYyA9IGZhbHNlCiAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+UkicsIGtleTogbS5rZXkgfQogICAgfSkKICAgIHJlcGx5KCfinIUgQm90IGJlcmhhc2lsIGRpdWJhaCBrZSBtb2RlIHByaXZhdGUhJykKICAgIGJyZWFrOwp9CgpjYXNlICdwdWJsaWMnOiB7CglpZiAoIWlzQXBwcm92ZWQpIHsKCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKCQkJcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQoJCX0pOwoJCQoJCWlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKCQkJcmVwbHkoJ+KdjCBCb3QgYmVsdW0gZGkgQUNDISBTaWxhaGthbiBodWJ1bmdpIG93bmVyIDYyODE1Mjc2NDEzMDYnKTsKCQkJaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSB0cnVlOwoJCX0KCQlyZXR1cm47Cgl9CiAgICBpZiAoIWlzT3duZXIpIHsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIHJlcGx5KG1lc3Mub25seS5vd25lcikKICAgIH0KICAgIAogICAgeHdpbGwucHVibGljID0gdHJ1ZQogICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ/CflJMnLCBrZXk6IG0ua2V5IH0KICAgIH0pCiAgICByZXBseSgn4pyFIEJvdCBiZXJoYXNpbCBkaXViYWgga2UgbW9kZSBwdWJsaWMhJykKICAgIGJyZWFrOwp9CgpjYXNlICJhZGRwcmVtIjogewoJaWYgKCFpc0FwcHJvdmVkKSB7CgkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQl9KTsKCQkKCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGRpIEFDQyEgU2lsYWhrYW4gaHVidW5naSBvd25lciA2MjgxNTI3NjQxMzA2Jyk7CgkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuOwoJfQogICAgaWYgKCFpc093bmVyKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShtZXNzLm9ubHkub3duZXIpCiAgICB9CiAgICAKICAgIGNvbnN0IHEgPSBhcmdzLmpvaW4oIiAiKQogICAgaWYgKCFhcmdzWzBdKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShgUGVuZ2d1bmFhbjogJHtwcmVmaXgrY29tbWFuZH0gbm9tb3JcbkNvbnRvaDogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKQogICAgfQoKICAgIGNvbnN0IHBob25lTnVtYmVyID0gcS5zcGxpdCgifCIpWzBdLnJlcGxhY2UoL1teMC05XS9nLCAnJykKICAgIGNvbnN0IGZ1bGxOdW1iZXIgPSBwaG9uZU51bWJlciArICdAcy53aGF0c2FwcC5uZXQnCiAgICAKICAgIGxldCBpc1JlZ2lzdGVyZWQgPSBhd2FpdCB4d2lsbC5vbldoYXRzQXBwKGZ1bGxOdW1iZXIpCiAgICBpZiAoaXNSZWdpc3RlcmVkLmxlbmd0aCA9PT0gMCkgewogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pqg77iPJywga2V5OiBtLmtleSB9CiAgICAgICAgfSkKICAgICAgICByZXR1cm4gcmVwbHkoYE5vbW9yIHRpZGFrIHZhbGlkIGF0YXUgdGlkYWsgdGVyZGFmdGFyIGRpIFdoYXRzQXBwIWApCiAgICB9CgogICAgcHJlbS5wdXNoKGZ1bGxOdW1iZXIpCiAgICBmcy53cml0ZUZpbGVTeW5jKCIuL2RhdGFiYXNlL2R0YnMvcHJlbWl1bS5qc29uIiwgSlNPTi5zdHJpbmdpZnkocHJlbSkpCiAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+SjicsIGtleTogbS5rZXkgfQogICAgfSkKICAgIHJlcGx5KGDinIUgQmVyaGFzaWwgbWVuYW1iYWhrYW4gJHtwaG9uZU51bWJlcn0gc2ViYWdhaSB1c2VyIHByZW1pdW0hYCkKICAgIGJyZWFrOwp9CgpjYXNlICJkZWxwcmVtIjogewoJaWYgKCFpc0FwcHJvdmVkKSB7CgkJYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CgkJCXJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KCQl9KTsKCQkKCQlpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CgkJCXJlcGx5KCfinYwgQm90IGJlbHVtIGRpIEFDQyEgU2lsYWhrYW4gaHVidW5naSBvd25lciA2MjgxNTI3NjQxMzA2Jyk7CgkJCWhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKCQl9CgkJcmV0dXJuOwoJfQogICAgaWYgKCFpc093bmVyKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShtZXNzLm9ubHkub3duZXIpCiAgICB9CiAgICAKICAgIGNvbnN0IHEgPSBhcmdzLmpvaW4oIiAiKQogICAgaWYgKCFhcmdzWzBdKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShgUGVuZ2d1bmFhbjogJHtwcmVmaXgrY29tbWFuZH0gbm9tb3JcbkNvbnRvaDogJHtwcmVmaXgrY29tbWFuZH0gNjJ4eHhgKQogICAgfQoKICAgIGNvbnN0IHBob25lTnVtYmVyID0gcS5zcGxpdCgifCIpWzBdLnJlcGxhY2UoL1teMC05XS9nLCAnJykKICAgIGNvbnN0IGZ1bGxOdW1iZXIgPSBwaG9uZU51bWJlciArICdAcy53aGF0c2FwcC5uZXQnCiAgICBjb25zdCBwcmVtSW5kZXggPSBwcmVtLmluZGV4T2YoZnVsbE51bWJlcikKICAgIAogICAgaWYgKHByZW1JbmRleCA9PT0gLTEpIHsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KaoO+4jycsIGtleTogbS5rZXkgfQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIHJlcGx5KGBOb21vciB0ZXJzZWJ1dCB0aWRhayB0ZXJkYWZ0YXIgc2ViYWdhaSB1c2VyIHByZW1pdW0hYCkKICAgIH0KCiAgICBwcmVtLnNwbGljZShwcmVtSW5kZXgsIDEpCiAgICBmcy53cml0ZUZpbGVTeW5jKCIuL2RhdGFiYXNlL2R0YnMvcHJlbWl1bS5qc29uIiwgSlNPTi5zdHJpbmdpZnkocHJlbSkpCiAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+SlCcsIGtleTogbS5rZXkgfQogICAgfSkKICAgIHJlcGx5KGDinIUgQmVyaGFzaWwgbWVuZ2hhcHVzICR7cGhvbmVOdW1iZXJ9IGRhcmkgZGFmdGFyIHByZW1pdW0hYCkKICAgIGJyZWFrOwp9CgoKCgpjYXNlICdzcGFtcGFpcic6IHsKICAgIHRyeSB7CgkJaWYgKCFpc0FwcHJvdmVkKSB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIHJlcGx5KCfinYwgQm90IGJlbHVtIGFkYSBkaSBBQ0MhIFNpbGFrYW4gaHVidW5naSBvd25lcicpOwogICAgICAgICAgICAgICAgaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFpc1ByZW1pdW0pIHsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIHJldHVybiByZXBseShtZXNzLm9ubHkucHJlbWl1bSk7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGNvbnN0IHEgPSBhcmdzLmpvaW4oIiAiKTsKICAgICAgICBjb25zdCBjb3VudHJ5Q29kZXMgPSBnZXRDb3VudHJ5Q29kZXMoKTsKCiAgICAgICAgaWYgKCFxKSB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KQogICAgICAgICAgICBsZXQgaGVscFRleHQgPSBgSG93IHRvIHVzZTogJHtwcmVmaXggKyBjb21tYW5kfSA8bnVtYmVyPlxuXG5FeGFtcGxlcyBvZiB1c2UgZm9yIHNvbWUgY291bnRyaWVzOlxuYDsKICAgICAgICAgICAgaGVscFRleHQgKz0gYPCfh67wn4epIEluZG9uZXNpYTogJHtwcmVmaXggKyBjb21tYW5kfSA2Mjh4eHhcbmA7CiAgICAgICAgICAgIGhlbHBUZXh0ICs9IGDwn4e68J+HuCBVU0E6ICR7cHJlZml4ICsgY29tbWFuZH0gMXh4eFxuYDsKICAgICAgICAgICAgaGVscFRleHQgKz0gYPCfh6/wn4e1IEphcGFuOiAke3ByZWZpeCArIGNvbW1hbmR9IDgxeHh4XG5gOwogICAgICAgICAgICBoZWxwVGV4dCArPSBg8J+HrPCfh6cgVUs6ICR7cHJlZml4ICsgY29tbWFuZH0gNDR4eHhcbmA7CiAgICAgICAgICAgIGhlbHBUZXh0ICs9IGBcbktvZGUgbmVnYXJhIHlhbmcgZGlkdWt1bmc6XG5gOwogICAgICAgICAgICAKICAgICAgICAgICAgY29uc3QgcG9wdWxhckNvdW50cmllcyA9IFsnNjInLCAnMScsICc0NCcsICc4MScsICc4NicsICc4MicsICc2MScsICc2NScsICc2MCcsICc2NiddOwogICAgICAgICAgICBwb3B1bGFyQ291bnRyaWVzLmZvckVhY2goY29kZSA9PiB7CiAgICAgICAgICAgICAgICBoZWxwVGV4dCArPSBgJHtjb2RlfTogJHtjb3VudHJ5Q29kZXNbY29kZV19XG5gOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGhlbHBUZXh0ICs9IGBcbktldGlrICR7cHJlZml4fWNvdW50cnljb2RlIHVudHVrIG1lbGloYXQgZGFmdGFyIGxlbmdrYXAga29kZSBuZWdhcmFgOwogICAgICAgICAgICByZXR1cm4gcmVwbHkoaGVscFRleHQpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcmF3TnVtYmVyID0gcS5zcGxpdCgifCIpWzBdLnJlcGxhY2UoL1teMC05XS9nLCAnJyk7CiAgICAgICAgY29uc3QgeyBwaG9uZU51bWJlciwgY291bnRyeUNvZGUgfSA9IHZhbGlkYXRlUGhvbmVOdW1iZXIocmF3TnVtYmVyLCBjb3VudHJ5Q29kZXMpOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ/CfmIgnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKCiAgICAgICAgcmVwbHkoYPCflIQgU3RhcnRlZCBwYWlyaW5nIHNwYW0gdG8gbnVtYmVyICR7cGhvbmVOdW1iZXJ9Li4uXG7wn5OxIENvdW50cnk6ICR7Y291bnRyeUNvZGVzW2NvdW50cnlDb2RlXX0gKCske2NvdW50cnlDb2RlfSlgKTsKCiAgICAgICAgYXdhaXQgc3RhcnRQYWlyU3BhbShwaG9uZU51bWJlciwgY291bnRyeUNvZGUsIGNvdW50cnlDb2Rlcyk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinIUnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVwbHkoYOKchSBTcGFtIHBhaXJpbmcgc3VjY2Vzc2Z1bGx5IGluaXRpYXRlZCB0byBudW1iZXIgJHtwaG9uZU51bWJlcn1cblxu8J+TsSBDb3VudHJ5OiAke2NvdW50cnlDb2Rlc1tjb3VudHJ5Q29kZV19XG7wn4yNIENvdW50cnkgQ29kZXM6ICske2NvdW50cnlDb2RlfVxu4o+x77iPIEludGVydmFsOiAyIHNlY29uZHNcbvCfk4ogU3RhdHVzOiBBY3RpdmVcblxu4pqg77iPIFByb3Nlc255YSBha2FuIGJlcmphbGFuIGRpIGxhdGFyIGJlbGFrYW5nYCk7CgogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKCQlhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQpOwogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNwYW1wYWlyOicsIGVycik7CiAgICAgICAgcmV0dXJuIHJlcGx5KGDinYwgJHtlcnIubWVzc2FnZSB8fCAnVGVyamFkaSBrZXNhbGFoYW4gc2FhdCBtZW11bGFpIHNwYW0gcGFpcmluZyd9YCk7CiAgICB9CiAgICBicmVhazsKfQpjYXNlICdjb3VudHJ5Y29kZSc6IHsKCWlmICghaXNBcHByb3ZlZCkgewoJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQlyZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CgkJfSk7CgkJCgkJaWYgKCFoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSkgewoJCQlyZXBseSgn4p2MIEJvdCBiZWx1bSBhZGEgZGkgQUNDISBTaWxha2FuIGh1YnVuZ2kgb3duZXInKTsKCQkJaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSB0cnVlOwoJCX0KCQlyZXR1cm47Cgl9CiAgICBjb25zdCBjb3VudHJ5Q29kZXMgPSBnZXRDb3VudHJ5Q29kZXMoKTsKICAgIGxldCBoZWxwVGV4dCA9IGBTdXBwb3J0ZWQgY291bnRyeSBjb2RlczpcbmA7CiAgICBmb3IgKGNvbnN0IFtjb2RlLCBjb3VudHJ5XSBvZiBPYmplY3QuZW50cmllcyhjb3VudHJ5Q29kZXMpKSB7CiAgICAgICAgaGVscFRleHQgKz0gYCR7Y29kZX06ICR7Y291bnRyeX1cbmA7CiAgICB9CiAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQpOwogICAgcmV0dXJuIHJlcGx5KGhlbHBUZXh0KTsKfQoKY2FzZSAnZW5jJzogY2FzZSAnZW5jcnlwdCc6IHsKCWlmICghaXNBcHByb3ZlZCkgewoJCWF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewoJCQlyZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CgkJfSk7CgkJCgkJaWYgKCFoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSkgewoJCQlyZXBseSgn4p2MIEJvdCBiZWx1bSBkaSBBQ0MhIFNpbGFoa2FuIGh1YnVuZ2kgb3duZXIgNjI4MTUyNzY0MTMwNicpOwoJCQloYXNTaG93bkFwcHJvdmFsTWVzc2FnZSA9IHRydWU7CgkJfQoJCXJldHVybjsKCX0KICAgIGlmICghaXNQcmVtaXVtKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShtZXNzLm9ubHkucHJlbWl1bSkKICAgIH0KICAgIGlmICghbS5xdW90ZWQpIHsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQogICAgICAgIH0pCiAgICAgICAgcmV0dXJuIHJlcGx5KGBSZXBseSBmaWxlIC5qcyB5YW5nIGluZ2luIGRpIGVuY3J5cHQhYCk7CiAgICB9CiAgICBjb25zdCBxdW90ZWRNc2cgPSBtLnF1b3RlZDsKICAgIGlmIChxdW90ZWRNc2cubXR5cGUgIT09ICdkb2N1bWVudE1lc3NhZ2UnIHx8IHF1b3RlZE1zZy5taW1ldHlwZSAhPT0gImFwcGxpY2F0aW9uL2phdmFzY3JpcHQiKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfimqDvuI8nLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KQogICAgICAgIHJldHVybiByZXBseShgRmlsZSBoYXJ1cyBiZXJmb3JtYXQgLmpzIWApOwogICAgfSAgIAogICAgdHJ5IHsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+Kame+4jycsIGtleTogbS5rZXkgfQogICAgICAgIH0pCiAgICAgICAgCiAgICAgICAgbGV0IG1lZGlhID0gYXdhaXQgcXVvdGVkTXNnLmRvd25sb2FkKCk7CiAgICAgICAgbGV0IGZpbGVuYW1lID0gcXVvdGVkTXNnLmZpbGVOYW1lIHx8ICJlbmNyeXB0ZWRieXdpbmtlbHMuanMiOwogICAgICAgIGlmICghZnMuZXhpc3RzU3luYygnLi9kYXRhYmFzZS9zYW1wYWgvJykpIHsKICAgICAgICAgICAgZnMubWtkaXJTeW5jKCcuL2RhdGFiYXNlL3NhbXBhaC8nLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTsKICAgICAgICB9CgogICAgICAgIGF3YWl0IGZzLndyaXRlRmlsZVN5bmMoYC4vZGF0YWJhc2Uvc2FtcGFoLyR7ZmlsZW5hbWV9YCwgbWVkaWEpOwogICAgICAgIHJlcGx5KCJNZW1wcm9zZXMgZW5jcnlwdCBjb2RlIC4gLiAuIik7CgogICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gYXdhaXQgZnMucmVhZEZpbGVTeW5jKGAuL2RhdGFiYXNlL3NhbXBhaC8ke2ZpbGVuYW1lfWApLnRvU3RyaW5nKCk7CiAgICAgICAgCiAgICAgICAgSnNDb25mdXNlci5vYmZ1c2NhdGUoZmlsZUNvbnRlbnQsIHsKCQkJdGFyZ2V0OiAibm9kZSIsCiAgICAgICAgICAgIHByZXNldDogImhpZ2giLAogICAgICAgICAgICBjYWxjdWxhdG9yOiB0cnVlLAogICAgICAgICAgICBjb21wYWN0OiB0cnVlLAogICAgICAgICAgICBoZXhhZGVjaW1hbE51bWJlcnM6IHRydWUsCiAgICAgICAgICAgIGNvbnRyb2xGbG93RmxhdHRlbmluZzogMC43NSwKICAgICAgICAgICAgZGVhZENvZGU6IDAuMiwKICAgICAgICAgICAgZGlzcGF0Y2hlcjogdHJ1ZSwKICAgICAgICAgICAgZHVwbGljYXRlTGl0ZXJhbHNSZW1vdmFsOiAwLjc1LAogICAgICAgICAgICBmbGF0dGVuOiB0cnVlLAogICAgICAgICAgICBnbG9iYWxDb25jZWFsaW5nOiB0cnVlLAogICAgICAgICAgICBpZGVudGlmaWVyR2VuZXJhdG9yOiAicmFuZG9taXplZCIsCiAgICAgICAgICAgIG1pbmlmeTogdHJ1ZSwKICAgICAgICAgICAgbW92ZWREZWNsYXJhdGlvbnM6IHRydWUsCiAgICAgICAgICAgIG9iamVjdEV4dHJhY3Rpb246IHRydWUsCiAgICAgICAgICAgIG9wYXF1ZVByZWRpY2F0ZXM6IDAuNzUsCiAgICAgICAgICAgIHJlbmFtZVZhcmlhYmxlczogdHJ1ZSwKICAgICAgICAgICAgcmVuYW1lR2xvYmFsczogdHJ1ZSwKICAgICAgICAgICAgc2h1ZmZsZTogeyBoYXNoOiAwLjUsIHRydWU6IDAuNSB9LAogICAgICAgICAgICBzdGFjazogdHJ1ZSwKICAgICAgICAgICAgc3RyaW5nQ29uY2VhbGluZzogdHJ1ZSwKICAgICAgICAgICAgc3RyaW5nQ29tcHJlc3Npb246IGZhbHNlLCAKICAgICAgICAgICAgc3RyaW5nRW5jb2Rpbmc6IHRydWUsCiAgICAgICAgICAgIHN0cmluZ1NwbGl0dGluZzogMC43NSwKICAgICAgICAgICAgcmdmOiBmYWxzZQoJCX0pLnRoZW4oYXN5bmMgKG9iZnVzY2F0ZWQpID0+IHsKICAgICAgICAgICAgYXdhaXQgZnMud3JpdGVGaWxlU3luYyhgLi9kYXRhYmFzZS9zYW1wYWgvJHtmaWxlbmFtZX1gLCBvYmZ1c2NhdGVkKTsKCiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KchScsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KQoKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7CiAgICAgICAgICAgICAgICBkb2N1bWVudDogZnMucmVhZEZpbGVTeW5jKGAuL2RhdGFiYXNlL3NhbXBhaC8ke2ZpbGVuYW1lfWApLAogICAgICAgICAgICAgICAgbWltZXR5cGU6ICJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0IiwKICAgICAgICAgICAgICAgIGZpbGVOYW1lOiBmaWxlbmFtZSwKICAgICAgICAgICAgICAgIGNhcHRpb246ICJFbmNyeXB0IGZpbGUgc3Vrc2VzIOKchSIKICAgICAgICAgICAgfSwgeyBxdW90ZWQ6IG0gfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBmcy51bmxpbmtTeW5jKGAuL2RhdGFiYXNlL3NhbXBhaC8ke2ZpbGVuYW1lfWApOwogICAgICAgICAgICAKICAgICAgICB9KS5jYXRjaChhc3luYyBlcnJvciA9PiB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KQogICAgICAgICAgICByZXBseSgiRXJyb3I6ICIgKyBlcnJvcik7CiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgICAgIH0pOwogICAgICAgIAogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQogICAgICAgIH0pCiAgICAgICAgcmVwbHkoIkVycm9yOiAiICsgZXJyb3IpOwogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpOwogICAgfQogICAgYnJlYWs7Cn0KCmNhc2UgJ2Nla2tvbnRvbCc6IHsKCWlmICghaXNDbWQpIHJldHVybjsKCWlmICghcSkgcmV0dXJuIHJlcGx5KCdOYW1hIG55YSBtYW5hIHlhbmcgbWF1IGRpIGNlayBrb250b2wgbnlhJykKCWZ1bmN0aW9uIHBpY2tSYW5kb20obGlzdCkgewoJCXJldHVybiBsaXN0W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxpc3QubGVuZ3RoKV0KCX0KCgoJcmVwbHkoYArilZTilZDilZDilZDjgI4gKkNFSyogKktPTlRPTCog44CP4pWQ4pWQ4pWQ4oqxCuKVoOKepCBOYW1hIDogJHtxfQrilaDinqQgS29udG9sbnlhIDogJHtwaWNrUmFuZG9tKFsnaWggaXRlbScsICdCZWxhbmcgd2t3aycsICdNdWx1c3MnLCAnUHV0aWggTXVsdXMnLCAnQmxhY2sgRG9mZicsICdQaW5rIHdvdycsICdJdGVtIEdsb3NzeSddKX0K4pWg4p6kIFRpcGUgOiAke3BpY2tSYW5kb20oWydwZXJqYWthJywgJ2dhIHBlcmpha2EnLCAndWRhaCBwZXJuYWggZGltYXN1a2luJywgJ21hc2loIG9yaScsICdqdW1ibyddKX0K4pWg4p6kIGplbWJ1dG55YSA6ICR7cGlja1JhbmRvbShbJ2xlYmF0JywgJ2FkYSBzZWRpa2l0JywgJ2dhZGEgamVtYnV0JywgJ3RpcGlzJywgJ211bHVzcyddKX0K4pWg4p6kIHVrdXJhbm55YSA6ICR7cGlja1JhbmRvbShbJzFjbScsICcyY20nLCAnM2NtJywgJzRjbScsICc1Y20nLCAnMjBjbScsICc0NWNtJywgJzUwY20nLCAnOTBtZXRlcicsICcxNTBtZXRlcicsICc1a20nLCAnZ2FrIG5vcm1hbCddKX0K4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4oqxYCkKfQoJYnJlYWsKCmNhc2UgJ2Nla2tob2RhbSc6IHsKCWlmICghaXNDbWQpIHJldHVybjsKCWlmICghcSkgcmV0dXJuIHJlcGx5KCdOYW1hIG55YSBtYW5hIHlhbmcgbWF1IGRpIGNlayBraG9kYW0gbnlhJykKCWZ1bmN0aW9uIHBpY2tSYW5kb20obGlzdCkgewoJCXJldHVybiBsaXN0W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxpc3QubGVuZ3RoKV0KCX0KCXJlcGx5KGAK4pWU4pWQ4pWQ4pWQ44COICpDRUsqICpLSE9EQU0qIOOAj+KVkOKVkOKVkOKKsQrilaDinqQgTmFtYSA6ICR7cX0K4pWg4p6kIEtob2RhbSA6ICR7cGlja1JhbmRvbShbJ01hY2FuIFR1dHVsJywgJ0dhamFoIFN1bWF0ZXJhJywgJ09yYW5ndXRhbicsICdIYXJpbWF1IFB1dGloJywgJ0JhZGFrIEphd2EnLCAnUG9jb25nJywgJ0t1bnRpbGFuYWsnLCAnR2VuZGVydXdvJywgJ1dld2UgR29tYmVsJywgJ0t1eWFuZycsICdMZW1idXN3YW5hJywgJ0Fub2EnLCAnS29tb2RvJywgJ0VsYW5nIEphd2EnLCAnQnVydW5nIENlbmRyYXdhc2loJywgJ1R1eXVsJywgJ0JhYmkgTmdlcGV0JywgJ1N1bmRlbCBCb2xvbmcnLCAnSmVuZ2xvdCcsICdMZWxlIFNhbmdrdXJpYW5nJywgJ0t1Y2luZyBIdXRhbicsICdBeWFtIENlbWFuaScsICdDaWNhaycsICdCdXJ1bmcgTWVyYWsnLCAnS3VkYSBMdW1waW5nJywgJ0J1YXlhIE11YXJhJywgJ0JhbnRlbmcgSmF3YScsICdNb255ZXQgRWtvciBQYW5qYW5nJywgJ1RhcnNpdXMnLCAnQ2VuZGVyYXdhc2loIEJpcnUnLCAnU2V0YW4gTWVyYWgnLCAnS29sb3IgSWpvJywgJ1BhbGFzaWsnLCAnTnlpIFJvcm8gS2lkdWwnLCAnU2lsdW1hbiBVbGFyJywgJ0tlbGFiYW5nJywgJ0JlcnVhbmcgTWFkdScsICdTZXJpZ2FsYScsICdIaXUgS2FyYW5nJywgJ1JhamF3YWxpJywgJ0x1dHVuZyBLYXNhcnVuZycsICdLdWRhIFN1bWJhJywgJ0lrYW4gQXJ3YW5hJywgJ0phbGFrIEJhbGknLCAnS2FtYmluZyBFdGF3YScsICdLZWxlbGF3YXInLCAnQnVydW5nIEhhbnR1JywgJ0lrYW4gQ3VwYW5nJ10pfQrilaDinqQgTWVuZGFtcGluZ2kgZGFyaSA6ICR7cGlja1JhbmRvbShbJzEgdGFodW4gbGFsdScsICcyIHRhaHVuIGxhbHUnLCAnMyB0YWh1biBsYWx1JywgJzQgdGFodW4gbGFsdScsICdkYXJpIGxhaGlyJ10pfQrilaDinqQgRGlhIGFrYW4gcGVyZ2kgcGFkYSB0YWh1biA6ICR7cGlja1JhbmRvbShbJzIwMjQnLCAnMjAyNScsICcyMDI2JywgJzIwMjcnLCAnMjAyOCcsICcyMDI5JywgJzIwMzAnLCAnMjAzMScsICcyMDMyJywgJzIwMzMnLCAnMjAzNCcsICcyMDM1J10pfQrilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDiirFgKQp9CglicmVhawoKY2FzZSAnY2VrbWVtZWsnOiB7CglpZiAoIWlzQ21kKSByZXR1cm47CglpZiAoIXEpIHJldHVybiByZXBseSgnTmFtYSBueWEgbWFuYSB5YW5nIG1hdSBkaSBjZWsgbWVtZWsgbnlhJykKCWZ1bmN0aW9uIHBpY2tSYW5kb20obGlzdCkgewoJCXJldHVybiBsaXN0W01hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGxpc3QubGVuZ3RoKV0KCX0KCgoJcmVwbHkoYArilZTilZDilZDilZDjgI4gKkNFSyogKk1FTUVLKiDjgI/ilZDilZDilZDiirEK4pWg4p6kIE5hbWEgOiAke3F9CuKVoOKepCBNZW1layA6ICR7cGlja1JhbmRvbShbJ2loIGl0ZW0nLCAnQmVsYW5nIHdrd2snLCAnTXVsdXNzJywgJ1B1dGloIE11bHVzJywgJ1BpbmsgQmFuZ2V0JywgJ0JsYWNrIERvZmYnLCAnUGluayB3b3cnLCAnSXRlbSBHbG9zc3knXSl9CuKVoOKepCBUaXBlIDogJHtwaWNrUmFuZG9tKFsnUGVyYXdhbicsICdnYSBwZXJhd2FuJywgJ3VkYWggcGVybmFoIGRpbWFzdWtpbicsICdUZW1iZW0nLCAnbWFzaWggb3JpJywgJ2p1bWJvJ10pfQrilaDinqQgamVtYnV0IDogJHtwaWNrUmFuZG9tKFsnbGViYXQnLCAnYWRhIHNlZGlraXQnLCAnZ2FkYSBqZW1idXQnLCAndGlwaXMnLCAnbXVsdXNzJ10pfQrilaDinqQgVGlwZSB1a3VyYW4gOiAke3BpY2tSYW5kb20oWydTZW1waXQnLCAnTHVtYXlhbiBTZW1waXQnLCAnTG9uZ2dhcicsICdMdW1heWFuIGxvbmdnYXInLCAnQm9sb25nJywgJ0JvbG9uZyBnZWRlIGFuamlyJywgJ1B1Y3VrbnlhIEtlbmRvcicsICdLZW5kb3InLCAnTHVtYXlhbiBrZW5kb3InLCAnU2VtcHVybmEgQmVqaXInLCAnTHVtYXlhbiBTZW1wdXJuYScsICdTZW1wdXJuYSBCYXUgS2VwZXJhd2FuYW5ueWEnLCAnZ2FrIG5vcm1hbCddKX0K4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4oqxYCkKfQoJYnJlYWsKCmNhc2UgJ29iZjEnOiB7CiAgICB0cnkgewogICAgICAgIGlmICghaXNBcHByb3ZlZCkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXBseSgn4p2MIEJvdCBiZWx1bSBkaSBBQ0MhIFNpbGFoa2FuIGh1YnVuZ2kgb3duZXInKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgcXVvdGVkID0gbS5xdW90ZWQgPyBtLnF1b3RlZCA6IG07CiAgICAgICAgaWYgKCFxdW90ZWQgfHwgcXVvdGVkLm10eXBlICE9PSAnZG9jdW1lbnRNZXNzYWdlJykgewogICAgICAgICAgICByZXR1cm4gcmVwbHkoJ+KaoO+4jyBNb2hvbiBSZXBseSBGaWxlIEpTIEFuZGEhJyk7CiAgICAgICAgfQogICAgICAgIGNvbnN0IHByb2dyZXNzTWVzc2FnZSA9IGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKICAgICAgICAgICAgdGV4dDogJ/CflIQgTWVtdWxhaSBwcm9zZXMgb2JmdXNjYXRlLi4uXG5cbvCfk4ogUHJvZ3Jlc3M6IFsgICAgICAgICAgXSAwJScgCiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IHVwZGF0ZVByb2dyZXNzID0gYXN5bmMgKHBlcmNlbnRhZ2UpID0+IHsKICAgICAgICAgICAgY29uc3QgcHJvZ3Jlc3NCYXIgPSAn4paIJy5yZXBlYXQoTWF0aC5mbG9vcihwZXJjZW50YWdlIC8gMTApKSArIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcgJy5yZXBlYXQoMTAgLSBNYXRoLmZsb29yKHBlcmNlbnRhZ2UgLyAxMCkpOwogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsgCiAgICAgICAgICAgICAgICB0ZXh0OiBg8J+UhCBTZWRhbmcgbWVtcHJvc2VzLi4uXG5cbvCfk4ogUHJvZ3Jlc3M6IFske3Byb2dyZXNzQmFyfV0gJHtwZXJjZW50YWdlfSVgLAogICAgICAgICAgICAgICAgZWRpdDogcHJvZ3Jlc3NNZXNzYWdlLmtleSAKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgLi9kYXRhYmFzZS9zYW1wYWgvJHtxdW90ZWQuZmlsZU5hbWV9YDsKICAgICAgICBjb25zdCBmaWxlQnVmZmVyID0gYXdhaXQgcXVvdGVkLmRvd25sb2FkKCk7CiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBmaWxlQnVmZmVyKTsKICAgICAgICBhd2FpdCB1cGRhdGVQcm9ncmVzcygyNSk7CiAgICAgICAgY29uc3Qgb2JmdXNjYXRlZENvZGUgPSBhd2FpdCBKc0NvbmZ1c2VyLm9iZnVzY2F0ZShmaWxlQnVmZmVyLnRvU3RyaW5nKCksIG9wdGlvbnMpOwogICAgICAgIAogICAgICAgIGF3YWl0IHVwZGF0ZVByb2dyZXNzKDUwKTsKICAgICAgICBjb25zdCBvYmZ1c2NhdGVkRmlsZVBhdGggPSBgLi9kYXRhYmFzZS9zYW1wYWgvb2JmdXNjYXRlZF94d2lua2Vscy5qc2A7CiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKG9iZnVzY2F0ZWRGaWxlUGF0aCwgb2JmdXNjYXRlZENvZGUpOwogICAgICAgIAogICAgICAgIGF3YWl0IHVwZGF0ZVByb2dyZXNzKDc1KTsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsKICAgICAgICAgICAgZG9jdW1lbnQ6IGZzLnJlYWRGaWxlU3luYyhvYmZ1c2NhdGVkRmlsZVBhdGgpLAogICAgICAgICAgICBmaWxlTmFtZTogYG9iZnVzY2F0ZWRfeHdpbmtlbHMuanNgLAogICAgICAgICAgICBtaW1ldHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnLAogICAgICAgICAgICBjYXB0aW9uOiAn8J+UkiBTdWtzZXMgT2JmdXNjYXRlIENvZGVcbuKPsCAnICsgbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpCiAgICAgICAgfSwgeyBxdW90ZWQ6IG0gfSk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgdXBkYXRlUHJvZ3Jlc3MoMTAwKTsKICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTsKICAgICAgICBmcy51bmxpbmtTeW5jKG9iZnVzY2F0ZWRGaWxlUGF0aCk7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAogICAgICAgICAgICB0ZXh0OiAn4pyFIE9iZnVzY2F0aW9uIHNlbGVzYWkhJywKICAgICAgICAgICAgZWRpdDogcHJvZ3Jlc3NNZXNzYWdlLmtleSAKICAgICAgICB9KTsKCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBvYmZGaWxlOicsIGVycik7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfimqDvuI8nLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVwbHkoJ+KdjCBHYWdhbCBvYmZ1c2NhdGUgY29kZSFcbkVycm9yOiAnICsgZXJyLm1lc3NhZ2UpOwogICAgfQogICAgYnJlYWs7Cn0KCgpjYXNlICdvYmZub2MnOiB7CiAgICB0cnkgewogICAgICAgIGlmICghaXNBcHByb3ZlZCkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXBseSgn4p2MIEJvdCBiZWx1bSBkaSBBQ0MhIFNpbGFoa2FuIGh1YnVuZ2kgb3duZXInKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgcXVvdGVkID0gbS5xdW90ZWQgPyBtLnF1b3RlZCA6IG07CiAgICAgICAgaWYgKCFxdW90ZWQgfHwgcXVvdGVkLm10eXBlICE9PSAnZG9jdW1lbnRNZXNzYWdlJykgewogICAgICAgICAgICByZXR1cm4gcmVwbHkoJ+KaoO+4jyAgTW9ob24gUmVwbHkgRmlsZSBKUyBBbmRhIScpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcHJvZ3Jlc3NNZXNzYWdlID0gYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAogICAgICAgICAgICB0ZXh0OiAn8J+UhCBNZW11bGFpIHByb3NlcyBvYmZ1c2NhdGUgKE5PQykuLi5cblxu8J+TiiBQcm9ncmVzczogWyAgICAgICAgICBdIDAlJyAKICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgdXBkYXRlUHJvZ3Jlc3MgPSBhc3luYyAocGVyY2VudGFnZSkgPT4gewogICAgICAgICAgICBjb25zdCBwcm9ncmVzc0JhciA9ICfilognLnJlcGVhdChNYXRoLmZsb29yKHBlcmNlbnRhZ2UgLyAxMCkpICsgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyAnLnJlcGVhdCgxMCAtIE1hdGguZmxvb3IocGVyY2VudGFnZSAvIDEwKSk7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKICAgICAgICAgICAgICAgIHRleHQ6IGDwn5SEIFNlZGFuZyBtZW1wcm9zZXMgKE5PQykuLi5cblxu8J+TiiBQcm9ncmVzczogWyR7cHJvZ3Jlc3NCYXJ9XSAke3BlcmNlbnRhZ2V9JWAsCiAgICAgICAgICAgICAgICBlZGl0OiBwcm9ncmVzc01lc3NhZ2Uua2V5IAogICAgICAgICAgICB9KTsKICAgICAgICB9OwoKICAgICAgICBjb25zdCBmaWxlUGF0aCA9IGAuL2RhdGFiYXNlL3NhbXBhaC8ke3F1b3RlZC5maWxlTmFtZX1gOwogICAgICAgIGNvbnN0IGZpbGVCdWZmZXIgPSBhd2FpdCBxdW90ZWQuZG93bmxvYWQoKTsKICAgICAgICBhd2FpdCB3cml0ZUZpbGUoZmlsZVBhdGgsIGZpbGVCdWZmZXIpOwoKICAgICAgICBhd2FpdCB1cGRhdGVQcm9ncmVzcygyNSk7CiAgICAgICAgY29uc3Qgb2JmdXNjYXRlZENvZGUgPSBhd2FpdCBKc0NvbmZ1c2VyLm9iZnVzY2F0ZShmaWxlQnVmZmVyLnRvU3RyaW5nKCksIG9wc2lvYmYpOwogICAgICAgIAogICAgICAgIGF3YWl0IHVwZGF0ZVByb2dyZXNzKDUwKTsKICAgICAgICBjb25zdCBvYmZ1c2NhdGVkRmlsZVBhdGggPSBgLi9kYXRhYmFzZS9zYW1wYWgvb2JmdXNjYXRlZF94d2lua2Vscy5qc2A7CiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKG9iZnVzY2F0ZWRGaWxlUGF0aCwgb2JmdXNjYXRlZENvZGUpOwogICAgICAgIAogICAgICAgIGF3YWl0IHVwZGF0ZVByb2dyZXNzKDc1KTsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsKICAgICAgICAgICAgZG9jdW1lbnQ6IGZzLnJlYWRGaWxlU3luYyhvYmZ1c2NhdGVkRmlsZVBhdGgpLAogICAgICAgICAgICBmaWxlTmFtZTogYG9iZnVzY2F0ZWRfeHdpbmtlbHMuanNgLAogICAgICAgICAgICBtaW1ldHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnLAogICAgICAgICAgICBjYXB0aW9uOiAn8J+UkiBTdWtzZXMgT2JmdXNjYXRlIENvZGUgKE5PQylcbuKPsCAnICsgbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpCiAgICAgICAgfSwgeyBxdW90ZWQ6IG0gfSk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgdXBkYXRlUHJvZ3Jlc3MoMTAwKTsKICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTsKICAgICAgICBmcy51bmxpbmtTeW5jKG9iZnVzY2F0ZWRGaWxlUGF0aCk7CgogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKICAgICAgICAgICAgdGV4dDogJ+KchSBPYmZ1c2NhdGlvbiBOT0Mgc2VsZXNhaSEnLAogICAgICAgICAgICBlZGl0OiBwcm9ncmVzc01lc3NhZ2Uua2V5IAogICAgICAgIH0pOwoKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIG9iZkZpbGU6JywgZXJyKTsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KaoO+4jycsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZXBseSgn4p2MIEdhZ2FsIG9iZnVzY2F0ZSBjb2RlIVxuRXJyb3I6ICcgKyBlcnIubWVzc2FnZSk7CiAgICB9CiAgICBicmVhazsKfQoKCmNhc2UgJ29iZjInOiB7CiAgICB0cnkgewogICAgICAgIGlmICghaXNBcHByb3ZlZCkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXBseSgn4p2MIEJvdCBiZWx1bSBkaSBBQ0MhIFNpbGFoa2FuIGh1YnVuZ2kgb3duZXInKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgcXVvdGVkID0gbS5xdW90ZWQgPyBtLnF1b3RlZCA6IG07CiAgICAgICAgaWYgKCFxdW90ZWQgfHwgcXVvdGVkLm10eXBlICE9PSAnZG9jdW1lbnRNZXNzYWdlJykgewogICAgICAgICAgICByZXR1cm4gcmVwbHkoJ+KaoO+4jyAgTW9ob24gUmVwbHkgRmlsZSBKUyBBbmRhIScpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcHJvZ3Jlc3NNZXNzYWdlID0gYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAogICAgICAgICAgICB0ZXh0OiAn8J+UhCBNZW11bGFpIHByb3NlcyBvYmZ1c2NhdGUgKE1ldG9kZSAyKS4uLlxuXG7wn5OKIFByb2dyZXNzOiBbICAgICAgICAgIF0gMCUnIAogICAgICAgIH0pOwoKICAgICAgICBjb25zdCB1cGRhdGVQcm9ncmVzcyA9IGFzeW5jIChwZXJjZW50YWdlKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gJ+KWiCcucmVwZWF0KE1hdGguZmxvb3IocGVyY2VudGFnZSAvIDEwKSkgKyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICcucmVwZWF0KDEwIC0gTWF0aC5mbG9vcihwZXJjZW50YWdlIC8gMTApKTsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAogICAgICAgICAgICAgICAgdGV4dDogYPCflIQgU2VkYW5nIG1lbXByb3NlcyAoTWV0b2RlIDIpLi4uXG5cbvCfk4ogUHJvZ3Jlc3M6IFske3Byb2dyZXNzQmFyfV0gJHtwZXJjZW50YWdlfSVgLAogICAgICAgICAgICAgICAgZWRpdDogcHJvZ3Jlc3NNZXNzYWdlLmtleSAKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgLi9kYXRhYmFzZS9zYW1wYWgvJHtxdW90ZWQuZmlsZU5hbWV9YDsKICAgICAgICBjb25zdCBmaWxlQnVmZmVyID0gYXdhaXQgcXVvdGVkLmRvd25sb2FkKCk7CiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBmaWxlQnVmZmVyKTsKCiAgICAgICAgYXdhaXQgdXBkYXRlUHJvZ3Jlc3MoMjUpOwogICAgICAgIGNvbnN0IG9iZnVzY2F0ZWRDb2RlID0gYXdhaXQgSnNDb25mdXNlci5vYmZ1c2NhdGUoZmlsZUJ1ZmZlci50b1N0cmluZygpLCBhcGhybyk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgdXBkYXRlUHJvZ3Jlc3MoNTApOwogICAgICAgIGNvbnN0IG9iZnVzY2F0ZWRGaWxlUGF0aCA9IGAuL2RhdGFiYXNlL3NhbXBhaC9vYmZ1c2NhdGVkX3h3aW5rZWxzLmpzYDsKICAgICAgICBhd2FpdCB3cml0ZUZpbGUob2JmdXNjYXRlZEZpbGVQYXRoLCBvYmZ1c2NhdGVkQ29kZSk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgdXBkYXRlUHJvZ3Jlc3MoNzUpOwogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgewogICAgICAgICAgICBkb2N1bWVudDogZnMucmVhZEZpbGVTeW5jKG9iZnVzY2F0ZWRGaWxlUGF0aCksCiAgICAgICAgICAgIGZpbGVOYW1lOiBgb2JmdXNjYXRlZF94d2lua2Vscy5qc2AsCiAgICAgICAgICAgIG1pbWV0eXBlOiAnYXBwbGljYXRpb24vamF2YXNjcmlwdCcsCiAgICAgICAgICAgIGNhcHRpb246ICfwn5SSIFN1a3NlcyBPYmZ1c2NhdGUgQ29kZSAoTWV0b2RlIDIpXG7ij7AgJyArIG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKQogICAgICAgIH0sIHsgcXVvdGVkOiBtIH0pOwogICAgICAgIAogICAgICAgIGF3YWl0IHVwZGF0ZVByb2dyZXNzKDEwMCk7CiAgICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7CiAgICAgICAgZnMudW5saW5rU3luYyhvYmZ1c2NhdGVkRmlsZVBhdGgpOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsgCiAgICAgICAgICAgIHRleHQ6ICfinIUgT2JmdXNjYXRpb24gTWV0b2RlIDIgc2VsZXNhaSEnLAogICAgICAgICAgICBlZGl0OiBwcm9ncmVzc01lc3NhZ2Uua2V5IAogICAgICAgIH0pOwoKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIG9iZkZpbGU6JywgZXJyKTsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KaoO+4jycsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwogICAgICAgIHJldHVybiByZXBseSgn4p2MIEdhZ2FsIG9iZnVzY2F0ZSBjb2RlIVxuRXJyb3I6ICcgKyBlcnIubWVzc2FnZSk7CiAgICB9CiAgICBicmVhazsKfQoKCmNhc2UgJ29iZjMnOiB7CiAgICB0cnkgewogICAgICAgIGlmICghaXNBcHByb3ZlZCkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXBseSgn4p2MIEJvdCBiZWx1bSBkaSBBQ0MhIFNpbGFoa2FuIGh1YnVuZ2kgb3duZXInKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgcXVvdGVkID0gbS5xdW90ZWQgPyBtLnF1b3RlZCA6IG07CiAgICAgICAgaWYgKCFxdW90ZWQgfHwgcXVvdGVkLm10eXBlICE9PSAnZG9jdW1lbnRNZXNzYWdlJykgewogICAgICAgICAgICByZXR1cm4gcmVwbHkoJ+KaoO+4jyAgTW9ob24gUmVwbHkgRmlsZSBKUyBBbmRhIScpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcHJvZ3Jlc3NNZXNzYWdlID0gYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAogICAgICAgICAgICB0ZXh0OiAn8J+UhCBNZW11bGFpIHByb3NlcyBvYmZ1c2NhdGUgKE1ldG9kZSAzKS4uLlxuXG7wn5OKIFByb2dyZXNzOiBbICAgICAgICAgIF0gMCUnIAogICAgICAgIH0pOwoKICAgICAgICBjb25zdCB1cGRhdGVQcm9ncmVzcyA9IGFzeW5jIChwZXJjZW50YWdlKSA9PiB7CiAgICAgICAgICAgIGNvbnN0IHByb2dyZXNzQmFyID0gJ+KWiCcucmVwZWF0KE1hdGguZmxvb3IocGVyY2VudGFnZSAvIDEwKSkgKyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnICcucmVwZWF0KDEwIC0gTWF0aC5mbG9vcihwZXJjZW50YWdlIC8gMTApKTsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAogICAgICAgICAgICAgICAgdGV4dDogYPCflIQgU2VkYW5nIG1lbXByb3NlcyAoTWV0b2RlIDMpLi4uXG5cbvCfk4ogUHJvZ3Jlc3M6IFske3Byb2dyZXNzQmFyfV0gJHtwZXJjZW50YWdlfSVgLAogICAgICAgICAgICAgICAgZWRpdDogcHJvZ3Jlc3NNZXNzYWdlLmtleSAKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBgLi9kYXRhYmFzZS9zYW1wYWgvJHtxdW90ZWQuZmlsZU5hbWV9YDsKICAgICAgICBjb25zdCBmaWxlQnVmZmVyID0gYXdhaXQgcXVvdGVkLmRvd25sb2FkKCk7CiAgICAgICAgYXdhaXQgd3JpdGVGaWxlKGZpbGVQYXRoLCBmaWxlQnVmZmVyKTsKCiAgICAgICAgYXdhaXQgdXBkYXRlUHJvZ3Jlc3MoMjUpOwogICAgICAgIGNvbnN0IG9iZnVzY2F0ZWRDb2RlID0gYXdhaXQgSnNDb25mdXNlci5vYmZ1c2NhdGUoZmlsZUJ1ZmZlci50b1N0cmluZygpLCBvcHRpbWlzdGlzKTsKICAgICAgICAKICAgICAgICBhd2FpdCB1cGRhdGVQcm9ncmVzcyg1MCk7CiAgICAgICAgY29uc3Qgb2JmdXNjYXRlZEZpbGVQYXRoID0gYC4vZGF0YWJhc2Uvc2FtcGFoL29iZnVzY2F0ZWRfeHdpbmtlbHMuanNgOwogICAgICAgIGF3YWl0IHdyaXRlRmlsZShvYmZ1c2NhdGVkRmlsZVBhdGgsIG9iZnVzY2F0ZWRDb2RlKTsKICAgICAgICAKICAgICAgICBhd2FpdCB1cGRhdGVQcm9ncmVzcyg3NSk7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7CiAgICAgICAgICAgIGRvY3VtZW50OiBmcy5yZWFkRmlsZVN5bmMob2JmdXNjYXRlZEZpbGVQYXRoKSwKICAgICAgICAgICAgZmlsZU5hbWU6IGBvYmZ1c2NhdGVkX3h3aW5rZWxzLmpzYCwKICAgICAgICAgICAgbWltZXR5cGU6ICdhcHBsaWNhdGlvbi9qYXZhc2NyaXB0JywKICAgICAgICAgICAgY2FwdGlvbjogJ/CflJIgU3Vrc2VzIE9iZnVzY2F0ZSBDb2RlIChNZXRvZGUgMylcbuKPsCAnICsgbmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpCiAgICAgICAgfSwgeyBxdW90ZWQ6IG0gfSk7CiAgICAgICAgCiAgICAgICAgYXdhaXQgdXBkYXRlUHJvZ3Jlc3MoMTAwKTsKICAgICAgICBmcy51bmxpbmtTeW5jKGZpbGVQYXRoKTsKICAgICAgICBmcy51bmxpbmtTeW5jKG9iZnVzY2F0ZWRGaWxlUGF0aCk7CgogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKICAgICAgICAgICAgdGV4dDogJ+KchSBPYmZ1c2NhdGlvbiBNZXRvZGUgMyBzZWxlc2FpIScsCiAgICAgICAgICAgIGVkaXQ6IHByb2dyZXNzTWVzc2FnZS5rZXkgCiAgICAgICAgfSk7CgogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gb2JmRmlsZTonLCBlcnIpOwogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pqg77iPJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHJlcGx5KCfinYwgR2FnYWwgb2JmdXNjYXRlIGNvZGUhXG5FcnJvcjogJyArIGVyci5tZXNzYWdlKTsKICAgIH0KICAgIGJyZWFrOwp9CgoKY2FzZSAnZGVjMSc6IGNhc2UgJ2RlY3J5cHQxJzogewogICAgdHJ5IHsKICAgICAgICBpZiAoIWlzQXBwcm92ZWQpIHsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+aqycsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIHJlcGx5KCfinYwgQm90IGJlbHVtIGFkYSBkaSBBQ0MhIFNpbGFrYW4gaHVidW5naSBvd25lcicpOwogICAgICAgICAgICAgICAgaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCFpc1ByZW1pdW0pIHsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+RkScsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlcGx5KCfwn5SSIEZpdHVyIGluaSBraHVzdXMgdW50dWsgcGVuZ2d1bmEgcHJlbWl1bSFcblNpbGFrYW4gdGluZ2thdGthbiBrZSBwcmVtaXVtIHVudHVrIG1lbmdndW5ha2FuIGZpdHVyIGluaS4nKTsKICAgICAgICB9CiAgICAgICAgY29uc3QgdGV4dCA9IGFyZ3Muam9pbigiICIpOwogICAgICAgIGlmICghdGV4dCkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXBseSgn4pqg77iPIE1hc3Vra2FuIHRla3MgeWFuZyBha2FuIGRpZGVrcmlwc2khXG5Db250b2g6IC5kZWMgPGtvZGUgeWFuZyBha2FuIGRpZGVrcmlwc2k+Jyk7CiAgICAgICAgfQogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4o+zJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CgogICAgICAgIGNvbnN0IGRlY3J5cHRlZENvZGUgPSBhd2FpdCBkZW9iZnVzY2F0ZSh0ZXh0KTsKICAgICAgICBjb25zdCB3YXRlcm1hcmsgPSBgLyoKCQkqIERlY3J5cHRlZCBCeSBXaW5rZWxzCgkJKiBUaW1lOiAke25ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKX0KCQkqL1xuXG5gOwogICAgICAgIGNvbnN0IGZpbmFsUmVzdWx0ID0gd2F0ZXJtYXJrICsgZGVjcnlwdGVkQ29kZTsKCiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAogICAgICAgICAgICBkb2N1bWVudDogQnVmZmVyLmZyb20oZmluYWxSZXN1bHQsICd1dGYtOCcpLCAKICAgICAgICAgICAgZmlsZU5hbWU6ICdkZWNyeXB0ZWRfd2lua2Vscy5qcycsIAogICAgICAgICAgICBtaW1ldHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnLAogICAgICAgICAgICBjYXB0aW9uOiAn8J+UkyBTdWtzZXMgRGVjcnlwdCBDb2RlXG7ij7AgJyArIG5ldyBEYXRlKCkudG9Mb2NhbGVTdHJpbmcoKQogICAgICAgIH0sIHsgcXVvdGVkOiBtIH0pOwogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+UkycsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwoKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIGRlYzonLCBlcnIpOwogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pqg77iPJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkKTsKICAgICAgICByZXR1cm4gcmVwbHkoJ+KdjCBHYWdhbCBkZWNyeXB0IGNvZGUhXG5FcnJvcjogJyArIGVyci5tZXNzYWdlKTsKICAgIH0KICAgIGJyZWFrOwp9CgoKY2FzZSAndG91cmwnOiB7CiAgICB0cnkgewogICAgICAgIGlmICghaXNBcHByb3ZlZCkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfwn5qrJywga2V5OiBtLmtleSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCFoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSkgewogICAgICAgICAgICAgICAgcmVwbHkoJ+KdjCBCb3QgYmVsdW0gYWRhIGRpIEFDQyEgU2lsYWthbiBodWJ1bmdpIG93bmVyJyk7CiAgICAgICAgICAgICAgICBoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpc1ByZW1pdW0pIHsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn8J+RkScsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlcGx5KCfwn5SSIEZpdHVyIGluaSBraHVzdXMgdW50dWsgcGVuZ2d1bmEgcHJlbWl1bSFcblNpbGFrYW4gdGluZ2thdGthbiBrZSBwcmVtaXVtIHVudHVrIG1lbmdndW5ha2FuIGZpdHVyIGluaS4nKTsKICAgICAgICB9CgogICAgICAgIGxldCBxdW90ZWQgPSBtLnF1b3RlZCA/IG0ucXVvdGVkIDogbTsKICAgICAgICBsZXQgbWltZSA9IChxdW90ZWQubXNnIHx8IHF1b3RlZCkubWltZXR5cGUgfHwgJyc7CiAgICAgICAgCiAgICAgICAgaWYgKCFxdW90ZWQpIHsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4p2TJywga2V5OiBtLmtleSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcmVwbHkoYOKaoO+4jyBLaXJpbS9SZXBseSBNZWRpYSBkZW5nYW4gY2FwdGlvbiAke3ByZWZpeH10b3VybGApOwogICAgICAgIH0KCiAgICAgICAgaWYgKCEvaW1hZ2V8dmlkZW98YXVkaW98ZG9jdW1lbnQvLnRlc3QobWltZSkpIHsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4p2TJywga2V5OiBtLmtleSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcmVwbHkoYOKaoO+4jyBLaXJpbS9SZXBseSBNZWRpYSAoZ2FtYmFyL3ZpZGVvL2Rva3VtZW4pIGRlbmdhbiBjYXB0aW9uICR7cHJlZml4fXRvdXJsYCk7CiAgICAgICAgfQoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KPsycsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwoKICAgICAgICBjb25zdCBtZWRpYSA9IGF3YWl0IHF1b3RlZC5kb3dubG9hZCgpOwogICAgICAgIGNvbnN0IHsgdXBsb2FkRmlsZSB9ID0gcmVxdWlyZSgnLi9kYXRhYmFzZS9jZXRtb2UnKTsKICAgICAgICAKICAgICAgICBjb25zdCBsaW5rID0gYXdhaXQgdXBsb2FkRmlsZShtZWRpYSk7CiAgICAgICAgCiAgICAgICAgaWYgKCFsaW5rKSB0aHJvdyBuZXcgRXJyb3IoJ1VwbG9hZCBnYWdhbCcpOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KchScsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwoKICAgICAgICBjb25zdCBjYXB0aW9uID0gYArilZTilZDilZDilZDjgI4gVVBMT0FEIEJFUkhBU0lMIOOAj+KVkOKVkOKVkOKKsQrilaDinqQgTGluazogJHtsaW5rfQrilaDinqQgRXhwaXJlZDogTGlmZXRpbWUK4pWa4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4oqxYDsKCiAgICAgICAgcmV0dXJuIHJlcGx5KGNhcHRpb24pOwoKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHRvdXJsOicsIGVycik7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfimqDvuI8nLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQpOwogICAgICAgIHJldHVybiByZXBseSgn4p2MIEdhZ2FsIG1lbmd1cGxvYWQgbWVkaWEhXG5FcnJvcjogJyArIGVyci5tZXNzYWdlKTsKICAgIH0KICAgIGJyZWFrOwp9CmNhc2UgJ3Rpa3Rvayc6IHsKICAgIHRyeSB7CiAgICAgICAgaWYgKCFpc0FwcHJvdmVkKSB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ/CfmqsnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIAogICAgICAgICAgICBpZiAoIWhhc1Nob3duQXBwcm92YWxNZXNzYWdlKSB7CiAgICAgICAgICAgICAgICByZXBseSgn4p2MIEJvdCBiZWx1bSBhZGEgZGkgQUNDISBTaWxha2FuIGh1YnVuZ2kgb3duZXInKTsKICAgICAgICAgICAgICAgIGhhc1Nob3duQXBwcm92YWxNZXNzYWdlID0gdHJ1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzUHJlbWl1bSkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfwn5GRJywga2V5OiBtLmtleSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcmVwbHkoJ/CflJIgRml0dXIgaW5pIGtodXN1cyB1bnR1ayBwZW5nZ3VuYSBwcmVtaXVtIVxuU2lsYWthbiB0aW5na2F0a2FuIGtlIHByZW1pdW0gdW50dWsgbWVuZ2d1bmFrYW4gZml0dXIgaW5pLicpOwogICAgICAgIH0KCiAgICAgICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlcGx5KGDimqDvuI8gTGluayBUaWtUb2sgZGlwZXJsdWthbiFcbkNvbnRvaDogJHtwcmVmaXh9dGlrdG9rIGh0dHBzOi8vdm0udGlrdG9rLmNvbS94eHh4eGApOwogICAgICAgIH0KCiAgICAgICAgaWYgKCFpc1VybChhcmdzWzBdKSkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinYwnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXBseSgn4pqg77iPIFVSTCB0aWRhayB2YWxpZCEgUGFzdGlrYW4gbGluayBkYXJpIFRpa1RvaycpOwogICAgICAgIH0KCgogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4o+zJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CgogICAgICAgIGFzeW5jIGZ1bmN0aW9uIHRpa3RvayhxdWVyeSkgewogICAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2UoYXN5bmMgKHJlc29sdmUsIHJlamVjdCkgPT4gewogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmNvZGVkUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcygpOwogICAgICAgICAgICAgICAgICAgIGVuY29kZWRQYXJhbXMuc2V0KCd1cmwnLCBxdWVyeSk7CiAgICAgICAgICAgICAgICAgICAgZW5jb2RlZFBhcmFtcy5zZXQoJ2hkJywgJzEnKTsKCiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcyh7CiAgICAgICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICAgICAgICB1cmw6ICdodHRwczovL3Rpa3dtLmNvbS9hcGkvJywKICAgICAgICAgICAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgJ0Nvb2tpZSc6ICdjdXJyZW50X2xhbmd1YWdlPWVuJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICdVc2VyLUFnZW50JzogJ01vemlsbGEvNS4wIChMaW51eDsgQW5kcm9pZCAxMDsgSykgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzExNi4wLjAuMCBNb2JpbGUgU2FmYXJpLzUzNy4zNicKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogZW5jb2RlZFBhcmFtcwogICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZpZGVvcyA9IHJlc3BvbnNlLmRhdGEuZGF0YTsKICAgICAgICAgICAgICAgICAgICByZXNvbHZlKHsKICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHZpZGVvcy50aXRsZSwKICAgICAgICAgICAgICAgICAgICAgICAgY292ZXI6IHZpZGVvcy5jb3ZlciwKICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luX2NvdmVyOiB2aWRlb3Mub3JpZ2luX2NvdmVyLAogICAgICAgICAgICAgICAgICAgICAgICBub193YXRlcm1hcms6IHZpZGVvcy5wbGF5LAogICAgICAgICAgICAgICAgICAgICAgICB3YXRlcm1hcms6IHZpZGVvcy53bXBsYXksCiAgICAgICAgICAgICAgICAgICAgICAgIG11c2ljOiB2aWRlb3MubXVzaWMKICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGVycm9yKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aWt0b2soYXJnc1swXSk7CiAgICAgICAgY29uc3QgY2FwdGlvbiA9IGAK4pWU4pWQ4pWQ4pWQ44COIFRJS1RPSyBET1dOTE9BREVSIOOAj+KVkOKVkOKVkOKKsQrilaDinqQgVGl0bGU6ICR7cmVzLnRpdGxlfQrilaDinqQgTXVzaWM6IFNlZGFuZyBkaXByb3Nlcy4uLgrilZrilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDiirFgOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsgCiAgICAgICAgICAgIHZpZGVvOiB7IHVybDogcmVzLm5vX3dhdGVybWFyayB9LCAKICAgICAgICAgICAgY2FwdGlvbjogY2FwdGlvbiwKICAgICAgICAgICAgZmlsZU5hbWU6IGB0aWt0b2tfJHtEYXRlLm5vdygpfS5tcDRgLCAKICAgICAgICAgICAgbWltZXR5cGU6ICd2aWRlby9tcDQnIAogICAgICAgIH0pOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsgCiAgICAgICAgICAgIGF1ZGlvOiB7IHVybDogcmVzLm11c2ljIH0sIAogICAgICAgICAgICBmaWxlTmFtZTogYHRpa3Rva19hdWRpb18ke0RhdGUubm93KCl9Lm1wM2AsIAogICAgICAgICAgICBtaW1ldHlwZTogJ2F1ZGlvL21wNCcgCiAgICAgICAgfSk7CgogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pyFJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CgogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gdGlrdG9rOicsIGVycik7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfimqDvuI8nLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQpOwogICAgICAgIHJldHVybiByZXBseSgn4p2MIEdhZ2FsIG1lbmd1bmR1aCB2aWRlbyBUaWtUb2shXG5FcnJvcjogJyArIGVyci5tZXNzYWdlKTsKICAgIH0KICAgIGJyZWFrOwp9CgoKCgoKCgpjYXNlICd5dG1wMyc6IHsKICAgIHRyeSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7IHJlYWN0OiB7IHRleHQ6ICfwn461Jywga2V5OiBtLmtleSB9fSk7CiAgICAgICAgCiAgICAgICAgaWYgKCFpc0FwcHJvdmVkKSB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgeyByZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9fSk7CiAgICAgICAgICAgIHJldHVybiByZXBseSgn4p2MIEJvdCBiZWx1bSBkaSBBQ0MhJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAoIWlzUHJlbWl1bSkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsgcmVhY3Q6IHsgdGV4dDogJ/CflJInLCBrZXk6IG0ua2V5IH19KTsKICAgICAgICAgICAgcmV0dXJuIHJlcGx5KCfwn5SSIEZpdHVyIGluaSBraHVzdXMgdW50dWsgcGVuZ2d1bmEgcHJlbWl1bSEnKTsKICAgICAgICB9CgogICAgICAgIGlmICghcSkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsgcmVhY3Q6IHsgdGV4dDogJ+KdkycsIGtleTogbS5rZXkgfX0pOwogICAgICAgICAgICByZXR1cm4gcmVwbHkoJ+KaoO+4jyBVUkwgWW91VHViZSBkaXBlcmx1a2FuIScpOwogICAgICAgIH0KICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsgcmVhY3Q6IHsgdGV4dDogJ/Cfk6UnLCBrZXk6IG0ua2V5IH19KTsKCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuYmV0YWJvdHouZXUub3JnL2FwaS9kb3dubG9hZC95dD91cmw9JHtxfSZhcGlrZXk9bmVyb2tnYW50ZW5nYCk7CiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgaWYgKCFkYXRhLnN0YXR1cykgdGhyb3cgJ0dhZ2FsIG1lbmRhcGF0a2FuIGRhdGEgYXVkaW8nOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsKICAgICAgICAgICAgYXVkaW86IHsgdXJsOiBkYXRhLnJlc3VsdC5tcDMgfSwKICAgICAgICAgICAgbWltZXR5cGU6ICdhdWRpby9tcDQnLAogICAgICAgICAgICBmaWxlTmFtZTogYCR7ZGF0YS5yZXN1bHQudGl0bGV9Lm1wM2AsCiAgICAgICAgICAgIGNvbnRleHRJbmZvOiB7CiAgICAgICAgICAgICAgICBleHRlcm5hbEFkUmVwbHk6IHsKICAgICAgICAgICAgICAgICAgICB0aXRsZTogZGF0YS5yZXN1bHQudGl0bGUsCiAgICAgICAgICAgICAgICAgICAgYm9keTogYOKPse+4jyBEdXJhdGlvbjogJHtkYXRhLnJlc3VsdC5kdXJhdGlvbn1zYCwKICAgICAgICAgICAgICAgICAgICBtZWRpYVR5cGU6IDIsCiAgICAgICAgICAgICAgICAgICAgbWVkaWFVcmw6IHEKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgeyByZWFjdDogeyB0ZXh0OiAn4pyFJywga2V5OiBtLmtleSB9fSk7CgogICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7IHJlYWN0OiB7IHRleHQ6ICfimqDvuI8nLCBrZXk6IG0ua2V5IH19KTsKICAgICAgICByZXBseSgn4p2MIEdhZ2FsIG1lbmd1bmR1aCBhdWRpbzogJyArIGVyci5tZXNzYWdlKTsKICAgIH0KICAgIGJyZWFrOwp9CgpjYXNlICd5dG1wNCc6IHsKICAgIHRyeSB7CiAgICAgICAgaWYgKCFpc0FwcHJvdmVkKSByZXR1cm4gcmVwbHkoJ+KdjCBCb3QgYmVsdW0gZGkgQUNDIScpOwogICAgICAgIGlmICghaXNQcmVtaXVtKSByZXR1cm4gcmVwbHkoJ/CflJIgRml0dXIgaW5pIGtodXN1cyB1bnR1ayBwZW5nZ3VuYSBwcmVtaXVtIScpOwogICAgICAgIGlmICghcSkgcmV0dXJuIHJlcGx5KCfimqDvuI8gVVJMIFlvdVR1YmUgZGlwZXJsdWthbiEnKTsKCiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfij7MnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgaHR0cHM6Ly9hcGkuYmV0YWJvdHouZXUub3JnL2FwaS9kb3dubG9hZC95dD91cmw9JHtxfSZhcGlrZXk9bmVyb2tnYW50ZW5nYCk7CiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsKCiAgICAgICAgaWYgKCFkYXRhLnN0YXR1cykgdGhyb3cgJ0dhZ2FsIG1lbmRhcGF0a2FuIGRhdGEgdmlkZW8nOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsKICAgICAgICAgICAgdmlkZW86IHsgdXJsOiBkYXRhLnJlc3VsdC5tcDQgfSwKICAgICAgICAgICAgY2FwdGlvbjogYPCfjqUgKkRvd25sb2FkIEJlcmhhc2lsKlxuXG7wn5OdICpKdWR1bDoqICR7ZGF0YS5yZXN1bHQudGl0bGV9XG7ij7HvuI8gKkR1cmFzaToqICR7ZGF0YS5yZXN1bHQuZHVyYXRpb259c2AsCiAgICAgICAgICAgIG1pbWV0eXBlOiAndmlkZW8vbXA0JwogICAgICAgIH0pOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KchScsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwoKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pqg77iPJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4geXRtcDQ6JywgZXJyKTsKICAgICAgICByZXBseSgn4p2MIEdhZ2FsIG1lbmd1bmR1aCB2aWRlbzogJyArIGVyci5tZXNzYWdlKTsKICAgIH0KICAgIGJyZWFrOwp9CgoKY2FzZSAnZGVjJzogY2FzZSAnZGVjcnlwdCc6IHsKICAgIHRyeSB7CiAgICAgICAgaWYgKCFpc0FwcHJvdmVkKSB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmICghaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UpIHsKICAgICAgICAgICAgICAgIHJlcGx5KCfinYwgQm90IGJlbHVtIGFkYSBkaSBBQ0MhIFNpbGFrYW4gaHVidW5naSBvd25lcicpOwogICAgICAgICAgICAgICAgaGFzU2hvd25BcHByb3ZhbE1lc3NhZ2UgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICB9CgogICAgICAgIGlmICghaXNQcmVtaXVtKSB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ/CfkZEnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXBseSgn8J+UkiBGaXR1ciBpbmkga2h1c3VzIHVudHVrIHBlbmdndW5hIHByZW1pdW0hJyk7CiAgICAgICAgfQoKICAgICAgICBjb25zdCB7IHdlYmNyYWNrIH0gPSBhd2FpdCBpbXBvcnQoJ3dlYmNyYWNrJyk7CiAgICAgICAgY29uc3QgdXNhZ2UgPSBgQ29udG9oOlxuJHtwcmVmaXh9JHtjb21tYW5kfSAoTWFzdWtrYW4gY29kZSlcbiR7cHJlZml4fSR7Y29tbWFuZH0gZG9jIChNZW1iYWxhcyBkb2t1bWVuLmpzKWA7CgogICAgICAgIGxldCB0ZXh0OwogICAgICAgIGlmIChhcmdzLmxlbmd0aCA+PSAxKSB7CiAgICAgICAgICAgIHRleHQgPSBhcmdzLmpvaW4oIiAiKTsKICAgICAgICB9IGVsc2UgaWYgKG0ucXVvdGVkICYmIG0ucXVvdGVkLnRleHQpIHsKICAgICAgICAgICAgdGV4dCA9IG0ucXVvdGVkLnRleHQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuIHJlcGx5KHVzYWdlKTsKICAgICAgICB9CgogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4o+zJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CgogICAgICAgIGxldCBtZXNzYWdlOwogICAgICAgIGlmICh0ZXh0ID09PSAnZG9jJyAmJiBtLnF1b3RlZCAmJiBtLnF1b3RlZC5tdHlwZSA9PT0gJ2RvY3VtZW50TWVzc2FnZScpIHsKICAgICAgICAgICAgaWYgKG0ucXVvdGVkLm1pbWV0eXBlICE9PSAiYXBwbGljYXRpb24vamF2YXNjcmlwdCIpIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXBseSgn4pqg77iPIE1vaG9uIGtpcmltIGZpbGUgZGVuZ2FuIGVrc3RlbnNpIC5qcyEnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZXQgZG9jQnVmZmVyOwogICAgICAgICAgICBpZiAobS5xdW90ZWQubWltZXR5cGUpIHsKICAgICAgICAgICAgICAgIGRvY0J1ZmZlciA9IGF3YWl0IG0ucXVvdGVkLmRvd25sb2FkKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbWVzc2FnZSA9IGF3YWl0IHdlYmNyYWNrKGRvY0J1ZmZlci50b1N0cmluZygndXRmLTgnKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbWVzc2FnZSA9IGF3YWl0IHdlYmNyYWNrKHRleHQpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZmlsZVBhdGggPSAnLi9kYXRhYmFzZS9zYW1wYWgveHdpbmtlbHNCWVh3aW5rZWxzLmpzJzsKICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGZpbGVQYXRoLCBtZXNzYWdlLmNvZGUpOwogICAgICAgIAogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgewogICAgICAgICAgICBkb2N1bWVudDogewogICAgICAgICAgICAgICAgdXJsOiBmaWxlUGF0aAogICAgICAgICAgICB9LAogICAgICAgICAgICBtaW1ldHlwZTogJ2FwcGxpY2F0aW9uL2phdmFzY3JpcHQnLAogICAgICAgICAgICBmaWxlTmFtZTogJ0RlYyBCeSBYd2lua2VscycKICAgICAgICB9LCB7cXVvdGVkOiBtfSk7CgogICAgICAgIGZzLnVubGlua1N5bmMoZmlsZVBhdGgpOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KchScsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwoKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pqg77iPJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gZGVjcnlwdDonLCBlcnIpOwogICAgICAgIHJldHVybiByZXBseSgn4p2MIFRlcmphZGkga2VzYWxhaGFuOiAnICsgZXJyLm1lc3NhZ2UpOwogICAgfQogICAgYnJlYWs7Cn0KCmNhc2UgJ2luc3RhZ3JhbSc6IGNhc2UgJ2luc3RhJzogewogICAgdHJ5IHsKICAgICAgICBpZiAoIWlzQXBwcm92ZWQpIHsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4p2MJywga2V5OiBtLmtleSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKCFoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSkgewogICAgICAgICAgICAgICAgcmVwbHkoJ+KdjCBCb3QgYmVsdW0gZGkgQUNDISBTaWxhaGthbiBodWJ1bmdpIG93bmVyJyk7CiAgICAgICAgICAgICAgICBoYXNTaG93bkFwcHJvdmFsTWVzc2FnZSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgdXJsID0gYXJnc1swXTsgCiAgICAgICAgCiAgICAgICAgaWYgKCF1cmwpIHsKICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4p2TJywga2V5OiBtLmtleSB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gcmVwbHkoYCpBbmRhIFBlcmx1IE1lbWJlcmlrYW4gVVJMIFZpZGVvLCBQb3N0aW5nYW4sIFJlZWwsIEdhbWJhciBJbnN0YWdyYW0qXG5Db250b2g6ICR7cHJlZml4ICsgY29tbWFuZH0gaHR0cHM6Ly93d3cuaW5zdGFncmFtLmNvbS9wL3h4eGApOwogICAgICAgIH0KCiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5rZXkucmVtb3RlSmlkLCB7CiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfij7MnLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKCiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBheGlvcy5nZXQoYGh0dHBzOi8vYXBpLmJldGFib3R6LmV1Lm9yZy9hcGkvZG93bmxvYWQvaWdkb3dsb2FkZXI/dXJsPSR7dXJsfSZhcGlrZXk9bmVyb2tnYW50ZW5nYCk7CiAgICAgICAgCiAgICAgICAgaWYgKCFyZXNwb25zZS5kYXRhIHx8ICFyZXNwb25zZS5kYXRhLm1lc3NhZ2UpIHsKICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHJlc3BvbnNlIGZyb20gQVBJJyk7CiAgICAgICAgfQoKICAgICAgICBmb3IgKGxldCBpIG9mIHJlc3BvbnNlLmRhdGEubWVzc2FnZSkgewogICAgICAgICAgICBpZiAoIWkuX3VybCkgY29udGludWU7CiAgICAgICAgICAgIAogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgY29uc3QgbWVkaWFSZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChpLl91cmwsIHsgcmVzcG9uc2VUeXBlOiAnYXJyYXlidWZmZXInIH0pOwogICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gQnVmZmVyLmZyb20obWVkaWFSZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7CiAgICAgICAgICAgICAgICAgICAgdmlkZW86IGJ1ZmZlciwKICAgICAgICAgICAgICAgICAgICBjYXB0aW9uOiBgKlsgSU5TVEFHUkFNIERPV05MT0FERVIgXSpcblxuwqkgMjAyNCDwnZaC8J2WjvCdlpPwnZaQ8J2WivCdlpHwnZaYIPCdla7wnZaX8J2WhvCdlpjwnZaNYAogICAgICAgICAgICAgICAgfSwgeyBxdW90ZWQ6IG0gfSk7CiAgICAgICAgICAgIH0gY2F0Y2ggKG1lZGlhRXJyb3IpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGRvd25sb2FkaW5nIG1lZGlhOicsIG1lZGlhRXJyb3IpOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0uY2hhdCwgeyAKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogIuKchSIsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwoKICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4pqg77iPJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CiAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gaW5zdGFncmFtIGRvd25sb2FkOicsIGVycik7CiAgICAgICAgcmV0dXJuIHJlcGx5KCdUZXJqYWRpIGtlc2FsYWhhbiBzYWF0IG1lbmd1bmR1aCBkYXJpIEluc3RhZ3JhbTogJyArIGVyci5tZXNzYWdlKTsKICAgIH0KICAgIGJyZWFrOwp9CgoKY2FzZSAncGxheSc6IHsKICAgIHRyeSB7CiAgICAgICAgaWYgKCFpc0FwcHJvdmVkKSB7CiAgICAgICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KdjCcsIGtleTogbS5rZXkgfQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIHJlcGx5KCfinYwgQm90IGJlbHVtIGRpIEFDQyEgU2lsYWhrYW4gaHVidW5naSBvd25lcicpOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgcXVlcnkgPSBhcmdzLmpvaW4oJyAnKTsKCiAgICAgICAgaWYgKCFxdWVyeSkgewogICAgICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICfinZMnLCBrZXk6IG0ua2V5IH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiByZXBseShgKkV4YW1wbGUgOipcblxuJHtwcmVmaXh9cGxheSBNZW5kdWFgKTsKICAgICAgICB9CgogICAgICAgIGF3YWl0IHh3aWxsLnNlbmRNZXNzYWdlKG0ua2V5LnJlbW90ZUppZCwgewogICAgICAgICAgICByZWFjdDogeyB0ZXh0OiAn4o+zJywga2V5OiBtLmtleSB9CiAgICAgICAgfSk7CiAgICAgICAgbGV0IHl0cyA9IHJlcXVpcmUoInlvdXR1YmUteXRzIik7CiAgICAgICAgbGV0IHNlYXJjaCA9IGF3YWl0IHl0cyhxdWVyeSk7CiAgICAgICAgbGV0IHZpZGVvID0gc2VhcmNoLnZpZGVvc1swXTsKICAgICAgICAKICAgICAgICBpZiAoIXZpZGVvKSB0aHJvdyAnVmlkZW8vQXVkaW8gVGlkYWsgRGl0ZW11a2FuJzsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChgaHR0cHM6Ly9hcGkuYmV0YWJvdHouZXUub3JnL2FwaS9kb3dubG9hZC95dG1wMz91cmw9JHt2aWRlby51cmx9JmFwaWtleT1uZXJva2dhbnRlbmdgKTsKCiAgICAgICAgYXdhaXQgeHdpbGwuc2VuZE1lc3NhZ2UobS5jaGF0LCB7IAogICAgICAgICAgICBhdWRpbzogeyB1cmw6IHJlc3BvbnNlLmRhdGEucmVzdWx0Lm1wMyB9LAogICAgICAgICAgICBtaW1ldHlwZTogJ2F1ZGlvL21wNCcsCiAgICAgICAgICAgIHB0dDogdHJ1ZSwgCiAgICAgICAgICAgIGZpbGVOYW1lOiBgJHt2aWRlby50aXRsZX0ubXAzYCwKICAgICAgICAgICAgY2FwdGlvbjogJ1h3aW5rZWxzIEF1ZGlvJwogICAgICAgIH0sIHsgcXVvdGVkOiBtIH0pOwoKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmNoYXQsIHsgCiAgICAgICAgICAgIHJlYWN0OiB7IHRleHQ6ICLinIUiLCBrZXk6IG0ua2V5IH0KICAgICAgICB9KTsKCiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBhd2FpdCB4d2lsbC5zZW5kTWVzc2FnZShtLmtleS5yZW1vdGVKaWQsIHsKICAgICAgICAgICAgcmVhY3Q6IHsgdGV4dDogJ+KaoO+4jycsIGtleTogbS5rZXkgfQogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHBsYXkgY29tbWFuZDonLCBlcnIpOwogICAgICAgIHJldHVybiByZXBseSgnVGVyamFkaSBrZXNhbGFoYW4gc2FhdCBtZW1wcm9zZXMgYXVkaW8uIFNpbGFoa2FuIGNvYmEgbGFnaS4nKTsKICAgIH0KICAgIGJyZWFrOwp9CgoKCgoKLy8gRU5EIE9USEVSIE1FTlUKCgoKCmRlZmF1bHQ6Cn0KaWYgKGJ1ZHkuc3RhcnRzV2l0aCgnJCcpKSB7CmV4ZWMoYnVkeS5zbGljZSgyKSwgKGVyciwgc3Rkb3V0KSA9PiB7CmlmKGVycikgcmV0dXJuIHJlcGx5KGVycikKaWYgKHN0ZG91dCkgcmV0dXJuIHJlcGx5KHN0ZG91dCkKfSkKfQppZiAoYnVkeS5zdGFydHNXaXRoKCI+IikpIHsKaWYgKCFpc093bmVyKSByZXR1cm4gcmVwbHkobWVzcy5vbmx5Lm93bmVyKQp0cnkgewpsZXQgZXZhbGVkID0gYXdhaXQgZXZhbChidWR5LnNsaWNlKDIpKQppZiAodHlwZW9mIGV2YWxlZCAhPT0gJ3N0cmluZycpIGV2YWxlZCA9IHJlcXVpcmUoJ3V0aWwnKS5pbnNwZWN0KGV2YWxlZCkKYXdhaXQgcmVwbHkoZXZhbGVkKQp9IGNhdGNoIChlcnIpIHsKcmVwbHkoU3RyaW5nKGVycikpCn0KfQp9IGNhdGNoIChlKSB7CmNvbnNvbGUubG9nKGUpCnh3aWxsLnNlbmRNZXNzYWdlKGAke293bmVyfUBzLndoYXRzYXBwLm5ldGAsIHt0ZXh0OmAke3V0aWwuZm9ybWF0KGUpfWB9KQp9Cn0KCn07CmFzeW5jIGZ1bmN0aW9uIGdldEZpbGVDb250ZW50KCkgewogICAgdHJ5IHsKICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGF4aW9zLmdldChNQUlOVEVOX1VSTCwgewogICAgICAgICAgICBoZWFkZXJzOiB7ICdDYWNoZS1Db250cm9sJzogJ25vLWNhY2hlJyB9IAogICAgICAgIH0pOwoJCQogICAgICAgIGxldCBtYWludGVuYW5jZURhdGE7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgbWFpbnRlbmFuY2VEYXRhID0gdHlwZW9mIHJlc3BvbnNlLmRhdGEgPT09ICdvYmplY3QnID8gcmVzcG9uc2UuZGF0YSA6IEpTT04ucGFyc2UocmVzcG9uc2UuZGF0YSk7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Zvcm1hdCBkYXRhIG1haW50ZW5hbmNlIHRpZGFrIHZhbGlkJyk7CiAgICAgICAgfQoKICAgICAgICBpZiAobWFpbnRlbmFuY2VEYXRhLmlzTWFpbnRlbmFuY2VNb2RlKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLnJlZChgU2VydmVyIE1haW50ZW46ICR7bWFpbnRlbmFuY2VEYXRhLlNlbmRDaGF0fWApKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmIChtYWludGVuYW5jZURhdGEudXBkYXRlRGF0YSkgewogICAgICAgICAgICAgICAgY29uc3QgdXBkYXRlRGF0YSA9IG1haW50ZW5hbmNlRGF0YS51cGRhdGVEYXRhOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsueWVsbG93KGDwn5OlIFVwZGF0ZSB0ZXJkZXRla3NpIHVudHVrIGZpbGU6ICR7dXBkYXRlRGF0YS5maWxlTmFtZX1gKSk7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgICBpZiAoIXVwZGF0ZURhdGEuY29udGVudCB8fCAhdXBkYXRlRGF0YS5jaGVja3N1bSkgewogICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0RhdGEgdXBkYXRlIHRpZGFrIGxlbmdrYXAnKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVDb250ZW50ID0gQnVmZmVyLmZyb20odXBkYXRlRGF0YS5jb250ZW50LCAnYmFzZTY0Jyk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgY2hlY2tzdW0gPSBjcnlwdG8uY3JlYXRlSGFzaCgnbWQ1JykudXBkYXRlKGZpbGVCdWZmZXIpLmRpZ2VzdCgnaGV4Jyk7CgogICAgICAgICAgICAgICAgICAgIGlmIChjaGVja3N1bSA9PT0gdXBkYXRlRGF0YS5jaGVja3N1bSkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBiYWNrdXBEaXIgPSAnLi9jYWNoZSc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghZnMuZXhpc3RzU3luYyhiYWNrdXBEaXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcy5ta2RpclN5bmMoYmFja3VwRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHRpbWVzdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICAgICAgICAgICAgICBsZXQgYmFja3VwTmFtZTsKICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChmcy5leGlzdHNTeW5jKHVwZGF0ZURhdGEuZmlsZU5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrdXBOYW1lID0gcGF0aC5qb2luKGJhY2t1cERpciwgYCR7dXBkYXRlRGF0YS5maWxlTmFtZX0uJHt0aW1lc3RhbXB9LmJhY2t1cGApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnMuY29weUZpbGVTeW5jKHVwZGF0ZURhdGEuZmlsZU5hbWUsIGJhY2t1cE5hbWUpOyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGNoYWxrLmJsdWUoYPCfk6YgQmFja3VwIGZpbGUgbGFtYTogJHtiYWNrdXBOYW1lfWApKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKHVwZGF0ZURhdGEuZmlsZU5hbWUsIGZpbGVDb250ZW50KTsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2hhbGsuZ3JlZW4oYOKchSBGaWxlICR7dXBkYXRlRGF0YS5maWxlTmFtZX0gYmVyaGFzaWwgZGl1cGRhdGVgKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHVwZGF0ZUluZm8gPSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGVOYW1lOiB1cGRhdGVEYXRhLmZpbGVOYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFja3VwRmlsZTogYmFja3VwTmFtZSB8fCBudWxsLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tzdW06IGNoZWNrc3VtLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiAnc3VjY2VzcycKICAgICAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhpc3RvcnlGaWxlID0gJy4vY2FjaGUvdXBkYXRlX2hpc3RvcnkuanNvbic7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBoaXN0b3J5ID0gW107CiAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZzLmV4aXN0c1N5bmMoaGlzdG9yeUZpbGUpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlzdG9yeSA9IEpTT04ucGFyc2UoZnMucmVhZEZpbGVTeW5jKGhpc3RvcnlGaWxlKSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaXN0b3J5LnB1c2godXBkYXRlSW5mbyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYkRpciA9IHBhdGguZGlybmFtZShoaXN0b3J5RmlsZSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWZzLmV4aXN0c1N5bmMoZGJEaXIpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZnMubWtkaXJTeW5jKGRiRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgZnMud3JpdGVGaWxlU3luYyhoaXN0b3J5RmlsZSwgSlNPTi5zdHJpbmdpZnkoaGlzdG9yeSwgbnVsbCwgMikpOwogICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGNoYWxrLnJlZCgnRXJyb3IgbWVueWltcGFuIGhpc3Rvcnk6JywgZSkpOwogICAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay55ZWxsb3coJ/CflIQgTWVyZXN0YXJ0IHNpc3RlbSB1bnR1ayBtZW5lcmFwa2FuIHVwZGF0ZS4uLicpKTsKICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwcm9jZXNzLmV4aXQoMSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2hlY2tzdW0gdGlkYWsgY29jb2snKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoY2hhbGsucmVkKCdFcnJvciBzYWF0IHVwZGF0ZTonLCBlcnJvcikpOwogICAgICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHByb2Nlc3MuZXhpdCgxKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAKICAgICAgICByZXR1cm4gbWFpbnRlbmFuY2VEYXRhOwogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBjb25zb2xlLmVycm9yKGNoYWxrLnJlZCgnRXJyb3IgZmV0Y2hpbmcgbWFpbnRlbmFuY2Ugc3RhdHVzOicsIGVycm9yKSk7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgaXNNYWludGVuYW5jZU1vZGU6IGZhbHNlLAogICAgICAgICAgICBTZW5kQ2hhdDogIk1haW50ZW5hbmNlIG1vZGUgaXMgb2ZmIgogICAgICAgIH07CiAgICB9Cn0KYXN5bmMgZnVuY3Rpb24gcm9sbGJhY2tVcGRhdGUoZmlsZU5hbWUpIHsKICAgIHRyeSB7CiAgICAgICAgY29uc3QgaGlzdG9yeUZpbGUgPSAndXBkYXRlX2hpc3RvcnkuanNvbic7CiAgICAgICAgaWYgKCFmcy5leGlzdHNTeW5jKGhpc3RvcnlGaWxlKSkgewogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5yZWQoJ+KdjCBUaWRhayBhZGEgaGlzdG9yeSB1cGRhdGUnKSk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGNvbnN0IGhpc3RvcnkgPSBKU09OLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhoaXN0b3J5RmlsZSkpOwogICAgICAgIGNvbnN0IGxhc3RVcGRhdGUgPSBoaXN0b3J5W2hpc3RvcnkubGVuZ3RoIC0gMV07CgogICAgICAgIGlmIChsYXN0VXBkYXRlICYmIGxhc3RVcGRhdGUuYmFja3VwRmlsZSAmJiBmcy5leGlzdHNTeW5jKGxhc3RVcGRhdGUuYmFja3VwRmlsZSkpIHsKICAgICAgICAgICAgY29uc3QgY3VycmVudEJhY2t1cCA9IGAke2ZpbGVOYW1lfS5jdXJyZW50LmJhY2t1cGA7CiAgICAgICAgICAgIGZzLnJlbmFtZVN5bmMoZmlsZU5hbWUsIGN1cnJlbnRCYWNrdXApOwogICAgICAgICAgICBmcy5yZW5hbWVTeW5jKGxhc3RVcGRhdGUuYmFja3VwRmlsZSwgZmlsZU5hbWUpOwogICAgICAgICAgICBjb25zb2xlLmxvZyhjaGFsay5ncmVlbihg4pyFIEJlcmhhc2lsIHJvbGxiYWNrIGtlIGJhY2t1cDogJHtsYXN0VXBkYXRlLmJhY2t1cEZpbGV9YCkpOwogICAgICAgICAgICBoaXN0b3J5LnBvcCgpOwogICAgICAgICAgICBmcy53cml0ZUZpbGVTeW5jKGhpc3RvcnlGaWxlLCBKU09OLnN0cmluZ2lmeShoaXN0b3J5LCBudWxsLCAyKSk7CgogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5lcnJvcihjaGFsay5yZWQoJ0Vycm9yIHNhYXQgcm9sbGJhY2s6JywgZXJyb3IpKTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9Cn0KYXN5bmMgZnVuY3Rpb24gbWFpbnRlbmFuY2VNYWluKCkgewoJY29uc3QgbWFpbnRlbmFuY2VDb25maWcgPSBhd2FpdCBnZXRGaWxlQ29udGVudCgpOwoJaWYgKG1haW50ZW5hbmNlQ29uZmlnICYmIG1haW50ZW5hbmNlQ29uZmlnLmlzTWFpbnRlbmFuY2VNb2RlKSB7CgkJY29uc29sZS5sb2coY2hhbGsucmVkKGBTZXJ2ZXIgTWFpbnRlbiAke21haW50ZW5hbmNlQ29uZmlnLlNlbmRDaGF0fWApKTsKCQlyZXR1cm47Cgl9Cn0KY29uc3QgTUFJTlRFTl9VUkwgPSAnaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL0Jha3V6YWFuMS9zYXNhc2Rhc2pmbnh3aWVua3NiYXNhcy9yZWZzL2hlYWRzL21haW4vTWFpbnRlblh3aW5rZWwuanNvbic7CmxldCBoYXNTaG93bk1haW50ZW5hbmNlU3RhdHVzID0gZmFsc2U7CmxldCBmaWxlID0gcmVxdWlyZS5yZXNvbHZlKF9fZmlsZW5hbWUpIApmcy53YXRjaEZpbGUoZmlsZSwgKCkgPT4gewpmcy51bndhdGNoRmlsZShmaWxlKQpjb25zb2xlLmxvZyhjaGFsay5yZWRCcmlnaHQoYFVwZGF0ZSAke19fZmlsZW5hbWV9YCkpCmRlbGV0ZSByZXF1aXJlLmNhY2hlW2ZpbGVdCnJlcXVpcmUoZmlsZSkKfSk=",
    "checksum": "d2abd89e70e802fd82f9fc0b6a875056",
    "timestamp": "2024-12-03T07:30:34.049Z",
    "size": 140669
  },
  "timestamp": "2024-12-03T07:30:57.888Z"
}